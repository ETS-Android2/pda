(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{213:function(e,a,t){e.exports=t(434)},433:function(e,a,t){},434:function(e,a,t){"use strict";t.r(a);var n=t(5),c=t.n(n),o=t(10),r=(t(215),t(224),t(0)),s=t.n(r),l=t(203),m=t.n(l),i=t(2),u=(t(212),t(83)),f=t(3),d=t(8),p=t.n(d),b=t(204),E=s.a.forwardRef((function(e,a){var t=e.visible,n=e.setVisible,c=e.visibleCallback,o=e.children,l=Object(b.a)().t,m=Object(r.useState)(t),u=Object(i.a)(m,2),f=u[0],d=u[1];return Object(r.useEffect)((function(){d(t)}),[t]),Object(r.useEffect)((function(){c&&c(f)}),[f]),s.a.createElement("section",{className:"w3-modal famo-modal "+(f?"w3-show":""),onClick:function(e){return n(!1)}},s.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},o),s.a.createElement("div",{className:"famo-buttons"},s.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:l("key_200"),onClick:function(e){return function(e){e.stopPropagation(),n(!1)}(e)}},s.a.createElement("span",{className:"fas fa-times"}))))})),h=t(102),v=t.n(h);var N=function(e){var a=e.text,t=Object(r.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1];return s.a.createElement("div",{className:"famo-title "+(c?"collapsed":"")},s.a.createElement("span",{className:"famo-text-13",onClick:function(e){o(!c)}},a))};function y(e){var a=e.hide;return s.a.createElement("div",{className:"pda-app-loader "+(a?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function k(e){var a=e.hide;return s.a.createElement("div",{className:"famo-loader-wrapper "+(a?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function x(e){var a="?timestamp="+(new Date).getTime();for(var t in e){var n=e[t];if(Array.isArray(n))for(var c=0,o=n.length;c<o;c++)a+="&"+t+"="+(null===n[c]?"":encodeURIComponent(n[c]));else a+="&"+t+"="+(null===n?"":encodeURIComponent(n))}return a}function O(e,a){var t=document.createElement("script");t.async=!0,t.src=e,t.type="text/javascript",a.current.appendChild(t)}var g="file:"===window.location.protocol?"http://192.168.3.109:9070/":window.location.protocol+"//"+window.location.hostname+":9070/";function j(e){fetch(g+"Log/Http/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function w(e){fetch(g+"Log/Promise/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var C=t(42),_=t(54),S=t(45),P=t.n(S);function D(e){return e?e.toString().replace(new RegExp("\\"+P.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+P.a.localeData().delimiters.decimal,"g"),"."):e}function T(){return(T=Object(o.a)(c.a.mark((function e(a,t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.current.selectionStart,o=t.current.value,110===a.keyCode&&(a.preventDefault(),t.current.value=o.substr(0,n)+P.a.localeData().delimiters.decimal+o.substr(n,o.length-1));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){switch(e){case"POR":P.a.locale("pt-pt");break;case"ENG":P.a.locale("en");break;case"ESP":P.a.locale("es-es");break;case"FRA":P.a.locale("fr")}}window.numeral=P.a;var F=s.a.forwardRef((function(e,a){var t=Object(b.a)().t,n=e.className,c=e.isDisabled,o=e.isNumber,l=e.name,m=e.value,u=e.autoFocus,d=e.noData,p=e.wrongFormat,E=e.invalidValue,h=e.invalidMessage,v=e.analyze,N=e.set,y=e.children,k=Object(r.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),x=Object(i.a)(k,2),O=x[0],g=x[1],j=s.a.Children.count(y)>0;return Object(r.useEffect)((function(){if(!c&&v){var e=m;N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?o&&e&&(e=D(e),isNaN(e)?N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!0})}))):N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!0,wrongFormat:!1,invalidValue:!1})})),N((function(e){return Object(f.a)(Object(f.a)({},e),{},{localAnalyze:!0})}))}}),[v]),Object(r.useEffect)((function(){g({noData:d,wrongFormat:p,invalidValue:E})}),[d,p,E]),s.a.createElement(s.a.Fragment,null,j?s.a.createElement("select",{className:n+(O.noData?" famo-input-error":""),name:l,ref:a,disabled:c,onChange:function(e){return N((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:a.current.value})}))}},y):s.a.createElement("input",{type:"text",className:n+(O.noData?" famo-input-error":O.wrongFormat||O.invalidValue?" famo-input-warning":""),name:l,value:m,ref:a,autoFocus:u,disabled:c,onKeyDown:function(e){o&&function(e,a){T.apply(this,arguments)}(e,a)},onChange:function(e){return N((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:a.current.value})}))}}),!j&&s.a.createElement(s.a.Fragment,null,!c&&s.a.createElement("div",{className:"famo-input-message "+(O.wrongFormat?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},t("key_808"))),h&&!c&&s.a.createElement("div",{className:"famo-input-message "+(O.invalidValue?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},h))))})),I=function(){function e(){Object(C.a)(this,e)}return Object(_.a)(e,null,[{key:"analyze",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!0})}))}))}},{key:"areAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.localAnalyze}))}},{key:"areValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(D(e.value)):e.value}},{key:"popUpAlerts",value:function(e,a){e.some((function(e){return e.noData}))&&V.noData(a),e.some((function(e){return e.wrongFormat}))&&V.wrongFormat(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),a),e.some((function(e){return e.invalidValue}))&&V.invalidValue(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),a)}},{key:"resetValidations",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!1,localAnalyze:!1})}))}))}},{key:"resetValues",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,selfAnalyze:!1})}))}))}}]),e}(),V=function(){function e(){Object(C.a)(this,e)}return Object(_.a)(e,null,[{key:"invalidValue",value:function(e,a){for(var t=a("key_192"),n=0,c=e.length;n<c;n++)t+=e[n],n<c-2?t+=", ":n===c-2&&(t+=" "+a("key_573")+" ");alert(t)}},{key:"noData",value:function(e){alert(e("key_197"))}},{key:"wrongFormat",value:function(e,a){for(var t=a("key_191"),n=0,c=e.length;n<c;n++)t+=e[n],n<c-2?t+=", ":n===c-2&&(t+=" "+a("key_573")+" ");alert(t)}}]),e}(),B=F,R=t(18),L=function(){function e(){Object(C.a)(this,e)}return Object(_.a)(e,null,[{key:"clear",value:function(e){e?e.pallet||window.sessionStorage.removeItem("SS_PALLET"):window.sessionStorage.clear()}}]),e}(),U=t(210),z={setAndroidApp:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{androidApp:a}))},setAuthUser:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{authUser:a}))},setLoadPage:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{loadPage:a}))}},M=Object(U.a)(s.a,{androidApp:!1,authUser:null,loadPage:!1},z);function K(e){var a=Object(b.a)().t,t=e.history,n=M(),l=Object(i.a)(n,2)[1],m=[a("key_87"),a("key_138"),"Box's"],u=Object(r.useState)([]),f=Object(i.a)(u,2),d=f[0],E=f[1];return Object(r.useEffect)((function(){l.setLoadPage(!0),fetch(g+"ERP/Shipments"+x({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){E(e)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:j(t),alert(a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){l.setLoadPage(!1)})),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:"Mapas de carga"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-content-grid shipments"},s.a.createElement("div",{className:"famo-row famo-header-row"},m.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),d.map((function(e,n){return s.a.createElement("div",{key:n,className:"famo-row famo-body-row",onClick:function(a){return n=e.Code,void t.push("/Expedition/Edit?shipmentCode="+n);var n}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10 "+(e.Description?"":"famo-color-yellow")},e.Description?e.Description:a("key_237"))),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.PickedBoxes+"/"+e.TotalBoxes)))}))))))}function G(e){var a=Object(b.a)().t,t=e.location,n=e.history,l=M(),m=Object(i.a)(l,2),d=m[0],h=m[1],y=v.a.parse(t.search),O=y.shipmentCode,C=Object(r.useState)(),_=Object(i.a)(C,2),S=_[0],P=_[1],D=Object(r.useState)({ref:s.a.createRef(),label:"Box",className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),T=Object(i.a)(D,2),A=T[0],F=T[1],I=[a("key_179"),a("key_54"),"Box's"],V=Object(r.useState)([]),R=Object(i.a)(V,2),U=R[0],z=R[1],K=Object(r.useState)([]),G=Object(i.a)(K,2),q=G[0],J=G[1],H=Object(r.useState)(!1),Y=Object(i.a)(H,2),W=Y[0],Q=Y[1],X=Object(r.useState)(!1),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],ae=Object(r.useState)(!1),te=Object(i.a)(ae,2),ne=te[0],ce=te[1],oe=[a("key_87"),a("key_138"),"Box",""],re=Object(r.useState)([[]]),se=Object(i.a)(re,2),le=se[0],me=se[1];function ie(){F((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),A.ref.current.focus()}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.querySelector(".fas").classList.remove("hide"),e.querySelector('span[class*="famo-text-"]').classList.add("hide"),fetch(g+"ERP/Shipments/Products/Components"+x({orderCode:t,orderLine:n}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){ce(!0),me(e)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:j(t),alert(a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){ce(!0),e.querySelector(".fas").classList.add("hide"),e.querySelector('span[class*="famo-text-"]').classList.remove("hide")}))}function fe(){if(A.value.startsWith("PL")){var e=A.value.match(/PL.*?\//g);Q(!0),fetch(g+"ERP/Pallets/Boxes"+x({shipmentCode:y.shipmentCode,palletID:e?parseInt(e[0].replace("PL","").replace("/","")):-1}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){e.forEach((function(e){q.some((function(a){return a.Code!==e.Code}))&&J([e].concat(Object(u.a)(q)))}))})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:j(t),alert(t.status===p.a.NOT_FOUND?"A palete n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio.":a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){ie(),Q(!1)}))}else q&&q.some((function(e){return e.Code===A.value}))?alert("A embalagem j\xe1 est\xe1 pronta a carregar."):(Q(!0),fetch(g+"ERP/Shipments/Boxes"+x({shipmentCode:y.shipmentCode,boxCode:A.value}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){J([e].concat(Object(u.a)(q)))})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=16;break;case 5:if(j(t),t.status!==p.a.NOT_FOUND){e.next=10;break}alert("A embalagem\xa0n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio."),e.next=16;break;case 10:if(t.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,t.json().then((function(e){"box"===e.reason?alert("A embalagem j\xe1 foi carregada."):"pallet"===e.reason&&alert(a("key_828"))})).catch((function(e){w(e),alert(a("key_416"))}));case 13:e.next=16;break;case 15:alert(a("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){ie(),Q(!1)})))}return Object(r.useEffect)((function(){F((function(e){return Object(f.a)(Object(f.a)({},e),{},{isDisabled:$})}))}),[$]),Object(r.useEffect)((function(){h.setLoadPage(!0);var e=fetch(g+"ERP/Shipments"+x({code:O}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){P(e)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=8;break;case 5:j(t),alert(t.status===p.a.NOT_FOUND?a("key_825"):a("key_303")),n.replace("/Expedition");case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})),t=fetch(g+"ERP/Shipments/Products"+x({shipmentCode:O}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){z(e)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:j(t),alert(a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))}));Promise.all([e,t]).finally((function(){h.setLoadPage(!1)})),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"container famo-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-xl-8"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),fe()}},!d.androidApp&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},a("key_822"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10"},y.shipmentCode)))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},a("key_138"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10 "+(S&&S.Description?"":"famo-color-yellow")},S&&S.Description?S.Description:a("key_237")))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},"Box")),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},A,{set:F})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:W||$,onClick:function(e){return ie()}},s.a.createElement("span",{className:"famo-text-12"},a("key_829"))),!d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:W||$,onClick:function(e){return fe()}},s.a.createElement("span",{className:"famo-text-12"},a("key_815"))))))))),!d.androidApp&&s.a.createElement("div",{className:"col-12 col-xl-4"},s.a.createElement("section",{id:"special-consults",className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!$}),s.a.createElement("div",{className:"famo-grid rating-panel "+($?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-center"},s.a.createElement("span",{className:"famo-text-23 famo-color-green"},U.reduce((function(e,a){return 1===a.Status?e+a.TotalBoxes:e}),0)),s.a.createElement("span",{className:"famo-text-23"},"/",U.reduce((function(e,a){return e+a.TotalBoxes}),0)))))))))),s.a.createElement("section",{className:"container famo-wrapper expedition-details"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:"Em falta"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!$}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+($?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},I.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)+" "+(a===I.length-1?"text-center":"")},s.a.createElement("span",{className:"famo-text-11"},e))}))),U.filter((function(e){return 0===e.Status})).map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button famo-loader-button text-left",onClick:function(a){return ue(a.currentTarget,e.OrderCode)}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(e.PendingBoxes>0?"famo-color-red":"")+" hide"}),s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.OrderCode))),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.ProductCode)),s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.ProductDescription))),s.a.createElement("div",{className:"famo-cell famo-col-3 text-center"},s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button famo-loader-button",onClick:function(a){return ue(a.currentTarget,e.OrderCode,e.OrderLine)}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(e.PendingBoxes>0?"famo-color-red":"")+" hide"}),s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.PendingBoxes,"/",e.TotalBoxes))))})))))),s.a.createElement("div",{className:"col-12 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:"Pronto p/carregar"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!W&&!$}),s.a.createElement("div",{className:"famo-grid "+(W||$?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button famo-confirm-button button-save-boxes",disabled:W||$||0===q.length,onClick:function(e){return ee(!0),void fetch(g+"ERP/Shipments/Boxes"+x({shipmentCode:y.shipmentCode}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q.map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){z(e),J([])})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:j(t),alert(a("key_302"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){ie(),ee(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},a("key_220")))))),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-boxes "+(W||$?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},["Box's",""].map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e+(0===a?" ("+q.length+")":"")))}))),q.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return t=e.Code,void(window.confirm("Tem a certeza que pretende eliminar a embalagem?")&&J(q.filter((function(e){return e.Code!==t}))));var t}},s.a.createElement("span",{className:"fas fa-trash-alt"}))))})))))),s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:"Carregado"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!$}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+($?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},I.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)+" "+(a===I.length-1?"text-center":"")},s.a.createElement("span",{className:"famo-text-11"},e))}))),U.filter((function(e){return 1===e.Status})).map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10"},e.ProductCode)),s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10"},e.ProductDescription))),s.a.createElement("div",{className:"famo-cell famo-col-3 text-center"},s.a.createElement("span",{className:"famo-text-10"},e.TotalBoxes)))})))))))),s.a.createElement(E,{visible:ne,setVisible:ce},le.filter((function(e){return e.length>0})).map((function(e,t){var n=e[0].ProductCode,c=e[0].ProductDescription;return s.a.createElement("section",{key:t,className:"famo-wrapper"},s.a.createElement(N,{text:n+" - "+c}),s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-components"},s.a.createElement("div",{className:"famo-row famo-header-row"},oe.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),e.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.ComponentCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10 "+(e.ComponentDescription?"":"famo-color-yellow")},e.ComponentDescription?e.ComponentDescription:a("key_237"))),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.BoxCode)),s.a.createElement("div",{className:"famo-cell famo-col-4"},s.a.createElement("span",{className:"fas "+(e.BoxPrinted?"fa-check famo-color-green":"fa-times famo-color-red")})))})))))}))))}var q=Object(R.i)((function(){return s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/Expedition",render:function(e){return s.a.createElement(K,e)}}),s.a.createElement(R.b,{exact:!0,path:"/Expedition/Edit",render:function(e){return s.a.createElement(G,e)}}),s.a.createElement(R.b,{path:"/Expedition/*",render:function(){return s.a.createElement(R.a,{to:"/Expedition"})}}))})),J=t(66),H=t(435);var Y=Object(R.i)(Object(H.a)()((function(e){var a=e.t,t=Object(r.useState)({inventory:!1,pallet:!1,expedition:!1}),n=Object(i.a)(t,2),c=n[0],o=n[1],l=[{label:"Expedi\xe7\xe3o",key:"expedition",image:"btn-expedicao.png"},{label:a("key_826"),key:"pallet",image:"btn-palete.png"},{label:a("key_806"),key:"inventory",image:"btn-inventario.png"}];return Object(r.useEffect)((function(){L.clear()}),[]),c.expedition?s.a.createElement(R.a,{push:!0,to:"/Expedition"}):c.pallet?s.a.createElement(R.a,{push:!0,to:"/Pallet"}):c.inventory?s.a.createElement(R.a,{push:!0,to:"/Inventory"}):s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row",style:{justifyContent:"center"}},l.map((function(e,a){return s.a.createElement("div",{key:a,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper",onClick:function(a){return o((function(a){return Object(f.a)(Object(f.a)({},a),{},Object(J.a)({},e.key,!0))}))}},s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-menu-item"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-label text-center"},s.a.createElement("span",{className:"famo-text-19",title:e.label},e.label))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-img text-center"},s.a.createElement("img",{src:g+"Images/"+e.image,alt:e.label})))))))}))))})));function W(e,a){function t(e){e.preventDefault(),document.removeEventListener("backbutton",t,!1)}document.addEventListener("backbutton",t,!1),window.cordova.plugins.barcodeScanner.scan((function(a){a.cancelled||(e(a),document.removeEventListener("backbutton",t,!1))}),(function(e){alert(a("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39,CODE_128",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}var Q=Object(R.i)(Object(H.a)()((function(e){var a=e.t,t=M(),n=Object(i.a)(t,2),l=n[0],m=n[1],u=Object(r.useState)({ref:s.a.createRef(),label:a("key_806"),className:"famo-input famo-text-10",name:"inventoryCode",value:"",isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),b=d[0],h=d[1],v=Object(r.useState)([]),y=Object(i.a)(v,2),C=y[0],_=y[1],S=Object(r.useState)(!1),P=Object(i.a)(S,2),D=P[0],T=P[1],A=Object(r.useState)(),F=Object(i.a)(A,2),V=F[0],R=F[1],U=Object(r.useState)({label:a("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!0}),z=Object(i.a)(U,2),K=z[0],G=z[1],q=Object(r.useState)({label:a("key_464"),className:"famo-input famo-text-10",name:"productVariantCode",value:"",isNumber:!1,isDisabled:!0}),J=Object(i.a)(q,2),H=J[0],Y=J[1],Q=Object(r.useState)({label:a("key_138"),className:"famo-input famo-text-10",name:"productDescription",value:"",isNumber:!1,isDisabled:!0}),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)({label:a("key_751"),className:"famo-input famo-text-10",name:"locationCode",value:"",isNumber:!1,isDisabled:!0}),ae=Object(i.a)(ee,2),te=ae[0],ne=ae[1],ce=Object(r.useState)({ref:s.a.createRef(),label:a("key_347"),className:"famo-input famo-text-10",name:"quantity",value:"",isNumber:!0,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:a("key_13")}),oe=Object(i.a)(ce,2),re=oe[0],se=oe[1],le=[K,H,Z,te,re],me=[G,Y,$,ne,se],ie=s.a.createRef(),ue=Object(r.useState)(!1),fe=Object(i.a)(ue,2),de=fe[0],pe=fe[1],be=Object(r.useState)({ref:s.a.createRef(),label:a("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),Ee=Object(i.a)(be,2),he=Ee[0],ve=Ee[1],Ne=[he],ye=[ve];function ke(){I.resetValues(le,me),R(null)}function xe(e){var t=e.split("/"),n=t[0],r="";t.length>1&&(r=t[1]),ke(),T(!0),fetch(g+"ERP/Inventories/Products"+x({inventoryCode:b.value,productCode:n,productVariantCode:r}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){R(e),G((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductCode})})),Y((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductVariantCode})})),$((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductDescription})})),ne((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.LocationCode})}))})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:j(t),alert(t.status===p.a.NOT_FOUND?a("key_809"):a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){T(!1)}))}function Oe(){I.analyze(Ne,ye)}return Object(r.useEffect)((function(){m.setLoadPage(!0),1===Object.keys(window.numeral.locales).length&&(O("http://www.famo-code.com/Scripts/numeral/locales/pt-pt.js?version=27",ie),O("http://www.famo-code.com/Scripts/numeral/locales/es-es.js?version=27",ie),O("http://www.famo-code.com/Scripts/numeral/locales/fr.js?version=27",ie)),fetch(g+"ERP/Inventories"+x({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){_(e)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:j(t),alert(a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){m.setLoadPage(!1)})),L.clear()}),[]),Object(r.useEffect)((function(){ke()}),[b]),Object(r.useEffect)((function(){I.areAnalyzed(le)&&(I.areValid(le)?(T(!0),fetch(g+"ERP/Inventories/Products"+x({documentCode:V.Code,productCode:V.ProductCode,productVariantCode:V.ProductVariantCode,locationCode:V.LocationCode,quantity:I.getValue(re)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(ke(),alert(a("key_805"))):(j(e),alert(a("key_302")))})).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){T(!1)}))):I.popUpAlerts(le,a),I.resetValidations(le,me))}),le),Object(r.useEffect)((function(){I.areAnalyzed(Ne)&&(I.areValid(Ne)&&(xe(he.value),pe(!1)),I.resetValidations(Ne,ye))}),Ne),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper",ref:ie},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},b.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},b,{isDisabled:D,set:h}),s.a.createElement("option",{key:""}),C.map((function(e,a){return s.a.createElement("option",{key:a,value:e.Code},e.Name)})))))),b.value&&s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:D,onClick:function(e){return pe(!0)}},s.a.createElement("span",{className:"famo-text-12"},a("key_807"))),l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:D,onClick:function(e){W((function(e){xe(e.text)}),a)}},s.a.createElement("span",{className:"famo-text-12"},a("key_681")))))))),(V||D)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:a("key_339")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!D}),s.a.createElement("form",{className:"famo-grid famo-form-grid "+(D?"hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},K.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,K))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},H.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,H))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},Z.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Z))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},te.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,te))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},re.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},re,{set:se}))))),s.a.createElement("div",{className:"famo-grid famo-buttons "+(D?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){I.analyze(le,me)}},s.a.createElement("span",{className:"famo-text-12"},a("key_810")))))))),s.a.createElement(E,{visible:de,setVisible:pe,visibleCallback:function(e){e?he.ref.current.focus():I.resetValues(Ne,ye)}},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){return Oe()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},he.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},he,{set:ve})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return Oe()}},s.a.createElement("span",{className:"famo-text-12"},a("key_701"))),s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return pe(!1)}},s.a.createElement("span",{className:"famo-text-12"},a("key_484"))))))))))})));function X(e){var a=Object(b.a)().t,t=e.history,n=M(),l=Object(i.a)(n,1)[0],m=window.sessionStorage.getItem("SS_PALLET"),u=Object(r.useState)({ref:s.a.createRef(),label:a("key_822"),className:"famo-input famo-text-10",name:"shipmentCode",value:m?JSON.parse(window.sessionStorage.getItem("SS_PALLET")).shipmentCode:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),E=d[0],h=d[1],v=Object(r.useState)(),y=Object(i.a)(v,2),O=y[0],C=y[1],_=Object(r.useState)(!1),S=Object(i.a)(_,2),P=S[0],D=S[1],T=[a("key_279")],A=Object(r.useState)(null),F=Object(i.a)(A,2),I=F[0],V=F[1];function R(e){var t=!1;D(!0),fetch(g+"ERP/Pallets"+x({shipmentCode:e}),{method:"GET",credentials:"include"}).then(function(){var n=Object(o.a)(c.a.mark((function n(o){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o.ok||o.status!==p.a.OK){n.next=5;break}return n.next=3,o.json().then((function(a){t=!0,C(e),V(a)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:n.next=7;break;case 5:j(o),alert(o.status===p.a.NOT_FOUND?a("key_825"):a("key_303"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){D(!1),t||V(null)}))}function U(e){window.sessionStorage.setItem("SS_PALLET",JSON.stringify({shipmentCode:O})),t.push("/Pallet/Edit?shipmentCode="+O+(e?"&palletID="+e:""))}return Object(r.useEffect)((function(){m&&R(E.value),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),R(E.value)}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},E.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},E,{set:h})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:P,onClick:function(e){W((function(e){h((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.text})})),R(e.text)}),a)}},s.a.createElement("span",{className:"famo-text-12"},a("key_681"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:P,onClick:function(e){return h((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),void E.ref.current.focus()}},s.a.createElement("span",{className:"famo-text-12"},a("key_829"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:P,onClick:function(e){return R(E.value)}},s.a.createElement("span",{className:"famo-text-12"},a("key_323")))))))),(I||P)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:a("key_826")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!P}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallets "+(P?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},T.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),I&&I.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row",onClick:function(a){return U(e.ID)}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.ID)))}))),s.a.createElement("div",{className:"famo-grid famo-buttons "+(P?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){return U()}},s.a.createElement("span",{className:"famo-text-12"},a("key_817")))))))))}function Z(e){var a=Object(b.a)().t,t=e.location,n=e.history,l=M(),m=Object(i.a)(l,2),d=m[0],h=m[1],y=v.a.parse(t.search),O=Object(r.useState)(y.palletID),C=Object(i.a)(O,2),_=C[0],S=C[1],P=Object(r.useState)(!0),D=Object(i.a)(P,2),T=D[0],A=D[1],F=Object(r.useState)(!1),V=Object(i.a)(F,2),U=V[0],z=V[1],K=[a("key_87"),a("key_179"),""],G=Object(r.useState)([]),q=Object(i.a)(G,2),J=q[0],H=q[1],Y=Object(r.useState)(!1),Q=Object(i.a)(Y,2),X=Q[0],Z=Q[1],$=Object(r.useState)(!1),ee=Object(i.a)($,2),ae=ee[0],te=ee[1],ne=Object(r.useState)(!1),ce=Object(i.a)(ne,2),oe=ce[0],re=ce[1],se=Object(r.useState)(!1),le=Object(i.a)(se,2),me=le[0],ie=le[1],ue=Object(r.useState)({ref:s.a.createRef(),label:"Box",className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),fe=Object(i.a)(ue,2),de=fe[0],pe=fe[1],be=[de],Ee=[pe];function he(e){J.some((function(a){return a.Code===e}))?alert(a("key_814")):(Z(!0),fetch(g+"ERP/Shipments/Boxes"+x({shipmentCode:y.shipmentCode,boxCode:e}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){e.isNew=!0,H([].concat(Object(u.a)(J),[e]))})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=16;break;case 5:if(j(t),t.status!==p.a.NOT_FOUND){e.next=10;break}alert("A embalagem\xa0n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio."),e.next=16;break;case 10:if(t.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,t.json().then((function(e){"box"===e.forbidType?alert("A embalagem j\xe1 foi carregada."):"pallet"===e.forbidType&&alert(a("key_828"))})).catch((function(e){w(e),alert(a("key_416"))}));case 13:e.next=16;break;case 15:alert(a("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){Z(!1)})))}function ve(){T&&J.some((function(e){return e.isNew}))?alert(a("key_821")):(re(!0),fetch(g+"ERP/Pallets/"+(T?"Close":"Reopen")+x(T?{shipmentCode:y.shipmentCode,palletID:_||-1}:{palletID:_||-1}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J.map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(alert(a(T?"key_812":"key_813")),A(!T)):(j(e),alert(a("key_302")))})).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){re(!1)})))}function Ne(){I.analyze(be,Ee)}return Object(r.useEffect)((function(){y.palletID&&(h.setLoadPage(!0),fetch(g+"ERP/Pallets/Boxes"+x({shipmentCode:y.shipmentCode,palletID:y.palletID}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){z(e.some((function(e){return e.IsShipped}))),A(e.some((function(e){return e.IsPalletOpen}))),e.forEach((function(e){e.isNew=!1})),H(e)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:e.next=8;break;case 5:j(t),alert(t.status===p.a.NOT_FOUND?"A palete n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio.":a("key_303")),n.replace("/Pallet");case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){h.setLoadPage(!1)}))),L.clear({pallet:!0})}),[]),Object(r.useEffect)((function(){I.areAnalyzed(be)&&(I.areValid(be)&&(he(de.value),I.resetValues(be,Ee),de.ref.current.focus()),I.resetValidations(be,Ee))}),be),y.shipmentCode?s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:"Box's"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!ae}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes "+(ae?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},K.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),J.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.isNew&&s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return t=e.Code,void(window.confirm("Tem a certeza que pretende eliminar a embalagem?")&&H(J.filter((function(e){return e.Code!==t}))));var t}},s.a.createElement("span",{className:"fas fa-trash-alt"})))))}))),!U&&T&&s.a.createElement("div",{className:"famo-grid famo-buttons "+(ae?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||oe,onClick:function(e){return ie(!0)}},s.a.createElement("span",{className:"famo-text-12"},a("key_815")+" ("+a("key_807").toLowerCase()+")")),d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||oe,onClick:function(e){W((function(e){he(e.text)}),a)}},s.a.createElement("span",{className:"famo-text-12"},a("key_815")+" ("+a("key_681").toLowerCase()+")"))))))),J.length>0&&!U&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-grid"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},T?s.a.createElement(s.a.Fragment,null,J.some((function(e){return e.isNew}))&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||ae||oe,onClick:function(e){return te(!0),void fetch(g+"ERP/Pallets/Boxes"+x({shipmentCode:y.shipmentCode,palletID:_||-1}),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(J.filter((function(e){return e.isNew})).map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=6;break}return e.next=3,t.json().then((function(e){S(e.palletID)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:H(J.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isNew:!1})}))),e.next=8;break;case 6:j(t),alert(a("key_302"));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))})).finally((function(){te(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},a("key_220"))),s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:X||ae||oe,onClick:function(e){return ve()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(oe?"":"hide")}),s.a.createElement("span",{className:"famo-text-12 "+(oe?"hide":"")},a("key_200")))):s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:X||ae||oe,onClick:function(e){return ve()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(oe?"":" hide")}),s.a.createElement("span",{className:"famo-text-12 "+(oe?"hide":"")},a("key_827"))))))),s.a.createElement(E,{visible:me,setVisible:ie,visibleCallback:function(e){e?de.ref.current.focus():I.resetValues(be,Ee)}},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){return Ne()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},de.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},de,{set:pe})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return Ne()}},s.a.createElement("span",{className:"famo-text-12"},a("key_701"))),s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return ie(!1)}},s.a.createElement("span",{className:"famo-text-12"},a("key_484")))))))))):s.a.createElement(R.a,{to:"/Pallet"})}var $=Object(R.i)((function(){return s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/Pallet",render:function(e){return s.a.createElement(X,e)}}),s.a.createElement(R.b,{exact:!0,path:"/Pallet/Edit",render:function(e){return s.a.createElement(Z,e)}}),s.a.createElement(R.b,{path:"/Pallet/*",render:function(){return s.a.createElement(R.a,{to:"/Pallet"})}}))})),ee=t(138),ae=t(137);function te(e,a,t){fetch(g+"Platform/Android"+x({}),{method:"GET",credentials:"include"}).then(function(){var n=Object(o.a)(c.a.mark((function n(o){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o.ok||o.status!==p.a.OK){n.next=5;break}return n.next=3,o.json().then((function(t){A(e.Language.Code),a.setAndroidApp(t),a.setAuthUser(e)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:n.next=7;break;case 5:j(o),alert(t("key_303"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))}))}function ne(e,a){ce.autoSignIn().then(function(){var t=Object(o.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok||n.status!==p.a.OK){t.next=5;break}return t.next=3,n.json().then((function(t){te(t,e,a)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:t.next=7;break;case 5:j(n),alert(a("key_306"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))}))}var ce=function e(){Object(C.a)(this,e)};ce.signIn=function(){var e=Object(o.a)(c.a.mark((function e(a,t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(g+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:t}),credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),ce.autoSignIn=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(g+"Authentication/AutoSignIn"+x({}),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)}))),ce.signOut=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(g+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));var oe=t(103),re=t.n(oe),se=t(209),le=t(211),me=t(84);se.a.use(le.a).use(me.e).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:"http://192.168.3.109:9070/JSON/i18n/{{lng}}.json"+x({}),crossDomain:!0}});var ie=function(e){Object(ee.a)(t,e);var a=Object(ae.a)(t);function t(e){var n;return Object(C.a)(this,t),(n=a.call(this,e)).usernameRef=void 0,n.hideInputMsg=function(e){return"signin-error-input "+(e?"hide":"")},n.handleChangeInput=function(e){n.setState(Object(J.a)({},e.target.name,e.target.value))},n.handleUserInput=function(e){e.target.value||n.setState({hideUserMsg:"blur"!==e.type})},n.handlePwdInput=function(e){e.target.value||n.setState({hidePwdMsg:"blur"!==e.type})},n.handleSubmit=function(){var e=Object(o.a)(c.a.mark((function e(a){var t,o,r,s,l,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t=M(),o=Object(i.a)(t,2),r=o[1],n.state.username&&n.state.password){e.next=6;break}n.setState({hideUserMsg:!!n.state.username,hidePwdMsg:!!n.state.password}),e.next=24;break;case 6:return e.next=8,ce.signIn(n.state.username,n.state.password);case 8:if(s=e.sent,l=n.props.t,n.setState({authError:!1,authHttpCode:-1}),!s.ok){e.next=20;break}return n.setState({authSuccess:!0}),e.t0=r,e.next=16,s.json();case 16:e.t1=e.sent,e.t0.setAuthUser.call(e.t0,e.t1),e.next=24;break;case 20:400!==(m=s.status)&&500!==m&&console.log(l("key_416")+" - "+m),n.usernameRef.current.focus(),n.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:m});case 24:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},n.usernameRef=s.a.createRef(),n}return Object(_.a)(t,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=re()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),a=re()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),t=re()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,o=n.location;return this.state.authSuccess?s.a.createElement(R.a,{to:o.state||{from:{pathname:"/"}}}):s.a.createElement("section",{className:"famo-grid signin"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"signin-body"},s.a.createElement("div",{className:"signin-famo-logo"},s.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),s.a.createElement("div",{className:"signin-form"},s.a.createElement("div",{className:"signin-app-name"},s.a.createElement("span",{className:"famo-text-2"},"PDA")),s.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),s.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"password",id:"signin-password-input",className:a,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),s.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),s.a.createElement("div",{className:t},this.state.authError&&400===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_306"))),s.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},s.a.createElement("span",{className:"famo-text-5"},c("key_238"))),s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},s.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-cell-bottom"},s.a.createElement("div",{className:"signin-footer text-center"},s.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),t}(s.a.Component),ue=function(e){Object(ee.a)(t,e);var a=Object(ae.a)(t);function t(){return Object(C.a)(this,t),a.apply(this,arguments)}return Object(_.a)(t,[{key:"render",value:function(){var e=this.props,a=e.msgClass,t=e.msgText;return s.a.createElement("div",{className:a},s.a.createElement("span",{className:"famo-text-7"},t))}}]),t}(s.a.Component),fe=(Object(H.a)()(ie),t(58));t(433);function de(e){var a=e.t,t=Object(R.g)(),n=Object(R.h)(),l=M(),m=Object(i.a)(l,2),u=m[0],f=m[1],d=Object(r.useState)(!1),b=Object(i.a)(d,2),E=b[0],h=b[1];return Object(r.useEffect)((function(){fetch(g+"Authentication/Session/User",{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){te(e,f,a)})).catch((function(e){ne(f,a),w(e)}));case 3:e.next=7;break;case 5:ne(f,a),j(t);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){ne(f,a),w(e)}))}),[]),Object(r.useEffect)((function(){h("/"!==n.pathname)}),[n.pathname]),s.a.createElement("section",{className:"famo-body"},s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/",render:function(){return s.a.createElement(Y,null)}}),s.a.createElement(R.b,{path:"/Inventory",render:function(){return s.a.createElement(Q,null)}}),s.a.createElement(R.b,{path:"/Pallet",render:function(){return s.a.createElement($,null)}}),s.a.createElement(R.b,{path:"/Expedition",render:function(){return s.a.createElement(q,null)}})),s.a.createElement(y,{hide:u.authUser&&!u.loadPage}),!u.androidApp&&E&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button pda-back-button "+(u.authUser&&!u.loadPage?"":"hide"),onClick:function(e){return t.goBack()}},s.a.createElement("span",{className:"fas fa-arrow-left"})))}var pe=Object(H.a)()((function(e){return s.a.createElement(fe.a,{basename:"/"},s.a.createElement(de,e))}));function be(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",m.a.render(s.a.createElement(r.Suspense,{fallback:s.a.createElement(y,{hide:!0})},s.a.createElement(pe,null)),document.getElementById("root"))}catch(a){alert("Ouch!! Please turn on Node.js server!")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cordova?document.addEventListener("deviceready",be,!1):be()}},[[213,1,2]]]);
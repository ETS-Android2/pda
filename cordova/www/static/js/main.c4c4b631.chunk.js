(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{47:function(e,t,a){e.exports=a(75)},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(6),c=a.n(n),o=a(10),r=a(0),l=a.n(r),s=a(35),i=a.n(s),m=(a(46),a(2)),u=a(18),f=a(1),d="http://192.168.1.2:9070/",p=a(3),b=a(11),h=a(13),E=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,null,[{key:"clear",value:function(e){e?e.pallet||window.sessionStorage.removeItem("SS_PALLET"):window.sessionStorage.clear()}}]),e}(),v=a(76);var N=Object(p.h)(Object(v.a)()((function(e){var t=e.t,a=Object(r.useState)({inventory:!1,pallet:!1}),n=Object(m.a)(a,2),c=n[0],o=n[1],s=[{label:t("key_806"),key:"inventory",image:"btn-inventario.png"},{label:t("key_826"),key:"pallet",image:"btn-palete.png"}];return Object(r.useEffect)((function(){E.clear()}),[]),c.inventory?l.a.createElement(p.a,{push:!0,to:"/Inventory"}):c.pallet?l.a.createElement(p.a,{push:!0,to:"/Pallet"}):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row",style:{justifyContent:"center"}},s.map((function(e,t){return l.a.createElement("div",{key:t,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},l.a.createElement("section",{className:"famo-wrapper",onClick:function(t){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(u.a)({},e.key,!0))}))}},l.a.createElement("div",{className:"famo-content"},l.a.createElement("div",{className:"famo-grid famo-menu-item"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-menu-item-label text-center"},l.a.createElement("span",{className:"famo-text-19",title:e.label},e.label))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-menu-item-img text-center"},l.a.createElement("img",{src:d+"Images/"+e.image,alt:e.label})))))))}))))}))),y=a(4),O=a.n(y),g=a(12),j=a.n(g);function k(e){return e?e.toString().replace(new RegExp("\\"+j.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+j.a.localeData().delimiters.decimal,"g"),"."):e}function w(){return(w=Object(o.a)(c.a.mark((function e(t,a){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.current.selectionStart,o=a.current.value,110===t.keyCode&&(t.preventDefault(),a.current.value=o.substr(0,n)+j.a.localeData().delimiters.decimal+o.substr(n,o.length-1));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.numeral=j.a;var x,C=a(38),_=l.a.forwardRef((function(e,t){var a=Object(C.a)().t,n=e.className,c=e.isDisabled,o=e.isNumber,s=e.name,i=e.value,u=e.autoFocus,d=e.noData,p=e.wrongFormat,b=e.invalidValue,h=e.invalidMessage,E=e.analyze,v=e.set,N=e.children,y=Object(r.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),O=Object(m.a)(y,2),g=O[0],j=O[1],x=l.a.Children.count(N)>0;return Object(r.useEffect)((function(){if(!c&&E){var e=i;v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?o&&e&&(e=k(e),isNaN(e)?v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!0})}))):v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!0,wrongFormat:!1,invalidValue:!1})})),v((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyzeForm:!0})}))}}),[E]),Object(r.useEffect)((function(){j({noData:d,wrongFormat:p,invalidValue:b})}),[d,p,b]),l.a.createElement(l.a.Fragment,null,x?l.a.createElement("select",{className:n+(g.noData?" famo-input-error":""),name:s,ref:t,disabled:c,onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:t.current.value})}))}},N):l.a.createElement("input",{type:"text",className:n+(g.noData?" famo-input-error":g.wrongFormat||g.invalidValue?" famo-input-warning":""),name:s,value:i,ref:t,autoFocus:u,disabled:c,onKeyDown:function(e){o&&function(e,t){w.apply(this,arguments)}(e,t)},onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:t.current.value})}))}}),!x&&l.a.createElement(l.a.Fragment,null,!c&&l.a.createElement("div",{className:"famo-input-message"+(g.wrongFormat?"":" hide")},l.a.createElement("span",{className:"famo-text-15"},a("key_808"))),h&&!c&&l.a.createElement("div",{className:"famo-input-message"+(g.invalidValue?"":" hide")},l.a.createElement("span",{className:"famo-text-15"},h))))})),S=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,null,[{key:"analyze",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!0})}))}))}},{key:"areAllAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.analyzeForm}))}},{key:"areAllValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(k(e.value)):e.value}},{key:"popUpAlerts",value:function(e,t){e.some((function(e){return e.noData}))&&D.noDataAlert(t),e.some((function(e){return e.wrongFormat}))&&D.wrongFormatAlert(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),t),e.some((function(e){return e.invalidValue}))&&D.invalidValuesAlert(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),t)}},{key:"resetValues",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,analyzeForm:!1})}))}))}},{key:"resetValidations",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!1,analyzeForm:!1})}))}))}}]),e}(),D=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,null,[{key:"invalidValuesAlert",value:function(e,t){for(var a=t("key_192"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}},{key:"noDataAlert",value:function(e){alert(e("key_197"))}},{key:"wrongFormatAlert",value:function(e,t){for(var a=t("key_191"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}}]),e}(),P=_;!function(e){e[e.inventoryProduct=1]="inventoryProduct",e[e.palletBox=2]="palletBox"}(x||(x={}));var A=Object(v.a)()((function(e){var t=e.contentType,a=e.visible,n=e.setVisible,c=e.confirm,o=e.t,s=Object(r.useState)(a),i=Object(m.a)(s,2),u=i[0],f=i[1],d=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:o("key_87"),name:"productCode",value:"",ref:l.a.createRef(),noData:!1,analyze:!1,analyzeForm:!1}),p=Object(m.a)(d,2),b=p[0],h=p[1],E=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:o("key_819"),name:"boxCode",value:"",ref:l.a.createRef(),autoFocus:!0,noData:!1,analyze:!1,analyzeForm:!1}),v=Object(m.a)(E,2),N=v[0],y=v[1],O=function(){switch(t){case x.inventoryProduct:return[b];case x.palletBox:return[N]}}(),g=function(){switch(t){case x.inventoryProduct:return[h];case x.palletBox:return[y]}}();function j(){switch(t){case x.inventoryProduct:case x.palletBox:S.analyze(O,g)}}function k(e){e.preventDefault(),j()}return Object(r.useEffect)((function(){if(u)switch(t){case x.palletBox:var e=O[0];e.autoFocus&&e.ref.current.focus()}}),[u]),Object(r.useEffect)((function(){f(a),a||S.resetValues(O,g)}),[a]),Object(r.useEffect)((function(){if(S.areAllAnalyzed(O)){if(S.areAllValid(O)){switch(t){case x.inventoryProduct:case x.palletBox:c(O[0].value)}switch(t){case x.inventoryProduct:n(!1);break;case x.palletBox:var e=O[0];S.resetValues(O,g),e.autoFocus&&e.ref.current.focus()}}S.resetValidations(O,g)}}),O),l.a.createElement("section",{className:"w3-modal famo-modal"+(u?" w3-show":""),onClick:function(e){return n(!1)}},l.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},function(){switch(t){case x.inventoryProduct:case x.palletBox:return l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-content"},l.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:k},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},O[0].label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,Object.assign({},O[0],{set:g[0]})))),l.a.createElement("input",{type:"submit",className:"hide",value:""})),l.a.createElement("div",{className:"famo-grid famo-buttons"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return j()}},l.a.createElement("span",{className:"famo-text-12"},o("key_701"))),l.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return n(!1)}},l.a.createElement("span",{className:"famo-text-12"},o("key_484"))))))))}}()),l.a.createElement("div",{className:"famo-buttons"},l.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:o("key_200"),onClick:function(e){e.stopPropagation(),n(!1)}},l.a.createElement("span",{className:"fas fa-times"}))))}));var F=function(e){var t=e.text,a=Object(r.useState)(!1),n=Object(m.a)(a,2),c=n[0],o=n[1];return l.a.createElement("div",{className:"famo-title"+(c?" collapsed":"")},l.a.createElement("span",{className:"famo-text-13",onClick:function(e){o(!c)}},t))};function I(e,t){function a(e){e.preventDefault(),document.removeEventListener("backbutton",a,!1)}document.addEventListener("backbutton",a,!1),window.cordova.plugins.barcodeScanner.scan((function(t){t.cancelled||(e(t),document.removeEventListener("backbutton",a,!1))}),(function(e){alert(t("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39,CODE_128",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}function T(e){var t=e.hide;return l.a.createElement("div",{className:"pda-app-loader"+(t?" hide":"")},l.a.createElement("div",{className:"famo-loader"}))}function V(e){var t=e.hide;return l.a.createElement("div",{className:"famo-loader-wrapper"+(t?" hide":"")},l.a.createElement("div",{className:"famo-loader"}))}function R(e){var t="?timestamp="+(new Date).getTime();for(var a in e){var n=e[a];if(Array.isArray(n))for(var c=0,o=n.length;c<o;c++)t+="&"+a+"="+(null===n[c]?"":encodeURIComponent(n[c]));else t+="&"+a+"="+(null===n?"":encodeURIComponent(n))}return t}function U(e,t){var a=document.createElement("script");a.async=!0,a.src=e,a.type="text/javascript",t.current.appendChild(a)}function L(e){fetch(d+"Log/Http/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function B(e){fetch(d+"Log/Promise/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var M=a(43),z={setAndroidApp:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{androidApp:t}))},setAuthUser:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{authUser:t}))},setLoadPage:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{loadPage:t}))}},K=Object(M.a)(l.a,{androidApp:!1,authUser:null,loadPage:!1},z);var G=Object(p.h)(Object(v.a)()((function(e){var t=e.t,a=K(),n=Object(m.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:t("key_806"),name:"inventoryCode",value:"",ref:l.a.createRef()}),i=Object(m.a)(s,2),u=i[0],p=i[1],b=Object(r.useState)([]),h=Object(m.a)(b,2),v=h[0],N=h[1],y=Object(r.useState)(!1),g=Object(m.a)(y,2),j=g[0],k=g[1],w=Object(r.useState)(!1),C=Object(m.a)(w,2),_=C[0],D=C[1],T=Object(r.useState)(null),M=Object(m.a)(T,2),z=M[0],G=M[1],J=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_87"),name:"productCode",value:""}),H=Object(m.a)(J,2),q=H[0],Y=H[1],Q=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_464"),name:"productVariantCode",value:""}),W=Object(m.a)(Q,2),X=W[0],Z=W[1],$=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_138"),name:"productDescription",value:""}),ee=Object(m.a)($,2),te=ee[0],ae=ee[1],ne=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_751"),name:"locationCode",value:""}),ce=Object(m.a)(ne,2),oe=ce[0],re=ce[1],le=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!0,label:t("key_347"),name:"quantity",value:"",ref:l.a.createRef(),noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:t("key_13"),analyze:!1,analyzeForm:!1}),se=Object(m.a)(le,2),ie=se[0],me=se[1],ue=[q,X,te,oe,ie],fe=[Y,Z,ae,re,me],de=l.a.createRef();function pe(e){var a=e.split("/"),n=a[0],c="";a.length>1&&(c=a[1]),D(!0),be(),fetch(d+"ERP/Inventories/Products"+R({inventoryCode:u.value,productCode:n,productVariantCode:c}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?e.json().then((function(e){G(e),Y((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductCode})})),Z((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductVariantCode})})),ae((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductDescription})})),re((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.LocationCode})}))})).catch((function(e){B(e),alert(t("key_416"))})):(L(e),alert(e.status===O.a.NOT_FOUND?t("key_809"):t("key_303")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){D(!1)}))}function be(){G(null),S.resetValues(ue,fe)}return Object(r.useEffect)((function(){c.authUser&&fetch(d+"ERP/Inventories?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?e.json().then((function(e){N(e)})).catch((function(e){B(e),alert(t("key_416"))})):(L(e),alert(t("key_303")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){o.setLoadPage(!1)}))}),[c.authUser]),Object(r.useEffect)((function(){o.setLoadPage(!0),1===Object.keys(window.numeral.locales).length&&(U("http://www.famo-code.com/Scripts/numeral/locales/pt-pt.js?version=27",de),U("http://www.famo-code.com/Scripts/numeral/locales/es-es.js?version=27",de),U("http://www.famo-code.com/Scripts/numeral/locales/fr.js?version=27",de)),E.clear()}),[]),Object(r.useEffect)((function(){be()}),[u]),Object(r.useEffect)((function(){S.areAllAnalyzed(ue)&&(S.areAllValid(ue)?(D(!0),fetch(d+"ERP/Inventories/Products"+R({documentCode:z.Code,productCode:z.ProductCode,productVariantCode:z.ProductVariantCode,locationCode:z.LocationCode,quantity:S.getValue(ie)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?(be(),alert(t("key_805"))):(L(e),alert(t("key_302")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){D(!1)}))):S.popUpAlerts(ue,t),S.resetValidations(ue,fe))}),ue),l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"famo-wrapper",ref:de},l.a.createElement("div",{className:"famo-content"},l.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},u.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,Object.assign({},u,{isDisabled:_,set:p}),l.a.createElement("option",{key:""}),v.map((function(e,t){return l.a.createElement("option",{key:t,value:e.Code},e.Name)})))))))),(z||_)&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement(F,{text:t("key_339")}),l.a.createElement("div",{className:"famo-content"},l.a.createElement(V,{hide:!_}),l.a.createElement("form",{className:"famo-grid famo-form-grid"+(_?" hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},q.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,q))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},X.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,X))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},te.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,te))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},oe.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,oe))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},ie.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,Object.assign({},ie,{set:me}))))),l.a.createElement("div",{className:"famo-grid famo-buttons"+(_?" hide":"")},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){S.analyze(ue,fe)}},l.a.createElement("span",{className:"famo-text-12"},t("key_810")))))))),u.value&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-grid"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:_,onClick:function(e){return k(!0)}},l.a.createElement("span",{className:"famo-text-12"},t("key_807"))),c.androidApp&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:_,onClick:function(e){I((function(e){pe(e.text)}),t)}},l.a.createElement("span",{className:"famo-text-12"},t("key_681"))))))),l.a.createElement(A,{contentType:x.inventoryProduct,visible:j,setVisible:k,confirm:pe}))}))),J=a(45),H=a(41),q=a.n(H);function Y(e){var t=Object(C.a)().t,a=e.history,n=K(),c=Object(m.a)(n,1)[0],o=window.sessionStorage.getItem("SS_PALLET"),s=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:t("key_822"),name:"shipmentCode",value:o?JSON.parse(window.sessionStorage.getItem("SS_PALLET")).shipmentCode:"",ref:l.a.createRef(),autoFocus:!0}),i=Object(m.a)(s,2),u=i[0],p=i[1],b=Object(r.useState)(!1),h=Object(m.a)(b,2),v=h[0],N=h[1],y=Object(r.useState)(null),g=Object(m.a)(y,2),j=g[0],k=g[1],w=[t("key_279")];function x(e){N(!0),k(null),fetch(d+"ERP/Pallets"+R({shipmentCode:e}),{method:"GET",credentials:"include"}).then((function(a){a.ok&&a.status===O.a.OK?a.json().then((function(t){p((function(t){return Object(f.a)(Object(f.a)({},t),{},{valueSubmit:e})})),k(t)})).catch((function(e){B(e),alert(t("key_416"))})):(L(a),alert(a.status===O.a.NOT_FOUND?t("key_825"):t("key_303")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){N(!1)}))}function _(e){window.sessionStorage.setItem("SS_PALLET",JSON.stringify({shipmentCode:u.valueSubmit})),a.push("/Pallet/Edit?shipmentCode="+u.valueSubmit+(e?"&palletID="+e:""))}return Object(r.useEffect)((function(){o&&x(u.value),E.clear()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-content"},l.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),x(u.value)}},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},u.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(P,Object.assign({},u,{set:p})))),l.a.createElement("input",{type:"submit",className:"hide",value:""})),l.a.createElement("div",{className:"famo-grid famo-buttons"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},!c.androidApp&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){return p((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),void u.ref.current.focus()}},l.a.createElement("span",{className:"famo-text-12"},t("key_829"))),c.androidApp&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){I((function(e){p((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.text})})),x(e.text)}),t)}},l.a.createElement("span",{className:"famo-text-12"},t("key_681"))),l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){return x(u.value)}},l.a.createElement("span",{className:"famo-text-12"},t("key_323")))))))),(j||v)&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement(F,{text:"Paletes"}),l.a.createElement("div",{className:"famo-content"},l.a.createElement(V,{hide:!v}),l.a.createElement("div",{className:"famo-grid famo-content-grid pallets"+(v?" hide":"")},l.a.createElement("div",{className:"famo-row famo-header-row"},w.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},l.a.createElement("span",{className:"famo-text-11"},e))}))),j&&j.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-row famo-body-row",onClick:function(t){return _(e.ID)}},l.a.createElement("div",{className:"famo-cell famo-col-1"},l.a.createElement("span",{className:"famo-text-10"},e.ID)))}))))),j&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-grid"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){return _()}},l.a.createElement("span",{className:"famo-text-12"},t("key_817"))))))))}function Q(e){var t=Object(C.a)().t,a=e.location,n=e.history,c=K(),o=Object(m.a)(c,2),s=o[0],i=o[1],u=q.a.parse(a.search),b=Object(r.useState)(u.palletID),h=Object(m.a)(b,2),v=h[0],N=h[1],y=[t("key_87"),t("key_179"),""],g=Object(r.useState)(!0),j=Object(m.a)(g,2),k=j[0],w=j[1],_=Object(r.useState)(!1),S=Object(m.a)(_,2),D=S[0],P=S[1],T=Object(r.useState)([]),U=Object(m.a)(T,2),M=U[0],z=U[1],G=Object(r.useState)(!1),H=Object(m.a)(G,2),Y=H[0],Q=H[1],W=Object(r.useState)(!1),X=Object(m.a)(W,2),Z=X[0],$=X[1],ee=Object(r.useState)(!1),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],ce=Object(r.useState)(!1),oe=Object(m.a)(ce,2),re=oe[0],le=oe[1];function se(e){M.some((function(t){return t.Code===e}))?alert(t("key_814")):(Q(!0),fetch(d+"ERP/Shipments/Boxes"+R({shipmentCode:u.shipmentCode,boxCode:e}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?e.json().then((function(e){e.isNew=!0,z([].concat(Object(J.a)(M),[e]))})).catch((function(e){B(e),alert(t("key_416"))})):(L(e),e.status===O.a.NOT_FOUND?alert(t("key_824")):e.status===O.a.FORBIDDEN?alert(t("key_828")):alert(t("key_303")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){Q(!1)})))}function ie(){k&&M.some((function(e){return e.isNew}))?alert(t("key_821")):(ne(!0),fetch(d+"ERP/Pallets/"+(k?"Close":"Reopen")+R({shipmentCode:u.shipmentCode,palletID:v||""}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M.map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?(alert(t(k?"key_812":"key_813")),w(!k)):(L(e),alert(t("key_302")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){ne(!1)})))}return Object(r.useEffect)((function(){u.palletID&&(i.setLoadPage(!0),fetch(d+"ERP/Pallets/Boxes"+R({shipmentCode:u.shipmentCode,palletID:u.palletID}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?e.json().then((function(e){P(e.some((function(e){return e.IsShipped}))),w(e.some((function(e){return e.IsPalletOpen}))),e.forEach((function(e){e.isNew=!1})),z(e)})).catch((function(e){B(e),alert(t("key_416"))})):(L(e),e.status===O.a.NOT_FOUND?n.replace("/Pallet"):alert(t("key_303")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){i.setLoadPage(!1)}))),E.clear({pallet:!0})}),[]),u.shipmentCode?l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement(F,{text:t("key_820")}),l.a.createElement("div",{className:"famo-content"},l.a.createElement(V,{hide:!Z}),l.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes"+(Z?" hide":"")},l.a.createElement("div",{className:"famo-row famo-header-row"},y.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},l.a.createElement("span",{className:"famo-text-11"},e))}))),M.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-row famo-body-row"},l.a.createElement("div",{className:"famo-cell famo-col-1"},l.a.createElement("span",{className:"famo-text-10"},e.Code)),l.a.createElement("div",{className:"famo-cell famo-col-2"},l.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),l.a.createElement("div",{className:"famo-cell famo-col-3"},l.a.createElement("span",{className:"famo-text-10"},e.isNew&&l.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(t){return a=e.Code,void z(M.filter((function(e){return e.Code!==a})));var a}},l.a.createElement("span",{className:"fas fa-trash-alt"})))))}))),!D&&k&&l.a.createElement("div",{className:"famo-grid famo-buttons"+(Z?" hide":"")},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||ae,onClick:function(e){return le(!0)}},l.a.createElement("span",{className:"famo-text-12"},t("key_815")+" ("+t("key_807").toLowerCase()+")")),s.androidApp&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||ae,onClick:function(e){I((function(e){se(e.text)}),t)}},l.a.createElement("span",{className:"famo-text-12"},t("key_815")+" ("+t("key_681").toLowerCase()+")"))))))),!D&&M.length>0&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-grid"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},k?l.a.createElement(l.a.Fragment,null,M.some((function(e){return e.isNew}))&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||Z||ae,onClick:function(e){return $(!0),void fetch(d+"ERP/Pallets/Boxes"+R({shipmentCode:u.shipmentCode,palletID:v||""}),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M.filter((function(e){return e.isNew})).map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?(e.json().then((function(e){N(e.palletID)})).catch((function(e){B(e),alert(t("key_416"))})),z(M.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isNew:!1})})))):(L(e),alert(t("key_302")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){$(!1)}))}},l.a.createElement("span",{className:"famo-text-12"},t("key_220"))),l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:Y||Z||ae,onClick:function(e){return ie()}},l.a.createElement("span",{className:"fas fa-spinner fa-spin"+(ae?"":" hide")}),l.a.createElement("span",{className:"famo-text-12"+(ae?" hide":"")},t("key_200")))):l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:Y||Z||ae,onClick:function(e){return ie()}},l.a.createElement("span",{className:"fas fa-spinner fa-spin"+(ae?"":" hide")}),l.a.createElement("span",{className:"famo-text-12"+(ae?" hide":"")},t("key_827"))))))),l.a.createElement(A,{contentType:x.palletBox,visible:re,setVisible:le,confirm:se})):l.a.createElement(p.a,{to:"/Pallet"})}var W=Object(p.h)((function(){return l.a.createElement(p.d,null,l.a.createElement(p.b,{exact:!0,path:"/Pallet",render:function(e){return l.a.createElement(Y,e)}}),l.a.createElement(p.b,{exact:!0,path:"/Pallet/Edit",render:function(e){return l.a.createElement(Q,e)}}),l.a.createElement(p.b,{path:"/Pallet/*",render:function(){return l.a.createElement(p.a,{to:"/Pallet"})}}))})),X=a(31),Z=a(30);function $(e,t,a){fetch(d+"Platform/Android?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(n){n.ok&&n.status===O.a.OK?n.json().then((function(a){!function(e){switch(e){case"POR":j.a.locale("pt-pt");break;case"ENG":j.a.locale("en");break;case"ESP":j.a.locale("es-es");break;case"FRA":j.a.locale("fr")}}(e.Language.Code),t.setAndroidApp(a),t.setAuthUser(e)})).catch((function(e){B(e),alert(a("key_416"))})):(L(n),alert(a("key_303")))})).catch((function(e){B(e),alert(a("key_416"))}))}function ee(e,t){te.autoSignIn().then((function(a){a.ok&&a.status===O.a.OK?a.json().then((function(a){$(a,e,t)})).catch((function(e){B(e),alert(t("key_416"))})):(L(a),alert(t("key_306")))})).catch((function(e){B(e),alert(t("key_416"))}))}var te=function e(){Object(b.a)(this,e)};te.signIn=function(){var e=Object(o.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(d+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a}),credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),te.autoSignIn=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(d+"Authentication/AutoSignIn?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)}))),te.signOut=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(d+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));var ae=a(25),ne=a.n(ae),ce=a(42),oe=a(44),re=a(22);ce.a.use(oe.a).use(re.e).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:d+"JSON/i18n/{{lng}}.json?timestamp="+(new Date).getTime(),crossDomain:!0}});var le=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).usernameRef=void 0,n.hideInputMsg=function(e){return"signin-error-input"+(e?" hide":"")},n.handleChangeInput=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.handleUserInput=function(e){e.target.value||n.setState({hideUserMsg:"blur"!==e.type})},n.handlePwdInput=function(e){e.target.value||n.setState({hidePwdMsg:"blur"!==e.type})},n.handleSubmit=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,o,r,l,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=K(),o=Object(m.a)(a,2),r=o[1],n.state.username&&n.state.password){e.next=6;break}n.setState({hideUserMsg:!!n.state.username,hidePwdMsg:!!n.state.password}),e.next=24;break;case 6:return e.next=8,te.signIn(n.state.username,n.state.password);case 8:if(l=e.sent,s=n.props.t,n.setState({authError:!1,authHttpCode:-1}),!l.ok){e.next=20;break}return n.setState({authSuccess:!0}),e.t0=r,e.next=16,l.json();case 16:e.t1=e.sent,e.t0.setAuthUser.call(e.t0,e.t1),e.next=24;break;case 20:400!==(i=l.status)&&500!==i&&console.log(s("key_416")+" - "+i),n.usernameRef.current.focus(),n.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:i});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},n.usernameRef=l.a.createRef(),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=ne()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),t=ne()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),a=ne()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,o=n.location;return this.state.authSuccess?l.a.createElement(p.a,{to:o.state||{from:{pathname:"/"}}}):l.a.createElement("section",{className:"famo-grid signin"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell"},l.a.createElement("div",{className:"signin-body"},l.a.createElement("div",{className:"signin-famo-logo"},l.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),l.a.createElement("div",{className:"signin-form"},l.a.createElement("div",{className:"signin-app-name"},l.a.createElement("span",{className:"famo-text-2"},"PDA")),l.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"signin-input-wrapper"},l.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),l.a.createElement(se,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),l.a.createElement("div",{className:"signin-input-wrapper"},l.a.createElement("input",{type:"password",id:"signin-password-input",className:t,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),l.a.createElement(se,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),l.a.createElement("div",{className:a},this.state.authError&&400===this.state.authHttpCode&&l.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&l.a.createElement("span",{className:"famo-text-7"},c("key_306"))),l.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},l.a.createElement("span",{className:"famo-text-5"},c("key_238"))),l.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},l.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-cell-bottom"},l.a.createElement("div",{className:"signin-footer text-center"},l.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),a}(l.a.Component),se=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.msgClass,a=e.msgText;return l.a.createElement("div",{className:t},l.a.createElement("span",{className:"famo-text-7"},a))}}]),a}(l.a.Component),ie=(Object(v.a)()(le),a(17));a(74);function me(e){var t=e.t,a=Object(p.g)(),n=K(),c=Object(m.a)(n,2),o=c[0],s=c[1],i=Object(r.useState)(!1),u=Object(m.a)(i,2),f=u[0],b=u[1];return Object(r.useEffect)((function(){fetch(d+"Authentication/Session/User",{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===O.a.OK?e.json().then((function(e){$(e,s,t)})).catch((function(e){ee(s,t),B(e)})):(ee(s,t),L(e))})).catch((function(e){ee(s,t),B(e)}))}),[]),Object(r.useEffect)((function(){b("/"!==a.location.pathname)}),[a.location.pathname]),l.a.createElement("section",{className:"famo-body"},l.a.createElement(p.d,null,l.a.createElement(p.b,{exact:!0,path:"/",render:function(){return l.a.createElement(N,null)}}),l.a.createElement(p.b,{path:"/Inventory",render:function(){return l.a.createElement(G,null)}}),l.a.createElement(p.b,{path:"/Pallet",render:function(){return l.a.createElement(W,null)}})),l.a.createElement(T,{hide:o.authUser&&!o.loadPage}),!o.androidApp&&f&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button pda-back-button"+(o.authUser&&!o.loadPage?"":" hide"),onClick:function(e){return a.goBack()}},l.a.createElement("span",{className:"fas fa-arrow-left"})))}var ue=Object(v.a)()((function(e){return l.a.createElement(ie.a,{basename:"/"},l.a.createElement(me,e))}));function fe(){return de.apply(this,arguments)}function de(){return(de=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",i.a.render(l.a.createElement(r.Suspense,{fallback:l.a.createElement(T,{hide:!0})},l.a.createElement(ue,null)),document.getElementById("root"))}catch(t){alert("Oops!! Liga o servidor Node.js!")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cordova?document.addEventListener("deviceready",fe,!1):fe()}},[[47,1,2]]]);
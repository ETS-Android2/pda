(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{47:function(e,a,t){e.exports=t(75)},74:function(e,a,t){},75:function(e,a,t){"use strict";t.r(a);var n=t(6),c=t.n(n),o=t(10),l=t(0),r=t.n(l),s=t(37),m=t.n(s),i=(t(46),t(2)),u=t(22),f=t(1),d=t(3),p=t.n(d),b=t(25),E=t.n(b);var h=function(e){var a=e.text,t=Object(l.useState)(!1),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",{className:"famo-title"+(c?" collapsed":"")},r.a.createElement("span",{className:"famo-text-13",onClick:function(e){o(!c)}},a))};function v(e){var a=e.hide;return r.a.createElement("div",{className:"pda-app-loader"+(a?" hide":"")},r.a.createElement("div",{className:"famo-loader"}))}function N(e){var a=e.hide;return r.a.createElement("div",{className:"famo-loader-wrapper"+(a?" hide":"")},r.a.createElement("div",{className:"famo-loader"}))}function y(e){var a="?timestamp="+(new Date).getTime();for(var t in e){var n=e[t];if(Array.isArray(n))for(var c=0,o=n.length;c<o;c++)a+="&"+t+"="+(null===n[c]?"":encodeURIComponent(n[c]));else a+="&"+t+"="+(null===n?"":encodeURIComponent(n))}return a}function O(e,a){var t=document.createElement("script");t.async=!0,t.src=e,t.type="text/javascript",a.current.appendChild(t)}var g="http://192.168.3.108:9070/";function k(e){fetch(g+"Log/Http/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function j(e){fetch(g+"Log/Promise/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var w=t(11),x=t(14),C=t(12),_=t.n(C);function S(e){return e?e.toString().replace(new RegExp("\\"+_.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+_.a.localeData().delimiters.decimal,"g"),"."):e}function P(){return(P=Object(o.a)(c.a.mark((function e(a,t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.current.selectionStart,o=t.current.value,110===a.keyCode&&(a.preventDefault(),t.current.value=o.substr(0,n)+_.a.localeData().delimiters.decimal+o.substr(n,o.length-1));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.numeral=_.a;var D=t(38),A=r.a.forwardRef((function(e,a){var t=Object(D.a)().t,n=e.className,c=e.isDisabled,o=e.isNumber,s=e.name,m=e.value,u=e.autoFocus,d=e.noData,p=e.wrongFormat,b=e.invalidValue,E=e.invalidMessage,h=e.analyze,v=e.set,N=e.children,y=Object(l.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),O=Object(i.a)(y,2),g=O[0],k=O[1],j=r.a.Children.count(N)>0;return Object(l.useEffect)((function(){if(!c&&h){var e=m;v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?o&&e&&(e=S(e),isNaN(e)?v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!0})}))):v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!0,wrongFormat:!1,invalidValue:!1})})),v((function(e){return Object(f.a)(Object(f.a)({},e),{},{localAnalyze:!0})}))}}),[h]),Object(l.useEffect)((function(){k({noData:d,wrongFormat:p,invalidValue:b})}),[d,p,b]),r.a.createElement(r.a.Fragment,null,j?r.a.createElement("select",{className:n+(g.noData?" famo-input-error":""),name:s,ref:a,disabled:c,onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:a.current.value})}))}},N):r.a.createElement("input",{type:"text",className:n+(g.noData?" famo-input-error":g.wrongFormat||g.invalidValue?" famo-input-warning":""),name:s,value:m,ref:a,autoFocus:u,disabled:c,onKeyDown:function(e){o&&function(e,a){P.apply(this,arguments)}(e,a)},onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:a.current.value})}))}}),!j&&r.a.createElement(r.a.Fragment,null,!c&&r.a.createElement("div",{className:"famo-input-message"+(g.wrongFormat?"":" hide")},r.a.createElement("span",{className:"famo-text-15"},t("key_808"))),E&&!c&&r.a.createElement("div",{className:"famo-input-message"+(g.invalidValue?"":" hide")},r.a.createElement("span",{className:"famo-text-15"},E))))})),F=function(){function e(){Object(w.a)(this,e)}return Object(x.a)(e,null,[{key:"analyze",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!0})}))}))}},{key:"areAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.localAnalyze}))}},{key:"areValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(S(e.value)):e.value}},{key:"popUpAlerts",value:function(e,a){e.some((function(e){return e.noData}))&&T.noData(a),e.some((function(e){return e.wrongFormat}))&&T.wrongFormat(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),a),e.some((function(e){return e.invalidValue}))&&T.invalidValue(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),a)}},{key:"resetValidations",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!1,localAnalyze:!1})}))}))}},{key:"resetValues",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,selfAnalyze:!1})}))}))}}]),e}(),T=function(){function e(){Object(w.a)(this,e)}return Object(x.a)(e,null,[{key:"invalidValue",value:function(e,a){for(var t=a("key_192"),n=0,c=e.length;n<c;n++)t+=e[n],n<c-2?t+=", ":n===c-2&&(t+=" "+a("key_573")+" ");alert(t)}},{key:"noData",value:function(e){alert(e("key_197"))}},{key:"wrongFormat",value:function(e,a){for(var t=a("key_191"),n=0,c=e.length;n<c;n++)t+=e[n],n<c-2?t+=", ":n===c-2&&(t+=" "+a("key_573")+" ");alert(t)}}]),e}(),I=A,V=t(4),R=function(){function e(){Object(w.a)(this,e)}return Object(x.a)(e,null,[{key:"clear",value:function(e){e?e.pallet||window.sessionStorage.removeItem("SS_PALLET"):window.sessionStorage.clear()}}]),e}(),L=t(44),B={setAndroidApp:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{androidApp:a}))},setAuthUser:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{authUser:a}))},setLoadPage:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{loadPage:a}))}},U=Object(L.a)(r.a,{androidApp:!1,authUser:null,loadPage:!1},B);function z(e){var a=Object(D.a)().t,t=e.history,n=U(),c=Object(i.a)(n,2)[1],o=[a("key_87"),a("key_138"),a("key_820")],s=Object(l.useState)([]),m=Object(i.a)(s,2),u=m[0],f=m[1];return Object(l.useEffect)((function(){c.setLoadPage(!0),fetch(g+"ERP/Shipments"+y({}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){f(e)})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),alert(a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){c.setLoadPage(!1)})),R.clear()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement(h,{text:"Mapas de carga"}),r.a.createElement("div",{className:"famo-content"},r.a.createElement("div",{className:"famo-grid famo-content-grid shipments"},r.a.createElement("div",{className:"famo-row famo-header-row"},o.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},r.a.createElement("span",{className:"famo-text-11"},e))}))),u&&u.map((function(e,n){return r.a.createElement("div",{key:n,className:"famo-row famo-body-row",onClick:function(a){return n=e.Code,void t.push("/Expedition/Edit?shipmentCode="+n);var n}},r.a.createElement("div",{className:"famo-cell famo-col-1"},r.a.createElement("span",{className:"famo-text-10"},e.Code)),r.a.createElement("div",{className:"famo-cell famo-col-2"},r.a.createElement("span",{className:"famo-text-10 "+(e.Description?"":"famo-color-yellow")},e.Description?e.Description:a("key_237"))),r.a.createElement("div",{className:"famo-cell famo-col-3"},r.a.createElement("span",{className:"famo-text-10"},e.PickedBoxes+"/"+e.TotalBoxes)))}))))))}function M(e){var a=Object(D.a)().t,t=e.location,n=U(),c=Object(i.a)(n,2),o=c[0],s=c[1],m=E.a.parse(t.search),d=m.shipmentCode,b=Object(l.useState)({ref:r.a.createRef(),label:a("key_819"),className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),h=Object(i.a)(b,2),v=h[0],O=h[1],w=Object(l.useState)(!1),x=Object(i.a)(w,2),C=x[0],_=x[1],S=Object(l.useState)([]),P=Object(i.a)(S,2),A=P[0],F=P[1],T=[a("key_179"),a("key_54"),a("key_138"),"Box's"],V=[a("key_819"),""],L=Object(l.useState)([]),B=Object(i.a)(L,2),z=B[0],M=B[1];function K(){if(v.value.startsWith("PL")){var e=v.value.match(/(?<=PL).*(?=\/)/g);_(!0),fetch(g+"ERP/Pallets/Boxes"+y({shipmentCode:m.shipmentCode,palletID:e?parseInt(e[0]):-1}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){e.forEach((function(e){A.some((function(a){return a.Code!==e.Code}))&&F([e].concat(Object(u.a)(A)))}))})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),e.status===p.a.NOT_FOUND?alert("A palete n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio."):alert(a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){_(!1)}))}else A.some((function(e){return e.Code===v.value}))?alert("A embalagem j\xe1 est\xe1 pronta a carregar."):(_(!0),fetch(g+"ERP/Shipments/Boxes"+y({shipmentCode:m.shipmentCode,boxCode:v.value}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){F([e].concat(Object(u.a)(A)))})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),e.status===p.a.NOT_FOUND?alert("A embalagem\xa0n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio."):e.status===p.a.FORBIDDEN?alert(a("key_828")):alert(a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){_(!1)})))}return Object(l.useEffect)((function(){s.setLoadPage(!0),fetch(g+"ERP/Shipments/Products"+y({shipmentCode:d}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){M(e)})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),alert(a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){s.setLoadPage(!1)})),R.clear()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-content"},r.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),K()}},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},a("key_819"))),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,Object.assign({},v,{set:O})))),r.a.createElement("input",{type:"submit",className:"hide",value:""})),r.a.createElement("div",{className:"famo-grid famo-buttons"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},!o.androidApp&&r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:C,onClick:function(e){return O((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),void v.ref.current.focus()}},r.a.createElement("span",{className:"famo-text-12"},a("key_829"))),r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:C,onClick:function(e){return K()}},r.a.createElement("span",{className:"famo-text-12"},a("key_815")))))))),r.a.createElement("section",{className:"container famo-wrapper expedition-details"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-xl-5"},r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-title"},r.a.createElement("span",{className:"famo-text-13"},"Em falta")),r.a.createElement("div",{className:"famo-content"},r.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products"},r.a.createElement("div",{className:"famo-row famo-header-row"},T.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},r.a.createElement("span",{className:"famo-text-11"},e))}))),z.filter((function(e){return 0===e.Status})).map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-row famo-body-row"},r.a.createElement("div",{className:"famo-cell famo-col-1"},r.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),r.a.createElement("div",{className:"famo-cell famo-col-2"},r.a.createElement("span",{className:"famo-text-10"},e.ProductCode)),r.a.createElement("div",{className:"famo-cell famo-col-3"},r.a.createElement("span",{className:"famo-text-10"},e.ProductDescription)),r.a.createElement("div",{className:"famo-cell famo-col-4"},r.a.createElement("span",{className:"famo-text-10"},e.BoxesNum)))})))))),r.a.createElement("div",{className:"col-12 col-xl-2"},r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-title"},r.a.createElement("span",{className:"famo-text-13"},"Pronto p/carregar")),r.a.createElement("div",{className:"famo-content"},r.a.createElement(N,{hide:!C}),r.a.createElement("div",{className:"famo-grid famo-content-grid expedition-boxes"+(C?" hide":"")},r.a.createElement("div",{className:"famo-row famo-header-row"},V.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},r.a.createElement("span",{className:"famo-text-11"},e))}))),A.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-row famo-body-row"},r.a.createElement("div",{className:"famo-cell famo-col-1"},r.a.createElement("span",{className:"famo-text-10"},e.Code)),r.a.createElement("div",{className:"famo-cell famo-col-2"},r.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return t=e.Code,void(window.confirm("Tem a certeza que pretende eliminar a embalagem?")&&F(A.filter((function(e){return e.Code!==t}))));var t}},r.a.createElement("span",{className:"fas fa-trash-alt"}))))})))))),r.a.createElement("div",{className:"col-12 col-xl-5"},r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-title"},r.a.createElement("span",{className:"famo-text-13"},"Carregado")),r.a.createElement("div",{className:"famo-content"},r.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products"},r.a.createElement("div",{className:"famo-row famo-header-row"},T.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},r.a.createElement("span",{className:"famo-text-11"},e))}))),z.filter((function(e){return 1===e.Status})).map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-row famo-body-row"},r.a.createElement("div",{className:"famo-cell famo-col-1"},r.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),r.a.createElement("div",{className:"famo-cell famo-col-2"},r.a.createElement("span",{className:"famo-text-10"},e.ProductCode)),r.a.createElement("div",{className:"famo-cell famo-col-3"},r.a.createElement("span",{className:"famo-text-10"},e.ProductDescription)),r.a.createElement("div",{className:"famo-cell famo-col-4"},r.a.createElement("span",{className:"famo-text-10"},e.BoxesNum)))})))))))))}var K=Object(V.h)((function(){return r.a.createElement(V.d,null,r.a.createElement(V.b,{exact:!0,path:"/Expedition",render:function(e){return r.a.createElement(z,e)}}),r.a.createElement(V.b,{exact:!0,path:"/Expedition/Edit",render:function(e){return r.a.createElement(M,e)}}),r.a.createElement(V.b,{path:"/Expedition/*",render:function(){return r.a.createElement(V.a,{to:"/Expedition"})}}))})),G=t(18),J=t(76);var q,H=Object(V.h)(Object(J.a)()((function(e){var a=e.t,t=Object(l.useState)({inventory:!1,pallet:!1,expedition:!1}),n=Object(i.a)(t,2),c=n[0],o=n[1],s=[{label:a("key_806"),key:"inventory",image:"btn-inventario.png"},{label:a("key_826"),key:"pallet",image:"btn-palete.png"},{label:"Expedi\xe7\xe3o",key:"expedition",image:"btn-expedicao.png"}];return Object(l.useEffect)((function(){R.clear()}),[]),c.inventory?r.a.createElement(V.a,{push:!0,to:"/Inventory"}):c.pallet?r.a.createElement(V.a,{push:!0,to:"/Pallet"}):c.expedition?r.a.createElement(V.a,{push:!0,to:"/Expedition"}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row",style:{justifyContent:"center"}},s.map((function(e,a){return r.a.createElement("div",{key:a,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},r.a.createElement("section",{className:"famo-wrapper",onClick:function(a){return o((function(a){return Object(f.a)(Object(f.a)({},a),{},Object(G.a)({},e.key,!0))}))}},r.a.createElement("div",{className:"famo-content"},r.a.createElement("div",{className:"famo-grid famo-menu-item"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-menu-item-label text-center"},r.a.createElement("span",{className:"famo-text-19",title:e.label},e.label))),r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-menu-item-img text-center"},r.a.createElement("img",{src:g+"Images/"+e.image,alt:e.label})))))))}))))})));!function(e){e[e.inventoryProduct=1]="inventoryProduct",e[e.palletBox=2]="palletBox"}(q||(q={}));var Y=Object(J.a)()((function(e){var a=e.contentType,t=e.visible,n=e.setVisible,c=e.confirm,o=e.t,s=Object(l.useState)(t),m=Object(i.a)(s,2),u=m[0],f=m[1],d=Object(l.useState)({ref:r.a.createRef(),label:o("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),p=Object(i.a)(d,2),b=p[0],E=p[1],h=Object(l.useState)({ref:r.a.createRef(),label:o("key_819"),className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),v=Object(i.a)(h,2),N=v[0],y=v[1],O=function(){switch(a){case q.inventoryProduct:return[b];case q.palletBox:return[N]}}(),g=function(){switch(a){case q.inventoryProduct:return[E];case q.palletBox:return[y]}}();function k(){switch(a){case q.inventoryProduct:case q.palletBox:F.analyze(O,g)}}function j(e){e.preventDefault(),k()}return Object(l.useEffect)((function(){if(u)switch(a){case q.palletBox:var e=O[0];e.autoFocus&&e.ref.current.focus()}}),[u]),Object(l.useEffect)((function(){f(t),t||F.resetValues(O,g)}),[t]),Object(l.useEffect)((function(){if(F.areAnalyzed(O)){if(F.areValid(O)){switch(a){case q.inventoryProduct:case q.palletBox:c(O[0].value)}switch(a){case q.inventoryProduct:n(!1);break;case q.palletBox:var e=O[0];F.resetValues(O,g),e.autoFocus&&e.ref.current.focus()}}F.resetValidations(O,g)}}),O),r.a.createElement("section",{className:"w3-modal famo-modal"+(u?" w3-show":""),onClick:function(e){return n(!1)}},r.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},function(){switch(a){case q.inventoryProduct:case q.palletBox:return r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-content"},r.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:j},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},O[0].label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,Object.assign({},O[0],{set:g[0]})))),r.a.createElement("input",{type:"submit",className:"hide",value:""})),r.a.createElement("div",{className:"famo-grid famo-buttons"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},r.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return k()}},r.a.createElement("span",{className:"famo-text-12"},o("key_701"))),r.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return n(!1)}},r.a.createElement("span",{className:"famo-text-12"},o("key_484"))))))))}}()),r.a.createElement("div",{className:"famo-buttons"},r.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:o("key_200"),onClick:function(e){e.stopPropagation(),n(!1)}},r.a.createElement("span",{className:"fas fa-times"}))))}));function W(e,a){function t(e){e.preventDefault(),document.removeEventListener("backbutton",t,!1)}document.addEventListener("backbutton",t,!1),window.cordova.plugins.barcodeScanner.scan((function(a){a.cancelled||(e(a),document.removeEventListener("backbutton",t,!1))}),(function(e){alert(a("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39,CODE_128",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}var Q=Object(V.h)(Object(J.a)()((function(e){var a=e.t,t=U(),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(l.useState)({ref:r.a.createRef(),label:a("key_806"),className:"famo-input famo-text-10",name:"inventoryCode",value:"",isNumber:!1,isDisabled:!1}),m=Object(i.a)(s,2),u=m[0],d=m[1],b=Object(l.useState)([]),E=Object(i.a)(b,2),v=E[0],w=E[1],x=Object(l.useState)(!1),C=Object(i.a)(x,2),_=C[0],S=C[1],P=Object(l.useState)(!1),D=Object(i.a)(P,2),A=D[0],T=D[1],V=Object(l.useState)(null),L=Object(i.a)(V,2),B=L[0],z=L[1],M=Object(l.useState)({label:a("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!0}),K=Object(i.a)(M,2),G=K[0],J=K[1],H=Object(l.useState)({label:a("key_464"),className:"famo-input famo-text-10",name:"productVariantCode",value:"",isNumber:!1,isDisabled:!0}),Q=Object(i.a)(H,2),X=Q[0],Z=Q[1],$=Object(l.useState)({label:a("key_138"),className:"famo-input famo-text-10",name:"productDescription",value:"",isNumber:!1,isDisabled:!0}),ee=Object(i.a)($,2),ae=ee[0],te=ee[1],ne=Object(l.useState)({label:a("key_751"),className:"famo-input famo-text-10",name:"locationCode",value:"",isNumber:!1,isDisabled:!0}),ce=Object(i.a)(ne,2),oe=ce[0],le=ce[1],re=Object(l.useState)({ref:r.a.createRef(),label:a("key_347"),className:"famo-input famo-text-10",name:"quantity",value:"",isNumber:!0,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:a("key_13")}),se=Object(i.a)(re,2),me=se[0],ie=se[1],ue=[G,X,ae,oe,me],fe=[J,Z,te,le,ie],de=r.a.createRef();function pe(e){var t=e.split("/"),n=t[0],c="";t.length>1&&(c=t[1]),T(!0),be(),fetch(g+"ERP/Inventories/Products"+y({inventoryCode:u.value,productCode:n,productVariantCode:c}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){z(e),J((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductCode})})),Z((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductVariantCode})})),te((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductDescription})})),le((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.LocationCode})}))})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),alert(e.status===p.a.NOT_FOUND?a("key_809"):a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){T(!1)}))}function be(){z(null),F.resetValues(ue,fe)}return Object(l.useEffect)((function(){o.setLoadPage(!0),1===Object.keys(window.numeral.locales).length&&(O("http://www.famo-code.com/Scripts/numeral/locales/pt-pt.js?version=27",de),O("http://www.famo-code.com/Scripts/numeral/locales/es-es.js?version=27",de),O("http://www.famo-code.com/Scripts/numeral/locales/fr.js?version=27",de)),fetch(g+"ERP/Inventories"+y({}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){w(e)})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),alert(a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){o.setLoadPage(!1)})),R.clear()}),[]),Object(l.useEffect)((function(){be()}),[u]),Object(l.useEffect)((function(){F.areAnalyzed(ue)&&(F.areValid(ue)?(T(!0),fetch(g+"ERP/Inventories/Products"+y({documentCode:B.Code,productCode:B.ProductCode,productVariantCode:B.ProductVariantCode,locationCode:B.LocationCode,quantity:F.getValue(me)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(be(),alert(a("key_805"))):(k(e),alert(a("key_302")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){T(!1)}))):F.popUpAlerts(ue,a),F.resetValidations(ue,fe))}),ue),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"famo-wrapper",ref:de},r.a.createElement("div",{className:"famo-content"},r.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},u.label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,Object.assign({},u,{isDisabled:A,set:d}),r.a.createElement("option",{key:""}),v.map((function(e,a){return r.a.createElement("option",{key:a,value:e.Code},e.Name)})))))))),(B||A)&&r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement(h,{text:a("key_339")}),r.a.createElement("div",{className:"famo-content"},r.a.createElement(N,{hide:!A}),r.a.createElement("form",{className:"famo-grid famo-form-grid"+(A?" hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},G.label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,G))),r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},X.label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,X))),r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},ae.label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,ae))),r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},oe.label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,oe))),r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},me.label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,Object.assign({},me,{set:ie}))))),r.a.createElement("div",{className:"famo-grid famo-buttons"+(A?" hide":"")},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},r.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){F.analyze(ue,fe)}},r.a.createElement("span",{className:"famo-text-12"},a("key_810")))))))),u.value&&r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-grid"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:A,onClick:function(e){return S(!0)}},r.a.createElement("span",{className:"famo-text-12"},a("key_807"))),c.androidApp&&r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:A,onClick:function(e){W((function(e){pe(e.text)}),a)}},r.a.createElement("span",{className:"famo-text-12"},a("key_681"))))))),r.a.createElement(Y,{contentType:q.inventoryProduct,visible:_,setVisible:S,confirm:pe}))})));function X(e){var a=Object(D.a)().t,t=e.history,n=U(),c=Object(i.a)(n,1)[0],o=window.sessionStorage.getItem("SS_PALLET"),s=Object(l.useState)({ref:r.a.createRef(),label:a("key_822"),className:"famo-input famo-text-10",name:"shipmentCode",value:o?JSON.parse(window.sessionStorage.getItem("SS_PALLET")).shipmentCode:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),m=Object(i.a)(s,2),u=m[0],d=m[1],b=Object(l.useState)(!1),E=Object(i.a)(b,2),v=E[0],O=E[1],w=Object(l.useState)(null),x=Object(i.a)(w,2),C=x[0],_=x[1],S=[a("key_279")];function P(e){O(!0),_(null),fetch(g+"ERP/Pallets"+y({shipmentCode:e}),{method:"GET",credentials:"include"}).then((function(t){t.ok&&t.status===p.a.OK?t.json().then((function(a){d((function(a){return Object(f.a)(Object(f.a)({},a),{},{valueSubmitted:e})})),_(a)})).catch((function(e){j(e),alert(a("key_416"))})):(k(t),alert(t.status===p.a.NOT_FOUND?a("key_825"):a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){O(!1)}))}function A(e){window.sessionStorage.setItem("SS_PALLET",JSON.stringify({shipmentCode:u.valueSubmitted})),t.push("/Pallet/Edit?shipmentCode="+u.valueSubmitted+(e?"&palletID="+e:""))}return Object(l.useEffect)((function(){o&&P(u.value),R.clear()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-content"},r.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),P(u.value)}},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-input-label"},r.a.createElement("span",{className:"famo-text-11"},u.label)),r.a.createElement("div",{className:"famo-cell"},r.a.createElement(I,Object.assign({},u,{set:d})))),r.a.createElement("input",{type:"submit",className:"hide",value:""})),r.a.createElement("div",{className:"famo-grid famo-buttons"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},!c.androidApp&&r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){return d((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),void u.ref.current.focus()}},r.a.createElement("span",{className:"famo-text-12"},a("key_829"))),c.androidApp&&r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){W((function(e){d((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.text})})),P(e.text)}),a)}},r.a.createElement("span",{className:"famo-text-12"},a("key_681"))),r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){return P(u.value)}},r.a.createElement("span",{className:"famo-text-12"},a("key_323")))))))),(C||v)&&r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement(h,{text:a("key_826")}),r.a.createElement("div",{className:"famo-content"},r.a.createElement(N,{hide:!v}),r.a.createElement("div",{className:"famo-grid famo-content-grid pallets"+(v?" hide":"")},r.a.createElement("div",{className:"famo-row famo-header-row"},S.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},r.a.createElement("span",{className:"famo-text-11"},e))}))),C&&C.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-row famo-body-row",onClick:function(a){return A(e.ID)}},r.a.createElement("div",{className:"famo-cell famo-col-1"},r.a.createElement("span",{className:"famo-text-10"},e.ID)))}))))),C&&r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-grid"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:v,onClick:function(e){return A()}},r.a.createElement("span",{className:"famo-text-12"},a("key_817"))))))))}function Z(e){var a=Object(D.a)().t,t=e.location,n=e.history,c=U(),o=Object(i.a)(c,2),s=o[0],m=o[1],d=E.a.parse(t.search),b=Object(l.useState)(d.palletID),v=Object(i.a)(b,2),O=v[0],w=v[1],x=[a("key_87"),a("key_179"),""],C=Object(l.useState)(!0),_=Object(i.a)(C,2),S=_[0],P=_[1],A=Object(l.useState)(!1),F=Object(i.a)(A,2),T=F[0],I=F[1],L=Object(l.useState)([]),B=Object(i.a)(L,2),z=B[0],M=B[1],K=Object(l.useState)(!1),G=Object(i.a)(K,2),J=G[0],H=G[1],Q=Object(l.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(l.useState)(!1),ae=Object(i.a)(ee,2),te=ae[0],ne=ae[1],ce=Object(l.useState)(!1),oe=Object(i.a)(ce,2),le=oe[0],re=oe[1];function se(e){z.some((function(a){return a.Code===e}))?alert(a("key_814")):(H(!0),fetch(g+"ERP/Shipments/Boxes"+y({shipmentCode:d.shipmentCode,boxCode:e}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){e.isNew=!0,M([].concat(Object(u.a)(z),[e]))})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),e.status===p.a.NOT_FOUND?alert("A embalagem\xa0n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio."):e.status===p.a.FORBIDDEN?alert(a("key_828")):alert(a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){H(!1)})))}function me(){S&&z.some((function(e){return e.isNew}))?alert(a("key_821")):(ne(!0),fetch(g+"ERP/Pallets/"+(S?"Close":"Reopen")+y({shipmentCode:d.shipmentCode,palletID:O||""}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z.map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(alert(a(S?"key_812":"key_813")),P(!S)):(k(e),alert(a("key_302")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){ne(!1)})))}return Object(l.useEffect)((function(){d.palletID&&(m.setLoadPage(!0),fetch(g+"ERP/Pallets/Boxes"+y({shipmentCode:d.shipmentCode,palletID:d.palletID}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){I(e.some((function(e){return e.IsShipped}))),P(e.some((function(e){return e.IsPalletOpen}))),e.forEach((function(e){e.isNew=!1})),M(e)})).catch((function(e){j(e),alert(a("key_416"))})):(k(e),e.status===p.a.NOT_FOUND?n.replace("/Pallet"):alert(a("key_303")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){m.setLoadPage(!1)}))),R.clear({pallet:!0})}),[]),d.shipmentCode?r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement(h,{text:a("key_820")}),r.a.createElement("div",{className:"famo-content"},r.a.createElement(N,{hide:!Z}),r.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes"+(Z?" hide":"")},r.a.createElement("div",{className:"famo-row famo-header-row"},x.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},r.a.createElement("span",{className:"famo-text-11"},e))}))),z.map((function(e,a){return r.a.createElement("div",{key:a,className:"famo-row famo-body-row"},r.a.createElement("div",{className:"famo-cell famo-col-1"},r.a.createElement("span",{className:"famo-text-10"},e.Code)),r.a.createElement("div",{className:"famo-cell famo-col-2"},r.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),r.a.createElement("div",{className:"famo-cell famo-col-3"},r.a.createElement("span",{className:"famo-text-10"},e.isNew&&r.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return t=e.Code,void(window.confirm("Tem a certeza que pretende eliminar a embalagem?")&&M(z.filter((function(e){return e.Code!==t}))));var t}},r.a.createElement("span",{className:"fas fa-trash-alt"})))))}))),!T&&S&&r.a.createElement("div",{className:"famo-grid famo-buttons"+(Z?" hide":"")},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:J||te,onClick:function(e){return re(!0)}},r.a.createElement("span",{className:"famo-text-12"},a("key_815")+" ("+a("key_807").toLowerCase()+")")),s.androidApp&&r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:J||te,onClick:function(e){W((function(e){se(e.text)}),a)}},r.a.createElement("span",{className:"famo-text-12"},a("key_815")+" ("+a("key_681").toLowerCase()+")"))))))),!T&&z.length>0&&r.a.createElement("section",{className:"famo-wrapper"},r.a.createElement("div",{className:"famo-grid"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell text-right"},S?r.a.createElement(r.a.Fragment,null,z.some((function(e){return e.isNew}))&&r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:J||Z||te,onClick:function(e){return $(!0),void fetch(g+"ERP/Pallets/Boxes"+y({shipmentCode:d.shipmentCode,palletID:O||""}),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(z.filter((function(e){return e.isNew})).map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(e.json().then((function(e){w(e.palletID)})).catch((function(e){j(e),alert(a("key_416"))})),M(z.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isNew:!1})})))):(k(e),alert(a("key_302")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){$(!1)}))}},r.a.createElement("span",{className:"famo-text-12"},a("key_220"))),r.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:J||Z||te,onClick:function(e){return me()}},r.a.createElement("span",{className:"fas fa-spinner fa-spin"+(te?"":" hide")}),r.a.createElement("span",{className:"famo-text-12"+(te?" hide":"")},a("key_200")))):r.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:J||Z||te,onClick:function(e){return me()}},r.a.createElement("span",{className:"fas fa-spinner fa-spin"+(te?"":" hide")}),r.a.createElement("span",{className:"famo-text-12"+(te?" hide":"")},a("key_827"))))))),r.a.createElement(Y,{contentType:q.palletBox,visible:le,setVisible:re,confirm:se})):r.a.createElement(V.a,{to:"/Pallet"})}var $=Object(V.h)((function(){return r.a.createElement(V.d,null,r.a.createElement(V.b,{exact:!0,path:"/Pallet",render:function(e){return r.a.createElement(X,e)}}),r.a.createElement(V.b,{exact:!0,path:"/Pallet/Edit",render:function(e){return r.a.createElement(Z,e)}}),r.a.createElement(V.b,{path:"/Pallet/*",render:function(){return r.a.createElement(V.a,{to:"/Pallet"})}}))})),ee=t(33),ae=t(32);function te(e,a,t){fetch(g+"Platform/Android"+y({}),{method:"GET",credentials:"include"}).then((function(n){n.ok&&n.status===p.a.OK?n.json().then((function(t){!function(e){switch(e){case"POR":_.a.locale("pt-pt");break;case"ENG":_.a.locale("en");break;case"ESP":_.a.locale("es-es");break;case"FRA":_.a.locale("fr")}}(e.Language.Code),a.setAndroidApp(t),a.setAuthUser(e)})).catch((function(e){j(e),alert(t("key_416"))})):(k(n),alert(t("key_303")))})).catch((function(e){j(e),alert(t("key_416"))}))}function ne(e,a){ce.autoSignIn().then((function(t){t.ok&&t.status===p.a.OK?t.json().then((function(t){te(t,e,a)})).catch((function(e){j(e),alert(a("key_416"))})):(k(t),alert(a("key_306")))})).catch((function(e){j(e),alert(a("key_416"))}))}var ce=function e(){Object(w.a)(this,e)};ce.signIn=function(){var e=Object(o.a)(c.a.mark((function e(a,t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(g+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:t}),credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),ce.autoSignIn=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(g+"Authentication/AutoSignIn"+y({}),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)}))),ce.signOut=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(g+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));var oe=t(27),le=t.n(oe),re=t(43),se=t(45),me=t(23);re.a.use(se.a).use(me.e).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:g+"JSON/i18n/{{lng}}.json"+y({}),crossDomain:!0}});var ie=function(e){Object(ee.a)(t,e);var a=Object(ae.a)(t);function t(e){var n;return Object(w.a)(this,t),(n=a.call(this,e)).usernameRef=void 0,n.hideInputMsg=function(e){return"signin-error-input"+(e?" hide":"")},n.handleChangeInput=function(e){n.setState(Object(G.a)({},e.target.name,e.target.value))},n.handleUserInput=function(e){e.target.value||n.setState({hideUserMsg:"blur"!==e.type})},n.handlePwdInput=function(e){e.target.value||n.setState({hidePwdMsg:"blur"!==e.type})},n.handleSubmit=function(){var e=Object(o.a)(c.a.mark((function e(a){var t,o,l,r,s,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t=U(),o=Object(i.a)(t,2),l=o[1],n.state.username&&n.state.password){e.next=6;break}n.setState({hideUserMsg:!!n.state.username,hidePwdMsg:!!n.state.password}),e.next=24;break;case 6:return e.next=8,ce.signIn(n.state.username,n.state.password);case 8:if(r=e.sent,s=n.props.t,n.setState({authError:!1,authHttpCode:-1}),!r.ok){e.next=20;break}return n.setState({authSuccess:!0}),e.t0=l,e.next=16,r.json();case 16:e.t1=e.sent,e.t0.setAuthUser.call(e.t0,e.t1),e.next=24;break;case 20:400!==(m=r.status)&&500!==m&&console.log(s("key_416")+" - "+m),n.usernameRef.current.focus(),n.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:m});case 24:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},n.usernameRef=r.a.createRef(),n}return Object(x.a)(t,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=le()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),a=le()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),t=le()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,o=n.location;return this.state.authSuccess?r.a.createElement(V.a,{to:o.state||{from:{pathname:"/"}}}):r.a.createElement("section",{className:"famo-grid signin"},r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell"},r.a.createElement("div",{className:"signin-body"},r.a.createElement("div",{className:"signin-famo-logo"},r.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),r.a.createElement("div",{className:"signin-form"},r.a.createElement("div",{className:"signin-app-name"},r.a.createElement("span",{className:"famo-text-2"},"PDA")),r.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"signin-input-wrapper"},r.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),r.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),r.a.createElement("div",{className:"signin-input-wrapper"},r.a.createElement("input",{type:"password",id:"signin-password-input",className:a,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),r.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),r.a.createElement("div",{className:t},this.state.authError&&400===this.state.authHttpCode&&r.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&r.a.createElement("span",{className:"famo-text-7"},c("key_306"))),r.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},r.a.createElement("span",{className:"famo-text-5"},c("key_238"))),r.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},r.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),r.a.createElement("div",{className:"famo-row"},r.a.createElement("div",{className:"famo-cell famo-cell-bottom"},r.a.createElement("div",{className:"signin-footer text-center"},r.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),t}(r.a.Component),ue=function(e){Object(ee.a)(t,e);var a=Object(ae.a)(t);function t(){return Object(w.a)(this,t),a.apply(this,arguments)}return Object(x.a)(t,[{key:"render",value:function(){var e=this.props,a=e.msgClass,t=e.msgText;return r.a.createElement("div",{className:a},r.a.createElement("span",{className:"famo-text-7"},t))}}]),t}(r.a.Component),fe=(Object(J.a)()(ie),t(15));t(74);function de(e){var a=e.t,t=Object(V.g)(),n=U(),c=Object(i.a)(n,2),o=c[0],s=c[1],m=Object(l.useState)(!1),u=Object(i.a)(m,2),f=u[0],d=u[1];return Object(l.useEffect)((function(){fetch(g+"Authentication/Session/User",{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?e.json().then((function(e){te(e,s,a)})).catch((function(e){ne(s,a),j(e)})):(ne(s,a),k(e))})).catch((function(e){ne(s,a),j(e)}))}),[]),Object(l.useEffect)((function(){d("/"!==t.location.pathname)}),[t.location.pathname]),r.a.createElement("section",{className:"famo-body"},r.a.createElement(V.d,null,r.a.createElement(V.b,{exact:!0,path:"/",render:function(){return r.a.createElement(H,null)}}),r.a.createElement(V.b,{path:"/Inventory",render:function(){return r.a.createElement(Q,null)}}),r.a.createElement(V.b,{path:"/Pallet",render:function(){return r.a.createElement($,null)}}),r.a.createElement(V.b,{path:"/Expedition",render:function(){return r.a.createElement(K,null)}})),r.a.createElement(v,{hide:o.authUser&&!o.loadPage}),!o.androidApp&&f&&r.a.createElement("button",{type:"button",className:"famo-button famo-normal-button pda-back-button"+(o.authUser&&!o.loadPage?"":" hide"),onClick:function(e){return t.goBack()}},r.a.createElement("span",{className:"fas fa-arrow-left"})))}var pe=Object(J.a)()((function(e){return r.a.createElement(fe.a,{basename:"/"},r.a.createElement(de,e))}));function be(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",m.a.render(r.a.createElement(l.Suspense,{fallback:r.a.createElement(v,{hide:!0})},r.a.createElement(pe,null)),document.getElementById("root"))}catch(a){alert("Oops!! Liga o servidor Node.js!")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cordova?document.addEventListener("deviceready",be,!1):be()}},[[47,1,2]]]);
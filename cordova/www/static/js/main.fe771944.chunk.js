(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{213:function(e,t,a){e.exports=a(434)},433:function(e,t,a){},434:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a.n(n),r=a(10),o=(a(215),a(224),a(0)),s=a.n(o),l=a(203),m=a.n(l),i=a(2),u=(a(212),a(83)),f=a(4),d=a(8),p=a.n(d),b=a(42),E=a(54),h=a(45),v=a.n(h);function N(e){return e?e.toString().replace(new RegExp("\\"+v.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+v.a.localeData().delimiters.decimal,"g"),"."):e}function y(){return(y=Object(r.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.current.selectionStart,r=a.current.value,110===t.keyCode&&(t.preventDefault(),a.current.value=r.substr(0,n)+v.a.localeData().delimiters.decimal+r.substr(n,r.length-1));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){switch(e){case"POR":v.a.locale("pt-pt");break;case"ENG":v.a.locale("en");break;case"ESP":v.a.locale("es-es");break;case"FRA":v.a.locale("fr")}}window.numeral=v.a;var x=a(204),O=s.a.forwardRef((function(e,t){var a=Object(x.a)().t,n=e.className,c=e.isDisabled,r=e.isNumber,l=e.name,m=e.value,u=e.autoFocus,d=e.noData,p=e.wrongFormat,b=e.invalidValue,E=e.invalidMessage,h=e.analyze,v=e.set,k=e.children,O=Object(o.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),j=Object(i.a)(O,2),g=j[0],w=j[1],C=s.a.Children.count(k)>0;return Object(o.useEffect)((function(){if(!c&&h){var e=m;v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?r&&e&&(e=N(e),isNaN(e)?v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!0})}))):v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!0,wrongFormat:!1,invalidValue:!1})})),v((function(e){return Object(f.a)(Object(f.a)({},e),{},{localAnalyze:!0})}))}}),[h]),Object(o.useEffect)((function(){w({noData:d,wrongFormat:p,invalidValue:b})}),[d,p,b]),s.a.createElement(s.a.Fragment,null,C?s.a.createElement("select",{className:n+(g.noData?" famo-input-error":""),name:l,ref:t,disabled:c,onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:t.current.value})}))}},k):s.a.createElement("input",{type:"text",className:n+(g.noData?" famo-input-error":g.wrongFormat||g.invalidValue?" famo-input-warning":""),name:l,value:m,ref:t,autoFocus:u,disabled:c,onKeyDown:function(e){r&&function(e,t){y.apply(this,arguments)}(e,t)},onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:t.current.value})}))}}),!C&&s.a.createElement(s.a.Fragment,null,!c&&s.a.createElement("div",{className:"famo-input-message "+(g.wrongFormat?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},a("key_808"))),E&&!c&&s.a.createElement("div",{className:"famo-input-message "+(g.invalidValue?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},E))))})),j=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"analyze",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!0})}))}))}},{key:"areAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.localAnalyze}))}},{key:"areValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(N(e.value)):e.value}},{key:"popUpAlerts",value:function(e,t){e.some((function(e){return e.noData}))&&g.noData(t),e.some((function(e){return e.wrongFormat}))&&g.wrongFormat(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),t),e.some((function(e){return e.invalidValue}))&&g.invalidValue(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),t)}},{key:"resetValidations",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!1,localAnalyze:!1})}))}))}},{key:"resetValues",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,selfAnalyze:!1})}))}))}}]),e}(),g=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"invalidValue",value:function(e,t){for(var a=t("key_192"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}},{key:"noData",value:function(e){alert(e("key_197"))}},{key:"wrongFormat",value:function(e,t){for(var a=t("key_191"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}}]),e}(),w=O,C=s.a.forwardRef((function(e,t){var a=e.visible,n=e.setVisible,c=e.visibleCallback,r=e.children,l=Object(x.a)().t,m=Object(o.useState)(a),u=Object(i.a)(m,2),f=u[0],d=u[1];return Object(o.useEffect)((function(){d(a)}),[a]),Object(o.useEffect)((function(){c&&c(f)}),[f]),s.a.createElement("section",{className:"w3-modal famo-modal "+(f?"w3-show":""),onClick:function(e){return n(!1)}},s.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},r),s.a.createElement("div",{className:"famo-buttons"},s.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:l("key_200"),onClick:function(e){return function(e){e.stopPropagation(),n(!1)}(e)}},s.a.createElement("span",{className:"fas fa-times"}))))})),_=a(102),S=a.n(_);var P=function(e){var t=e.text,a=Object(o.useState)(!1),n=Object(i.a)(a,2),c=n[0],r=n[1];return s.a.createElement("div",{className:"famo-title "+(c?"collapsed":"")},s.a.createElement("span",{className:"famo-text-13",onClick:function(e){r(!c)}},t))};function D(e){var t=e.hide;return s.a.createElement("div",{className:"pda-app-loader "+(t?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function T(e){var t=e.hide;return s.a.createElement("div",{className:"famo-loader-wrapper "+(t?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function F(e){var t="?timestamp="+(new Date).getTime();for(var a in e){var n=e[a];if(Array.isArray(n))for(var c=0,r=n.length;c<r;c++)t+="&"+a+"="+(null===n[c]?"":encodeURIComponent(n[c]));else t+="&"+a+"="+(null===n?"":encodeURIComponent(n))}return t}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=document.createElement("script");return a.async=!1,a.src=e,a.type="text/javascript",t?t.current.appendChild(a):document.querySelector("head").appendChild(a),new Promise((function(e,t){a.onload=e}))}var A="file:"===window.location.protocol?"http://192.168.1.2:9070/":window.location.protocol+"//"+window.location.hostname+":9070/";function V(e){fetch(A+"Log/Http/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function B(e){fetch(A+"Log/Promise/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var R=a(17),L=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"clear",value:function(e){e?e.pallet||window.sessionStorage.removeItem("SS_PALLET"):window.sessionStorage.clear()}}]),e}(),U=a(210),z={setAndroidApp:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{androidApp:t}))},setAuthUser:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{authUser:t}))},setLoadPage:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{loadPage:t}))}},M=Object(U.a)(s.a,{androidApp:!1,authUser:null,loadPage:!1},z);function K(e){var t=Object(x.a)().t,a=e.history,n=M(),l=Object(i.a)(n,2)[1],m=[t("key_87"),t("key_138"),"Box's"],u=Object(o.useState)([]),f=Object(i.a)(u,2),d=f[0],b=f[1];return Object(o.useEffect)((function(){l.setLoadPage(!0),fetch(A+"ERP/Shipments"+F({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){b(e)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:V(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){l.setLoadPage(!1)})),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:t("key_878")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-content-grid shipments"},s.a.createElement("div",{className:"famo-row famo-header-row"},m.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),d.map((function(e,n){return s.a.createElement("div",{key:n,className:"famo-row famo-body-row",onClick:function(t){return n=e.Code,void a.push("/Expedition/Edit?shipmentCode="+n);var n}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10 "+(e.Description?"":"famo-color-yellow")},e.Description?e.Description:t("key_237"))),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.PickedBoxes+"/"+e.TotalBoxes)))}))))))}function G(e){var t=Object(x.a)().t,a=e.location,n=e.history,l=M(),m=Object(i.a)(l,2),d=m[0],b=m[1],E=S.a.parse(a.search),h=E.shipmentCode,v=Object(o.useState)(),N=Object(i.a)(v,2),y=N[0],k=N[1],O=Object(o.useState)({ref:s.a.createRef(),label:"Box",className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),j=Object(i.a)(O,2),g=j[0],_=j[1],D=[t("key_179"),t("key_54"),"Box's"],I=Object(o.useState)([]),U=Object(i.a)(I,2),z=U[0],K=U[1],G=Object(o.useState)(!1),q=Object(i.a)(G,2),J=q[0],H=(q[1],Object(o.useState)([])),Y=Object(i.a)(H,2),W=Y[0],Q=Y[1],X=Object(o.useState)(!1),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(o.useState)(!1),ae=Object(i.a)(te,2),ne=ae[0],ce=ae[1],re=Object(o.useState)(!1),oe=Object(i.a)(re,2),se=oe[0],le=oe[1],me=[t("key_87"),t("key_138"),"Box",""],ie=Object(o.useState)([[]]),ue=Object(i.a)(ie,2),fe=ue[0],de=ue[1],pe=window.numeral;function be(){_((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),g.ref.current.focus()}function Ee(){return fetch(A+"ERP/Shipments/Products"+F({shipmentCode:h}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){K(e)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:V(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))}))}function he(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.querySelector(".fas").classList.remove("hide"),e.querySelector('span[class*="famo-text-"]').classList.add("hide"),fetch(A+"ERP/Shipments/Products/Components"+F({orderCode:a,orderLine:n}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){le(!0),de(e)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:V(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){le(!0),e.querySelector(".fas").classList.add("hide"),e.querySelector('span[class*="famo-text-"]').classList.remove("hide")}))}function ve(){if(g.value.startsWith("PL")){var e=g.value.match(/PL.*?\//g);ee(!0),fetch(A+"ERP/Pallets/Boxes"+F({shipmentCode:E.shipmentCode,palletID:e?parseInt(e[0].replace("PL","").replace("/","")):-1}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){e.forEach((function(e){W.some((function(t){return t.Code!==e.Code}))&&Q([e].concat(Object(u.a)(W)))}))})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:V(a),alert(a.status===p.a.NOT_FOUND?t("key_873"):t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){be(),ee(!1)}))}else W&&W.some((function(e){return e.Code===g.value}))?alert(t("key_874")):(ee(!0),fetch(A+"ERP/Shipments/Boxes"+F({shipmentCode:E.shipmentCode,boxCode:g.value}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){Q([e].concat(Object(u.a)(W)))})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=16;break;case 5:if(V(a),a.status!==p.a.NOT_FOUND){e.next=10;break}alert(t("key_872")),e.next=16;break;case 10:if(a.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,a.json().then((function(e){"box"===e.reason?alert(t("key_871")):"pallet"===e.reason&&alert(t("key_828"))})).catch((function(e){B(e),alert(t("key_416"))}));case 13:e.next=16;break;case 15:alert(t("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){be(),ee(!1)})))}return Object(o.useEffect)((function(){_((function(e){return Object(f.a)(Object(f.a)({},e),{},{isDisabled:ne})}))}),[ne]),Object(o.useEffect)((function(){b.setLoadPage(!0);var e=fetch(A+"ERP/Shipments"+F({code:h}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){k(e)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=8;break;case 5:V(a),alert(a.status===p.a.NOT_FOUND?t("key_825"):t("key_303")),n.replace("/Expedition");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))}));Promise.all([e,Ee()]).finally((function(){b.setLoadPage(!1)})),setInterval((function(){Ee().finally((function(){}))}),1e4),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(R.a,{when:W.length>0,message:t("key_881")}),s.a.createElement("section",{className:"container famo-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-xl-8"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),ve()}},!d.androidApp&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},t("key_822"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10"},E.shipmentCode)))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},t("key_138"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10 "+(y&&y.Description?"":"famo-color-yellow")},y&&y.Description?y.Description:t("key_237")))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},"Box")),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,Object.assign({},g,{set:_})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:$||ne,onClick:function(e){return be()}},s.a.createElement("span",{className:"famo-text-12"},t("key_829"))),!d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:$||ne,onClick:function(e){return ve()}},s.a.createElement("span",{className:"famo-text-12"},t("key_815"))))))))),!d.androidApp&&s.a.createElement("div",{className:"col-12 col-xl-4"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:"Box's"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!ne&&!J}),s.a.createElement("div",{className:"famo-grid rating-panel "+(ne||J?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-center"},s.a.createElement("span",{className:"famo-text-23 famo-color-green"},pe(z.reduce((function(e,t){return 1===t.Status?e+t.TotalBoxes:e}),0)).format("0,0")),s.a.createElement("span",{className:"famo-text-23"},"/",pe(z.reduce((function(e,t){return e+t.TotalBoxes}),0)).format("0,0"))))))),s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!ne&&!J}),s.a.createElement("div",{className:"famo-grid rating-panel "+(ne||J?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-center"},s.a.createElement("span",{className:"famo-text-23 famo-color-green"},pe(z.reduce((function(e,t){return 1===t.Status?e+t.Volume:e}),0)).format("0,0.00")),s.a.createElement("span",{className:"famo-text-23"},"/",pe(z.reduce((function(e,t){return e+t.Volume}),0)).format("0,0.00")+" m3"))))))))),s.a.createElement("section",{className:"container famo-wrapper expedition-details"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:t("key_876")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!ne&&!J}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+(ne||J?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},D.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)+" "+(t===D.length-1?"text-center":"")},s.a.createElement("span",{className:"famo-text-11"},e))}))),z.filter((function(e){return 0===e.Status})).map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button famo-loader-button text-left",onClick:function(t){return he(t.currentTarget,e.OrderCode)}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(e.PendingBoxes>0?"famo-color-red":"")+" hide"}),s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.OrderCode))),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.ProductCode)),s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.ProductDescription))),s.a.createElement("div",{className:"famo-cell famo-col-3 text-center"},s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button famo-loader-button",onClick:function(t){return he(t.currentTarget,e.OrderCode,e.OrderLine)}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(e.PendingBoxes>0?"famo-color-red":"")+" hide"}),s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},pe(e.PendingBoxes).format("0,0"),"/",pe(e.TotalBoxes).format("0,0")))))})))))),s.a.createElement("div",{className:"col-12 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:t("key_879")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!$&&!ne}),s.a.createElement("div",{className:"famo-grid "+($||ne?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button famo-confirm-button button-save-boxes",disabled:$||ne||0===W.length,onClick:function(e){return ce(!0),void fetch(A+"ERP/Shipments/Boxes"+F({shipmentCode:E.shipmentCode}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W.map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){K(e),Q([])})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:V(a),alert(t("key_302"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){be(),ce(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},t("key_220")))))),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-boxes "+($||ne?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},["Box's",""].map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e+(0===t?" ("+pe(W.length).format("0,0")+")":"")))}))),W.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return n=e.Code,void(window.confirm(t("key_880"))&&Q(W.filter((function(e){return e.Code!==n}))));var n}},s.a.createElement("span",{className:"fas fa-trash-alt"}))))})))))),s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:t("key_875")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!ne&&!J}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+(ne||J?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},D.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)+" "+(t===D.length-1?"text-center":"")},s.a.createElement("span",{className:"famo-text-11"},e))}))),z.filter((function(e){return 1===e.Status})).map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10"},e.ProductCode)),s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10"},e.ProductDescription))),s.a.createElement("div",{className:"famo-cell famo-col-3 text-center"},s.a.createElement("span",{className:"famo-text-10"},pe(e.TotalBoxes).format("0,0"))))})))))))),s.a.createElement(C,{visible:se,setVisible:le},fe.filter((function(e){return e.length>0})).map((function(e,a){var n=e[0].ProductCode,c=e[0].ProductDescription;return s.a.createElement("section",{key:a,className:"famo-wrapper"},s.a.createElement(P,{text:n+" - "+c}),s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-components"},s.a.createElement("div",{className:"famo-row famo-header-row"},me.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),e.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.ComponentCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10 "+(e.ComponentDescription?"":"famo-color-yellow")},e.ComponentDescription?e.ComponentDescription:t("key_237"))),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.BoxCode)),s.a.createElement("div",{className:"famo-cell famo-col-4"},s.a.createElement("span",{className:"fas "+(e.BoxPrinted?"fa-check famo-color-green":"fa-times famo-color-red")})))})))))}))))}var q=Object(R.j)((function(){return s.a.createElement(R.e,null,s.a.createElement(R.c,{exact:!0,path:"/Expedition",render:function(e){return s.a.createElement(K,e)}}),s.a.createElement(R.c,{exact:!0,path:"/Expedition/Edit",render:function(e){return s.a.createElement(G,e)}}),s.a.createElement(R.c,{path:"/Expedition/*",render:function(){return s.a.createElement(R.b,{to:"/Expedition"})}}))})),J=a(66),H=a(435);var Y=Object(R.j)(Object(H.a)()((function(e){var t=e.t,a=Object(o.useState)({inventory:!1,pallet:!1,expedition:!1}),n=Object(i.a)(a,2),c=n[0],r=n[1],l=[{label:t("key_877"),key:"expedition",image:"btn-expedicao.png"},{label:t("key_826"),key:"pallet",image:"btn-palete.png"},{label:t("key_806"),key:"inventory",image:"btn-inventario.png"}];return Object(o.useEffect)((function(){L.clear()}),[]),c.expedition?s.a.createElement(R.b,{push:!0,to:"/Expedition"}):c.pallet?s.a.createElement(R.b,{push:!0,to:"/Pallet"}):c.inventory?s.a.createElement(R.b,{push:!0,to:"/Inventory"}):s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row",style:{justifyContent:"center"}},l.map((function(e,t){return s.a.createElement("div",{key:t,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper",onClick:function(t){return r((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(J.a)({},e.key,!0))}))}},s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-menu-item"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-label text-center"},s.a.createElement("span",{className:"famo-text-19",title:e.label},e.label))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-img text-center"},s.a.createElement("img",{src:A+"Images/"+e.image,alt:e.label})))))))}))))})));function W(e,t){function a(e){e.preventDefault(),document.removeEventListener("backbutton",a,!1)}document.addEventListener("backbutton",a,!1),window.cordova.plugins.barcodeScanner.scan((function(t){t.cancelled||(e(t),document.removeEventListener("backbutton",a,!1))}),(function(e){alert(t("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39,CODE_128",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}var Q=Object(R.j)(Object(H.a)()((function(e){var t=e.t,a=M(),n=Object(i.a)(a,2),l=n[0],m=n[1],u=Object(o.useState)({ref:s.a.createRef(),label:t("key_806"),className:"famo-input famo-text-10",name:"inventoryCode",value:"",isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),b=d[0],E=d[1],h=Object(o.useState)([]),v=Object(i.a)(h,2),N=v[0],y=v[1],k=Object(o.useState)(!1),x=Object(i.a)(k,2),O=x[0],g=x[1],_=Object(o.useState)(),S=Object(i.a)(_,2),D=S[0],I=S[1],R=Object(o.useState)({label:t("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!0}),U=Object(i.a)(R,2),z=U[0],K=U[1],G=Object(o.useState)({label:t("key_464"),className:"famo-input famo-text-10",name:"productVariantCode",value:"",isNumber:!1,isDisabled:!0}),q=Object(i.a)(G,2),J=q[0],H=q[1],Y=Object(o.useState)({label:t("key_138"),className:"famo-input famo-text-10",name:"productDescription",value:"",isNumber:!1,isDisabled:!0}),Q=Object(i.a)(Y,2),X=Q[0],Z=Q[1],$=Object(o.useState)({label:t("key_751"),className:"famo-input famo-text-10",name:"locationCode",value:"",isNumber:!1,isDisabled:!0}),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=Object(o.useState)({ref:s.a.createRef(),label:t("key_347"),className:"famo-input famo-text-10",name:"quantity",value:"",isNumber:!0,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:t("key_13")}),ce=Object(i.a)(ne,2),re=ce[0],oe=ce[1],se=[z,J,X,te,re],le=[K,H,Z,ae,oe],me=s.a.createRef(),ie=Object(o.useState)(!1),ue=Object(i.a)(ie,2),fe=ue[0],de=ue[1],pe=Object(o.useState)({ref:s.a.createRef(),label:t("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),be=Object(i.a)(pe,2),Ee=be[0],he=be[1],ve=[Ee],Ne=[he];function ye(){j.resetValues(se,le),I(null)}function ke(e){var a=e.split("/"),n=a[0],o="";a.length>1&&(o=a[1]),ye(),g(!0),fetch(A+"ERP/Inventories/Products"+F({inventoryCode:b.value,productCode:n,productVariantCode:o}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){I(e),K((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductCode})})),H((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductVariantCode})})),Z((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductDescription})})),ae((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.LocationCode})}))})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:V(a),alert(a.status===p.a.NOT_FOUND?t("key_809"):t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){g(!1)}))}function xe(){j.analyze(ve,Ne)}return Object(o.useEffect)((function(){m.setLoadPage(!0),fetch(A+"ERP/Inventories"+F({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){y(e)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:V(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){m.setLoadPage(!1)})),L.clear()}),[]),Object(o.useEffect)((function(){ye()}),[b]),Object(o.useEffect)((function(){j.areAnalyzed(se)&&(j.areValid(se)?(g(!0),fetch(A+"ERP/Inventories/Products"+F({documentCode:D.Code,productCode:D.ProductCode,productVariantCode:D.ProductVariantCode,locationCode:D.LocationCode,quantity:j.getValue(re)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(ye(),alert(t("key_805"))):(V(e),alert(t("key_302")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){g(!1)}))):j.popUpAlerts(se,t),j.resetValidations(se,le))}),se),Object(o.useEffect)((function(){j.areAnalyzed(ve)&&(j.areValid(ve)&&(ke(Ee.value),de(!1)),j.resetValidations(ve,Ne))}),ve),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper",ref:me},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},b.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,Object.assign({},b,{isDisabled:O,set:E}),s.a.createElement("option",{key:""}),N.map((function(e,t){return s.a.createElement("option",{key:t,value:e.Code},e.Name)})))))),b.value&&s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:O,onClick:function(e){return de(!0)}},s.a.createElement("span",{className:"famo-text-12"},t("key_807"))),l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:O,onClick:function(e){W((function(e){ke(e.text)}),t)}},s.a.createElement("span",{className:"famo-text-12"},t("key_681")))))))),(D||O)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:t("key_339")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!O}),s.a.createElement("form",{className:"famo-grid famo-form-grid "+(O?"hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},z.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,z))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},J.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,J))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},X.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,X))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},te.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,te))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},re.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,Object.assign({},re,{set:oe}))))),s.a.createElement("div",{className:"famo-grid famo-buttons "+(O?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){j.analyze(se,le)}},s.a.createElement("span",{className:"famo-text-12"},t("key_810")))))))),s.a.createElement(C,{visible:fe,setVisible:de,visibleCallback:function(e){e?Ee.ref.current.focus():j.resetValues(ve,Ne)}},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),xe()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},Ee.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,Object.assign({},Ee,{set:he})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return xe()}},s.a.createElement("span",{className:"famo-text-12"},t("key_701"))),s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return de(!1)}},s.a.createElement("span",{className:"famo-text-12"},t("key_484"))))))))))})));function X(e){var t=Object(x.a)().t,a=e.history,n=M(),l=Object(i.a)(n,1)[0],m=window.sessionStorage.getItem("SS_PALLET"),u=Object(o.useState)({ref:s.a.createRef(),label:t("key_822"),className:"famo-input famo-text-10",name:"shipmentCode",value:m?JSON.parse(window.sessionStorage.getItem("SS_PALLET")).shipmentCode:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),b=d[0],E=d[1],h=Object(o.useState)(),v=Object(i.a)(h,2),N=v[0],y=v[1],k=Object(o.useState)(!1),O=Object(i.a)(k,2),j=O[0],g=O[1],C=[t("key_279")],_=Object(o.useState)(null),S=Object(i.a)(_,2),D=S[0],I=S[1];function R(e){var a=!1;g(!0),fetch(A+"ERP/Pallets"+F({shipmentCode:e}),{method:"GET",credentials:"include"}).then(function(){var n=Object(r.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.ok||r.status!==p.a.OK){n.next=5;break}return n.next=3,r.json().then((function(t){a=!0,y(e),I(t)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:n.next=7;break;case 5:V(r),alert(r.status===p.a.NOT_FOUND?t("key_825"):t("key_303"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){g(!1),a||I(null)}))}function U(e){window.sessionStorage.setItem("SS_PALLET",JSON.stringify({shipmentCode:N})),a.push("/Pallet/Edit?shipmentCode="+N+(e?"&palletID="+e:""))}return Object(o.useEffect)((function(){m&&R(b.value),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),R(b.value)}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},b.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,Object.assign({},b,{set:E})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:j,onClick:function(e){W((function(e){E((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.text})})),R(e.text)}),t)}},s.a.createElement("span",{className:"famo-text-12"},t("key_681"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:j,onClick:function(e){return E((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),void b.ref.current.focus()}},s.a.createElement("span",{className:"famo-text-12"},t("key_829"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:j,onClick:function(e){return R(b.value)}},s.a.createElement("span",{className:"famo-text-12"},t("key_323")))))))),(D||j)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:t("key_826")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!j}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallets "+(j?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},C.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),D&&D.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-row famo-body-row",onClick:function(t){return U(e.ID)}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.ID)))}))),s.a.createElement("div",{className:"famo-grid famo-buttons "+(j?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){return U()}},s.a.createElement("span",{className:"famo-text-12"},t("key_817")))))))))}function Z(e){var t=Object(x.a)().t,a=e.location,n=e.history,l=M(),m=Object(i.a)(l,2),d=m[0],b=m[1],E=S.a.parse(a.search),h=Object(o.useState)(E.palletID),v=Object(i.a)(h,2),N=v[0],y=v[1],k=Object(o.useState)(!0),O=Object(i.a)(k,2),g=O[0],_=O[1],D=Object(o.useState)(!1),I=Object(i.a)(D,2),U=I[0],z=I[1],K=[t("key_87"),t("key_179"),""],G=Object(o.useState)([]),q=Object(i.a)(G,2),J=q[0],H=q[1],Y=Object(o.useState)(!1),Q=Object(i.a)(Y,2),X=Q[0],Z=Q[1],$=Object(o.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=Object(o.useState)(!1),ce=Object(i.a)(ne,2),re=ce[0],oe=ce[1],se=Object(o.useState)(!1),le=Object(i.a)(se,2),me=le[0],ie=le[1],ue=Object(o.useState)({ref:s.a.createRef(),label:"Box",className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),fe=Object(i.a)(ue,2),de=fe[0],pe=fe[1],be=[de],Ee=[pe];function he(e){J.some((function(t){return t.Code===e}))?alert(t("key_814")):(Z(!0),fetch(A+"ERP/Shipments/Boxes"+F({shipmentCode:E.shipmentCode,boxCode:e}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){e.isNew=!0,H([].concat(Object(u.a)(J),[e]))})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=16;break;case 5:if(V(a),a.status!==p.a.NOT_FOUND){e.next=10;break}alert(t("key_872")),e.next=16;break;case 10:if(a.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,a.json().then((function(e){"box"===e.forbidType?alert(t("key_871")):"pallet"===e.forbidType&&alert(t("key_828"))})).catch((function(e){B(e),alert(t("key_416"))}));case 13:e.next=16;break;case 15:alert(t("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){Z(!1)})))}function ve(){g&&J.some((function(e){return e.isNew}))?alert(t("key_821")):(oe(!0),fetch(A+"ERP/Pallets/"+(g?"Close":"Reopen")+F(g?{shipmentCode:E.shipmentCode,palletID:N||-1}:{palletID:N||-1}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J.map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(alert(t(g?"key_812":"key_813")),_(!g)):(V(e),alert(t("key_302")))})).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){oe(!1)})))}function Ne(){j.analyze(be,Ee)}return Object(o.useEffect)((function(){E.palletID&&(b.setLoadPage(!0),fetch(A+"ERP/Pallets/Boxes"+F({shipmentCode:E.shipmentCode,palletID:E.palletID}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){z(e.some((function(e){return e.IsShipped}))),_(e.some((function(e){return e.IsPalletOpen}))),e.forEach((function(e){e.isNew=!1})),H(e)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:e.next=8;break;case 5:V(a),alert(a.status===p.a.NOT_FOUND?t("key_873"):t("key_303")),n.replace("/Pallet");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){b.setLoadPage(!1)}))),L.clear({pallet:!0})}),[]),Object(o.useEffect)((function(){j.areAnalyzed(be)&&(j.areValid(be)&&(he(de.value),j.resetValues(be,Ee),de.ref.current.focus()),j.resetValidations(be,Ee))}),be),E.shipmentCode?s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(P,{text:"Box's"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(T,{hide:!te}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes "+(te?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},K.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),J.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.isNew&&s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return n=e.Code,void(window.confirm(t("key_880"))&&H(J.filter((function(e){return e.Code!==n}))));var n}},s.a.createElement("span",{className:"fas fa-trash-alt"})))))}))),!U&&g&&s.a.createElement("div",{className:"famo-grid famo-buttons "+(te?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||re,onClick:function(e){return ie(!0)}},s.a.createElement("span",{className:"famo-text-12"},t("key_815")+" ("+t("key_807").toLowerCase()+")")),d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||re,onClick:function(e){W((function(e){he(e.text)}),t)}},s.a.createElement("span",{className:"famo-text-12"},t("key_815")+" ("+t("key_681").toLowerCase()+")"))))))),J.length>0&&!U&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-grid"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},g?s.a.createElement(s.a.Fragment,null,J.some((function(e){return e.isNew}))&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||te||re,onClick:function(e){return ae(!0),void fetch(A+"ERP/Pallets/Boxes"+F({shipmentCode:E.shipmentCode,palletID:N||null}),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(J.filter((function(e){return e.isNew})).map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=6;break}return e.next=3,a.json().then((function(e){y(e.palletID)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:H(J.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isNew:!1})}))),e.next=8;break;case 6:V(a),alert(t("key_302"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))})).finally((function(){ae(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},t("key_220"))),s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:X||te||re,onClick:function(e){return ve()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(re?"":"hide")}),s.a.createElement("span",{className:"famo-text-12 "+(re?"hide":"")},t("key_200")))):s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:X||te||re,onClick:function(e){return ve()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(re?"":" hide")}),s.a.createElement("span",{className:"famo-text-12 "+(re?"hide":"")},t("key_827"))))))),s.a.createElement(C,{visible:me,setVisible:ie,visibleCallback:function(e){e?de.ref.current.focus():j.resetValues(be,Ee)}},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),Ne()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},de.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(w,Object.assign({},de,{set:pe})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return Ne()}},s.a.createElement("span",{className:"famo-text-12"},t("key_701"))),s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return ie(!1)}},s.a.createElement("span",{className:"famo-text-12"},t("key_484")))))))))):s.a.createElement(R.b,{to:"/Pallet"})}var $=Object(R.j)((function(){return s.a.createElement(R.e,null,s.a.createElement(R.c,{exact:!0,path:"/Pallet",render:function(e){return s.a.createElement(X,e)}}),s.a.createElement(R.c,{exact:!0,path:"/Pallet/Edit",render:function(e){return s.a.createElement(Z,e)}}),s.a.createElement(R.c,{path:"/Pallet/*",render:function(){return s.a.createElement(R.b,{to:"/Pallet"})}}))})),ee=a(138),te=a(137);function ae(e,t,a){fetch(A+"Platform/Android"+F({}),{method:"GET",credentials:"include"}).then(function(){var n=Object(r.a)(c.a.mark((function n(o){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o.ok||o.status!==p.a.OK){n.next=5;break}return n.next=3,o.json().then(function(){var a=Object(r.a)(c.a.mark((function a(n){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return k(e.Language.Code),a.next=3,Promise.all([I("http://www.famo-code.com/Scripts/numeral/locales/pt-pt.js?version=2"),I("http://www.famo-code.com/Scripts/numeral/locales/es-es.js?version=2"),I("http://www.famo-code.com/Scripts/numeral/locales/fr.js?version=2")]);case 3:t.setAndroidApp(n),t.setAuthUser(e);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){B(e),alert(a("key_416"))}));case 3:n.next=7;break;case 5:V(o),alert(a("key_303"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){B(e),alert(a("key_416"))}))}function ne(e,t){ce.autoSignIn().then(function(){var a=Object(r.a)(c.a.mark((function a(n){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.ok||n.status!==p.a.OK){a.next=5;break}return a.next=3,n.json().then((function(a){ae(a,e,t)})).catch((function(e){B(e),alert(t("key_416"))}));case 3:a.next=7;break;case 5:V(n),alert(t("key_306"));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){B(e),alert(t("key_416"))}))}var ce=function e(){Object(b.a)(this,e)};ce.signIn=function(){var e=Object(r.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(A+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a}),credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce.autoSignIn=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(A+"Authentication/AutoSignIn"+F({}),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)}))),ce.signOut=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(A+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));var re=a(103),oe=a.n(re),se=a(209),le=a(211),me=a(84);se.a.use(le.a).use(me.e).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:"http://192.168.1.2:9070/JSON/i18n/{{lng}}.json"+F({}),crossDomain:!0}});var ie=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).usernameRef=void 0,n.hideInputMsg=function(e){return"signin-error-input "+(e?"hide":"")},n.handleChangeInput=function(e){n.setState(Object(J.a)({},e.target.name,e.target.value))},n.handleUserInput=function(e){e.target.value||n.setState({hideUserMsg:"blur"!==e.type})},n.handlePwdInput=function(e){e.target.value||n.setState({hidePwdMsg:"blur"!==e.type})},n.handleSubmit=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,r,o,s,l,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=M(),r=Object(i.a)(a,2),o=r[1],n.state.username&&n.state.password){e.next=6;break}n.setState({hideUserMsg:!!n.state.username,hidePwdMsg:!!n.state.password}),e.next=24;break;case 6:return e.next=8,ce.signIn(n.state.username,n.state.password);case 8:if(s=e.sent,l=n.props.t,n.setState({authError:!1,authHttpCode:-1}),!s.ok){e.next=20;break}return n.setState({authSuccess:!0}),e.t0=o,e.next=16,s.json();case 16:e.t1=e.sent,e.t0.setAuthUser.call(e.t0,e.t1),e.next=24;break;case 20:400!==(m=s.status)&&500!==m&&console.log(l("key_416")+" - "+m),n.usernameRef.current.focus(),n.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:m});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},n.usernameRef=s.a.createRef(),n}return Object(E.a)(a,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=oe()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),t=oe()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),a=oe()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,r=n.location;return this.state.authSuccess?s.a.createElement(R.b,{to:r.state||{from:{pathname:"/"}}}):s.a.createElement("section",{className:"famo-grid signin"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"signin-body"},s.a.createElement("div",{className:"signin-famo-logo"},s.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),s.a.createElement("div",{className:"signin-form"},s.a.createElement("div",{className:"signin-app-name"},s.a.createElement("span",{className:"famo-text-2"},"PDA")),s.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),s.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"password",id:"signin-password-input",className:t,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),s.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),s.a.createElement("div",{className:a},this.state.authError&&400===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_306"))),s.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},s.a.createElement("span",{className:"famo-text-5"},c("key_238"))),s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},s.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-cell-bottom"},s.a.createElement("div",{className:"signin-footer text-center"},s.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),a}(s.a.Component),ue=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(E.a)(a,[{key:"render",value:function(){var e=this.props,t=e.msgClass,a=e.msgText;return s.a.createElement("div",{className:t},s.a.createElement("span",{className:"famo-text-7"},a))}}]),a}(s.a.Component),fe=(Object(H.a)()(ie),a(58));a(433);function de(e){var t=e.t,a=Object(R.h)(),n=Object(R.i)(),l=M(),m=Object(i.a)(l,2),u=m[0],f=m[1],d=Object(o.useState)(!1),b=Object(i.a)(d,2),E=b[0],h=b[1];return Object(o.useEffect)((function(){fetch(A+"Authentication/Session/User",{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){ae(e,f,t)})).catch((function(e){ne(f,t),B(e)}));case 3:e.next=7;break;case 5:ne(f,t),V(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ne(f,t),B(e)}))}),[]),Object(o.useEffect)((function(){h("/"!==n.pathname)}),[n.pathname]),s.a.createElement("section",{className:"famo-body"},s.a.createElement(R.e,null,s.a.createElement(R.c,{exact:!0,path:"/",render:function(){return s.a.createElement(Y,null)}}),s.a.createElement(R.c,{path:"/Inventory",render:function(){return s.a.createElement(Q,null)}}),s.a.createElement(R.c,{path:"/Pallet",render:function(){return s.a.createElement($,null)}}),s.a.createElement(R.c,{path:"/Expedition",render:function(){return s.a.createElement(q,null)}})),s.a.createElement(D,{hide:u.authUser&&!u.loadPage}),!u.androidApp&&E&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button pda-back-button "+(u.authUser&&!u.loadPage?"":"hide"),onClick:function(e){return a.goBack()}},s.a.createElement("span",{className:"fas fa-arrow-left"})))}var pe=Object(H.a)()((function(e){return s.a.createElement(fe.a,{basename:"/"},s.a.createElement(de,e))}));function be(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",m.a.render(s.a.createElement(o.Suspense,{fallback:s.a.createElement(D,{hide:!0})},s.a.createElement(pe,null)),document.getElementById("root"))}catch(t){alert("Ouch!! Please turn on Node.js server!")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cordova?document.addEventListener("deviceready",be,!1):be()}},[[213,1,2]]]);
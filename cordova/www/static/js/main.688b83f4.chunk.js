(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{47:function(e,a,t){e.exports=t(75)},74:function(e,a,t){},75:function(e,a,t){"use strict";t.r(a);var n=t(3),c=t.n(n),r=t(5),o=t(0),s=t.n(o),l=t(37),m=t.n(l),i=t(2),u=(t(46),t(22)),f=t(1),d=t(4),p=t.n(d),b=t(25),E=t.n(b);var h=function(e){var a=e.text,t=Object(o.useState)(!1),n=Object(i.a)(t,2),c=n[0],r=n[1];return s.a.createElement("div",{className:"famo-title "+(c?"collapsed":"")},s.a.createElement("span",{className:"famo-text-13",onClick:function(e){r(!c)}},a))};function v(e){var a=e.hide;return s.a.createElement("div",{className:"pda-app-loader "+(a?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function N(e){var a=e.hide;return s.a.createElement("div",{className:"famo-loader-wrapper "+(a?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function y(e){var a="?timestamp="+(new Date).getTime();for(var t in e){var n=e[t];if(Array.isArray(n))for(var c=0,r=n.length;c<r;c++)a+="&"+t+"="+(null===n[c]?"":encodeURIComponent(n[c]));else a+="&"+t+"="+(null===n?"":encodeURIComponent(n))}return a}function k(e,a){var t=document.createElement("script");t.async=!0,t.src=e,t.type="text/javascript",a.current.appendChild(t)}var O="http://192.168.3.108:9070/";function x(e){fetch(O+"Log/Http/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function j(e){fetch(O+"Log/Promise/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var g=t(11),w=t(14),_=t(12),C=t.n(_);function S(e){return e?e.toString().replace(new RegExp("\\"+C.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+C.a.localeData().delimiters.decimal,"g"),"."):e}function P(){return(P=Object(r.a)(c.a.mark((function e(a,t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.current.selectionStart,r=t.current.value,110===a.keyCode&&(a.preventDefault(),t.current.value=r.substr(0,n)+C.a.localeData().delimiters.decimal+r.substr(n,r.length-1));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){switch(e){case"POR":C.a.locale("pt-pt");break;case"ENG":C.a.locale("en");break;case"ESP":C.a.locale("es-es");break;case"FRA":C.a.locale("fr")}}window.numeral=C.a;var T=t(38),A=s.a.forwardRef((function(e,a){var t=Object(T.a)().t,n=e.className,c=e.isDisabled,r=e.isNumber,l=e.name,m=e.value,u=e.autoFocus,d=e.noData,p=e.wrongFormat,b=e.invalidValue,E=e.invalidMessage,h=e.analyze,v=e.set,N=e.children,y=Object(o.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),k=Object(i.a)(y,2),O=k[0],x=k[1],j=s.a.Children.count(N)>0;return Object(o.useEffect)((function(){if(!c&&h){var e=m;v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?r&&e&&(e=S(e),isNaN(e)?v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!0})}))):v((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!0,wrongFormat:!1,invalidValue:!1})})),v((function(e){return Object(f.a)(Object(f.a)({},e),{},{localAnalyze:!0})}))}}),[h]),Object(o.useEffect)((function(){x({noData:d,wrongFormat:p,invalidValue:b})}),[d,p,b]),s.a.createElement(s.a.Fragment,null,j?s.a.createElement("select",{className:n+(O.noData?" famo-input-error":""),name:l,ref:a,disabled:c,onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:a.current.value})}))}},N):s.a.createElement("input",{type:"text",className:n+(O.noData?" famo-input-error":O.wrongFormat||O.invalidValue?" famo-input-warning":""),name:l,value:m,ref:a,autoFocus:u,disabled:c,onKeyDown:function(e){r&&function(e,a){P.apply(this,arguments)}(e,a)},onChange:function(e){return v((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:a.current.value})}))}}),!j&&s.a.createElement(s.a.Fragment,null,!c&&s.a.createElement("div",{className:"famo-input-message "+(O.wrongFormat?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},t("key_808"))),E&&!c&&s.a.createElement("div",{className:"famo-input-message "+(O.invalidValue?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},E))))})),F=function(){function e(){Object(g.a)(this,e)}return Object(w.a)(e,null,[{key:"analyze",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!0})}))}))}},{key:"areAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.localAnalyze}))}},{key:"areValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(S(e.value)):e.value}},{key:"popUpAlerts",value:function(e,a){e.some((function(e){return e.noData}))&&I.noData(a),e.some((function(e){return e.wrongFormat}))&&I.wrongFormat(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),a),e.some((function(e){return e.invalidValue}))&&I.invalidValue(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),a)}},{key:"resetValidations",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!1,localAnalyze:!1})}))}))}},{key:"resetValues",value:function(e,a){e.forEach((function(e,t){e.isDisabled||a[t]((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,selfAnalyze:!1})}))}))}}]),e}(),I=function(){function e(){Object(g.a)(this,e)}return Object(w.a)(e,null,[{key:"invalidValue",value:function(e,a){for(var t=a("key_192"),n=0,c=e.length;n<c;n++)t+=e[n],n<c-2?t+=", ":n===c-2&&(t+=" "+a("key_573")+" ");alert(t)}},{key:"noData",value:function(e){alert(e("key_197"))}},{key:"wrongFormat",value:function(e,a){for(var t=a("key_191"),n=0,c=e.length;n<c;n++)t+=e[n],n<c-2?t+=", ":n===c-2&&(t+=" "+a("key_573")+" ");alert(t)}}]),e}(),V=A,R=t(6),B=function(){function e(){Object(g.a)(this,e)}return Object(w.a)(e,null,[{key:"clear",value:function(e){e?e.pallet||window.sessionStorage.removeItem("SS_PALLET"):window.sessionStorage.clear()}}]),e}(),L=t(44),U={setAndroidApp:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{androidApp:a}))},setAuthUser:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{authUser:a}))},setLoadPage:function(e,a){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{loadPage:a}))}},z=Object(L.a)(s.a,{androidApp:!1,authUser:null,loadPage:!1},U);function M(e){var a=Object(T.a)().t,t=e.history,n=z(),l=Object(i.a)(n,2)[1],m=[a("key_87"),a("key_138"),a("key_820")],u=Object(o.useState)([]),f=Object(i.a)(u,2),d=f[0],b=f[1];return Object(o.useEffect)((function(){l.setLoadPage(!0),fetch(O+"ERP/Shipments"+y({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){b(e)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:x(t),alert(a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){l.setLoadPage(!1)})),B.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(h,{text:"Mapas de carga"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-content-grid shipments"},s.a.createElement("div",{className:"famo-row famo-header-row"},m.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),d.map((function(e,n){return s.a.createElement("div",{key:n,className:"famo-row famo-body-row",onClick:function(a){return n=e.Code,void t.push("/Expedition/Edit?shipmentCode="+n);var n}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10 "+(e.Description?"":"famo-color-yellow")},e.Description?e.Description:a("key_237"))),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.PickedBoxes+"/"+e.TotalBoxes)))}))))))}function K(e){var a=Object(T.a)().t,t=e.location,n=e.history,l=z(),m=Object(i.a)(l,2),d=m[0],b=m[1],h=E.a.parse(t.search),v=h.shipmentCode,k=Object(o.useState)(),g=Object(i.a)(k,2),w=g[0],_=g[1],C=Object(o.useState)({ref:s.a.createRef(),label:a("key_819"),className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),S=Object(i.a)(C,2),P=S[0],D=S[1],A=[a("key_179"),a("key_54"),a("key_138"),a("key_820")],F=Object(o.useState)([]),I=Object(i.a)(F,2),R=I[0],L=I[1],U=[a("key_820"),""],M=Object(o.useState)([]),K=Object(i.a)(M,2),G=K[0],J=K[1],q=Object(o.useState)(!1),H=Object(i.a)(q,2),Y=H[0],W=H[1],Q=Object(o.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1];function ee(){D((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),P.ref.current.focus()}function ae(){if(P.value.startsWith("PL")){var e=P.value.match(/(?<=PL).*(?=\/)/g);W(!0),fetch(O+"ERP/Pallets/Boxes"+y({shipmentCode:h.shipmentCode,palletID:e?parseInt(e[0]):-1}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){e.forEach((function(e){G.some((function(a){return a.Code!==e.Code}))&&J([e].concat(Object(u.a)(G)))}))})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:x(t),alert(t.status===p.a.NOT_FOUND?"A palete n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio.":a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){ee(),W(!1)}))}else G&&G.some((function(e){return e.Code===P.value}))?alert("A embalagem j\xe1 est\xe1 pronta a carregar."):(W(!0),fetch(O+"ERP/Shipments/Boxes"+y({shipmentCode:h.shipmentCode,boxCode:P.value}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){J([e].concat(Object(u.a)(G)))})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=16;break;case 5:if(x(t),t.status!==p.a.NOT_FOUND){e.next=10;break}alert("A embalagem\xa0n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio."),e.next=16;break;case 10:if(t.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,t.json().then((function(e){"box"===e.forbidType?alert("A embalagem j\xe1 foi carregada."):"pallet"===e.forbidType&&alert(a("key_828"))})).catch((function(e){j(e),alert(a("key_416"))}));case 13:e.next=16;break;case 15:alert(a("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){ee(),W(!1)})))}return Object(o.useEffect)((function(){D((function(e){return Object(f.a)(Object(f.a)({},e),{},{isDisabled:Z})}))}),[Z]),Object(o.useEffect)((function(){b.setLoadPage(!0);var e=fetch(O+"ERP/Shipments"+y({code:v}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){_(e)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=8;break;case 5:x(t),alert(t.status===p.a.NOT_FOUND?a("key_825"):a("key_303")),n.replace("/Expedition");case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})),t=fetch(O+"ERP/Shipments/Products"+y({shipmentCode:v}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){L(e)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:x(t),alert(a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))}));Promise.all([e,t]).finally((function(){b.setLoadPage(!1)})),B.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),ae()}},!d.androidApp&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},a("key_822"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10"},h.shipmentCode)))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},a("key_138"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10 "+(w&&w.Description?"":"famo-color-yellow")},w&&w.Description?w.Description:a("key_237"))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},a("key_820"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10 famo-color-green"},R.reduce((function(e,a){return 1===a.Status?e+a.BoxesNum:e}),0)),s.a.createElement("span",{className:"famo-text-10"},"/",R.reduce((function(e,a){return e+a.BoxesNum}),0)))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},a("key_819"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,Object.assign({},P,{set:D})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||Z,onClick:function(e){return ee()}},s.a.createElement("span",{className:"famo-text-12"},a("key_829"))),!d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||Z,onClick:function(e){return ae()}},s.a.createElement("span",{className:"famo-text-12"},a("key_815")))))))),s.a.createElement("section",{className:"container famo-wrapper expedition-details"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-title"},s.a.createElement("span",{className:"famo-text-13"},"Em falta")),s.a.createElement("div",{className:"famo-content"},s.a.createElement(N,{hide:!Z}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+(Z?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},A.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),R.filter((function(e){return 0===e.Status})).map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10"},e.ProductCode)),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.ProductDescription)),s.a.createElement("div",{className:"famo-cell famo-col-4"},s.a.createElement("span",{className:"famo-text-10"},e.BoxesNum)))})))))),s.a.createElement("div",{className:"col-12 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-title"},s.a.createElement("span",{className:"famo-text-13"},"Pronto p/carregar")),s.a.createElement("div",{className:"famo-content"},s.a.createElement(N,{hide:!Y&&!Z}),s.a.createElement("div",{className:"famo-grid "+(Y||Z?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-left"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button famo-confirm-button",disabled:Y||Z||0===G.length,onClick:function(e){return $(!0),void fetch(O+"ERP/Shipments/Boxes"+y({shipmentCode:h.shipmentCode}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G.map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){L(e),J([])})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:x(t),alert(a("key_302"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){ee(),$(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},a("key_220")))))),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-boxes "+(Y||Z?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},U.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e+(0===a?" ("+G.length+")":"")))}))),G.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return t=e.Code,void(window.confirm("Tem a certeza que pretende eliminar a embalagem?")&&J(G.filter((function(e){return e.Code!==t}))));var t}},s.a.createElement("span",{className:"fas fa-trash-alt"}))))})))))),s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-title"},s.a.createElement("span",{className:"famo-text-13"},"Carregado")),s.a.createElement("div",{className:"famo-content"},s.a.createElement(N,{hide:!Z}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+(Z?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},A.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),R.filter((function(e){return 1===e.Status})).map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10"},e.ProductCode)),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.ProductDescription)),s.a.createElement("div",{className:"famo-cell famo-col-4"},s.a.createElement("span",{className:"famo-text-10"},e.BoxesNum)))})))))))))}var G=Object(R.h)((function(){return s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/Expedition",render:function(e){return s.a.createElement(M,e)}}),s.a.createElement(R.b,{exact:!0,path:"/Expedition/Edit",render:function(e){return s.a.createElement(K,e)}}),s.a.createElement(R.b,{path:"/Expedition/*",render:function(){return s.a.createElement(R.a,{to:"/Expedition"})}}))})),J=t(18),q=t(76);var H,Y=Object(R.h)(Object(q.a)()((function(e){var a=e.t,t=Object(o.useState)({inventory:!1,pallet:!1,expedition:!1}),n=Object(i.a)(t,2),c=n[0],r=n[1],l=[{label:a("key_806"),key:"inventory",image:"btn-inventario.png"},{label:a("key_826"),key:"pallet",image:"btn-palete.png"},{label:"Expedi\xe7\xe3o",key:"expedition",image:"btn-expedicao.png"}];return Object(o.useEffect)((function(){B.clear()}),[]),c.inventory?s.a.createElement(R.a,{push:!0,to:"/Inventory"}):c.pallet?s.a.createElement(R.a,{push:!0,to:"/Pallet"}):c.expedition?s.a.createElement(R.a,{push:!0,to:"/Expedition"}):s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row",style:{justifyContent:"center"}},l.map((function(e,a){return s.a.createElement("div",{key:a,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper",onClick:function(a){return r((function(a){return Object(f.a)(Object(f.a)({},a),{},Object(J.a)({},e.key,!0))}))}},s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-menu-item"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-label text-center"},s.a.createElement("span",{className:"famo-text-19",title:e.label},e.label))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-img text-center"},s.a.createElement("img",{src:O+"Images/"+e.image,alt:e.label})))))))}))))})));!function(e){e[e.inventoryProduct=1]="inventoryProduct",e[e.palletBox=2]="palletBox"}(H||(H={}));var W=Object(q.a)()((function(e){var a=e.contentType,t=e.visible,n=e.setVisible,c=e.confirm,r=e.t,l=Object(o.useState)(t),m=Object(i.a)(l,2),u=m[0],f=m[1],d=Object(o.useState)({ref:s.a.createRef(),label:r("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),p=Object(i.a)(d,2),b=p[0],E=p[1],h=Object(o.useState)({ref:s.a.createRef(),label:r("key_819"),className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),v=Object(i.a)(h,2),N=v[0],y=v[1],k=function(){switch(a){case H.inventoryProduct:return[b];case H.palletBox:return[N]}}(),O=function(){switch(a){case H.inventoryProduct:return[E];case H.palletBox:return[y]}}();function x(){switch(a){case H.inventoryProduct:case H.palletBox:F.analyze(k,O)}}function j(e){e.preventDefault(),x()}return Object(o.useEffect)((function(){if(u)switch(a){case H.palletBox:var e=k[0];e.autoFocus&&e.ref.current.focus()}}),[u]),Object(o.useEffect)((function(){f(t),t||F.resetValues(k,O)}),[t]),Object(o.useEffect)((function(){if(F.areAnalyzed(k)){if(F.areValid(k)){switch(a){case H.inventoryProduct:case H.palletBox:c(k[0].value)}switch(a){case H.inventoryProduct:n(!1);break;case H.palletBox:var e=k[0];F.resetValues(k,O),e.autoFocus&&e.ref.current.focus()}}F.resetValidations(k,O)}}),k),s.a.createElement("section",{className:"w3-modal famo-modal "+(u?"w3-show":""),onClick:function(e){return n(!1)}},s.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},function(){switch(a){case H.inventoryProduct:case H.palletBox:return s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:j},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},k[0].label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,Object.assign({},k[0],{set:O[0]})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return x()}},s.a.createElement("span",{className:"famo-text-12"},r("key_701"))),s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return n(!1)}},s.a.createElement("span",{className:"famo-text-12"},r("key_484"))))))))}}()),s.a.createElement("div",{className:"famo-buttons"},s.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:r("key_200"),onClick:function(e){e.stopPropagation(),n(!1)}},s.a.createElement("span",{className:"fas fa-times"}))))}));function Q(e,a){function t(e){e.preventDefault(),document.removeEventListener("backbutton",t,!1)}document.addEventListener("backbutton",t,!1),window.cordova.plugins.barcodeScanner.scan((function(a){a.cancelled||(e(a),document.removeEventListener("backbutton",t,!1))}),(function(e){alert(a("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39,CODE_128",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}var X=Object(R.h)(Object(q.a)()((function(e){var a=e.t,t=z(),n=Object(i.a)(t,2),l=n[0],m=n[1],u=Object(o.useState)({ref:s.a.createRef(),label:a("key_806"),className:"famo-input famo-text-10",name:"inventoryCode",value:"",isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),b=d[0],E=d[1],v=Object(o.useState)([]),g=Object(i.a)(v,2),w=g[0],_=g[1],C=Object(o.useState)(!1),S=Object(i.a)(C,2),P=S[0],D=S[1],T=Object(o.useState)(!1),A=Object(i.a)(T,2),I=A[0],R=A[1],L=Object(o.useState)(),U=Object(i.a)(L,2),M=U[0],K=U[1],G=Object(o.useState)({label:a("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!0}),J=Object(i.a)(G,2),q=J[0],Y=J[1],X=Object(o.useState)({label:a("key_464"),className:"famo-input famo-text-10",name:"productVariantCode",value:"",isNumber:!1,isDisabled:!0}),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],ae=Object(o.useState)({label:a("key_138"),className:"famo-input famo-text-10",name:"productDescription",value:"",isNumber:!1,isDisabled:!0}),te=Object(i.a)(ae,2),ne=te[0],ce=te[1],re=Object(o.useState)({label:a("key_751"),className:"famo-input famo-text-10",name:"locationCode",value:"",isNumber:!1,isDisabled:!0}),oe=Object(i.a)(re,2),se=oe[0],le=oe[1],me=Object(o.useState)({ref:s.a.createRef(),label:a("key_347"),className:"famo-input famo-text-10",name:"quantity",value:"",isNumber:!0,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:a("key_13")}),ie=Object(i.a)(me,2),ue=ie[0],fe=ie[1],de=[q,$,ne,se,ue],pe=[Y,ee,ce,le,fe],be=s.a.createRef();function Ee(e){var t=e.split("/"),n=t[0],o="";t.length>1&&(o=t[1]),R(!0),he(),fetch(O+"ERP/Inventories/Products"+y({inventoryCode:b.value,productCode:n,productVariantCode:o}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){K(e),Y((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductCode})})),ee((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductVariantCode})})),ce((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.ProductDescription})})),le((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.LocationCode})}))})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:x(t),alert(t.status===p.a.NOT_FOUND?a("key_809"):a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){R(!1)}))}function he(){K(null),F.resetValues(de,pe)}return Object(o.useEffect)((function(){m.setLoadPage(!0),1===Object.keys(window.numeral.locales).length&&(k("http://www.famo-code.com/Scripts/numeral/locales/pt-pt.js?version=27",be),k("http://www.famo-code.com/Scripts/numeral/locales/es-es.js?version=27",be),k("http://www.famo-code.com/Scripts/numeral/locales/fr.js?version=27",be)),fetch(O+"ERP/Inventories"+y({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){_(e)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=7;break;case 5:x(t),alert(a("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){m.setLoadPage(!1)})),B.clear()}),[]),Object(o.useEffect)((function(){he()}),[b]),Object(o.useEffect)((function(){F.areAnalyzed(de)&&(F.areValid(de)?(R(!0),fetch(O+"ERP/Inventories/Products"+y({documentCode:M.Code,productCode:M.ProductCode,productVariantCode:M.ProductVariantCode,locationCode:M.LocationCode,quantity:F.getValue(ue)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(he(),alert(a("key_805"))):(x(e),alert(a("key_302")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){R(!1)}))):F.popUpAlerts(de,a),F.resetValidations(de,pe))}),de),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper",ref:be},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},b.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,Object.assign({},b,{isDisabled:I,set:E}),s.a.createElement("option",{key:""}),w.map((function(e,a){return s.a.createElement("option",{key:a,value:e.Code},e.Name)})))))))),(M||I)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(h,{text:a("key_339")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(N,{hide:!I}),s.a.createElement("form",{className:"famo-grid famo-form-grid "+(I?"hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},q.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,q))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},$.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,$))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},ne.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,ne))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},se.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,se))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},ue.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,Object.assign({},ue,{set:fe}))))),s.a.createElement("div",{className:"famo-grid famo-buttons "+(I?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){F.analyze(de,pe)}},s.a.createElement("span",{className:"famo-text-12"},a("key_810")))))))),b.value&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-grid"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I,onClick:function(e){return D(!0)}},s.a.createElement("span",{className:"famo-text-12"},a("key_807"))),l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I,onClick:function(e){Q((function(e){Ee(e.text)}),a)}},s.a.createElement("span",{className:"famo-text-12"},a("key_681"))))))),s.a.createElement(W,{contentType:H.inventoryProduct,visible:P,setVisible:D,confirm:Ee}))})));function Z(e){var a=Object(T.a)().t,t=e.history,n=z(),l=Object(i.a)(n,1)[0],m=window.sessionStorage.getItem("SS_PALLET"),u=Object(o.useState)({ref:s.a.createRef(),label:a("key_822"),className:"famo-input famo-text-10",name:"shipmentCode",value:m?JSON.parse(window.sessionStorage.getItem("SS_PALLET")).shipmentCode:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),b=d[0],E=d[1],v=Object(o.useState)(!1),k=Object(i.a)(v,2),g=k[0],w=k[1],_=[a("key_279")],C=Object(o.useState)([]),S=Object(i.a)(C,2),P=S[0],D=S[1];function A(e){w(!0),D([]),fetch(O+"ERP/Pallets"+y({shipmentCode:e}),{method:"GET",credentials:"include"}).then(function(){var t=Object(r.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok||n.status!==p.a.OK){t.next=5;break}return t.next=3,n.json().then((function(a){E((function(a){return Object(f.a)(Object(f.a)({},a),{},{valueSubmitted:e})})),D(a)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:t.next=7;break;case 5:x(n),alert(n.status===p.a.NOT_FOUND?a("key_825"):a("key_303"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){w(!1)}))}function F(e){window.sessionStorage.setItem("SS_PALLET",JSON.stringify({shipmentCode:b.valueSubmitted})),t.push("/Pallet/Edit?shipmentCode="+b.valueSubmitted+(e?"&palletID="+e:""))}return Object(o.useEffect)((function(){m&&A(b.value),B.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),A(b.value)}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},b.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(V,Object.assign({},b,{set:E})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:g,onClick:function(e){Q((function(e){E((function(a){return Object(f.a)(Object(f.a)({},a),{},{value:e.text})})),A(e.text)}),a)}},s.a.createElement("span",{className:"famo-text-12"},a("key_681"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:g,onClick:function(e){return E((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),void b.ref.current.focus()}},s.a.createElement("span",{className:"famo-text-12"},a("key_829"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:g,onClick:function(e){return A(b.value)}},s.a.createElement("span",{className:"famo-text-12"},a("key_323")))))))),(P.length>0||g)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(h,{text:a("key_826")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(N,{hide:!g}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallets "+(g?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},_.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),P.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row",onClick:function(a){return F(e.ID)}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.ID)))}))))),P.length>0&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-grid"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:g,onClick:function(e){return F()}},s.a.createElement("span",{className:"famo-text-12"},a("key_817"))))))))}function $(e){var a=Object(T.a)().t,t=e.location,n=e.history,l=z(),m=Object(i.a)(l,2),d=m[0],b=m[1],v=E.a.parse(t.search),k=Object(o.useState)(v.palletID),g=Object(i.a)(k,2),w=g[0],_=g[1],C=Object(o.useState)(!0),S=Object(i.a)(C,2),P=S[0],D=S[1],A=Object(o.useState)(!1),F=Object(i.a)(A,2),I=F[0],V=F[1],L=[a("key_87"),a("key_179"),""],U=Object(o.useState)([]),M=Object(i.a)(U,2),K=M[0],G=M[1],J=Object(o.useState)(!1),q=Object(i.a)(J,2),Y=q[0],X=q[1],Z=Object(o.useState)(!1),$=Object(i.a)(Z,2),ee=$[0],ae=$[1],te=Object(o.useState)(!1),ne=Object(i.a)(te,2),ce=ne[0],re=ne[1],oe=Object(o.useState)(!1),se=Object(i.a)(oe,2),le=se[0],me=se[1];function ie(e){K.some((function(a){return a.Code===e}))?alert(a("key_814")):(X(!0),fetch(O+"ERP/Shipments/Boxes"+y({shipmentCode:v.shipmentCode,boxCode:e}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){e.isNew=!0,G([].concat(Object(u.a)(K),[e]))})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=16;break;case 5:if(x(t),t.status!==p.a.NOT_FOUND){e.next=10;break}alert("A embalagem\xa0n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio."),e.next=16;break;case 10:if(t.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,t.json().then((function(e){"box"===e.forbidType?alert("A embalagem j\xe1 foi carregada."):"pallet"===e.forbidType&&alert(a("key_828"))})).catch((function(e){j(e),alert(a("key_416"))}));case 13:e.next=16;break;case 15:alert(a("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){X(!1)})))}function ue(){P&&K.some((function(e){return e.isNew}))?alert(a("key_821")):(re(!0),fetch(O+"ERP/Pallets/"+(P?"Close":"Reopen")+y(P?{shipmentCode:v.shipmentCode,palletID:w||-1}:{palletID:w||-1}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K.map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(alert(a(P?"key_812":"key_813")),D(!P)):(x(e),alert(a("key_302")))})).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){re(!1)})))}return Object(o.useEffect)((function(){v.palletID&&(b.setLoadPage(!0),fetch(O+"ERP/Pallets/Boxes"+y({shipmentCode:v.shipmentCode,palletID:v.palletID}),{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){V(e.some((function(e){return e.IsShipped}))),D(e.some((function(e){return e.IsPalletOpen}))),e.forEach((function(e){e.isNew=!1})),G(e)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:e.next=8;break;case 5:x(t),alert(t.status===p.a.NOT_FOUND?"A palete n\xe3o\xa0est\xe1\xa0associada\xa0ao\xa0envio.":a("key_303")),n.replace("/Pallet");case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){b.setLoadPage(!1)}))),B.clear({pallet:!0})}),[]),v.shipmentCode?s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(h,{text:a("key_820")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(N,{hide:!ee}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes "+(ee?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},L.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-cell famo-col-"+(a+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),K.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.isNew&&s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return t=e.Code,void(window.confirm("Tem a certeza que pretende eliminar a embalagem?")&&G(K.filter((function(e){return e.Code!==t}))));var t}},s.a.createElement("span",{className:"fas fa-trash-alt"})))))}))),!I&&P&&s.a.createElement("div",{className:"famo-grid famo-buttons "+(ee?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||ce,onClick:function(e){return me(!0)}},s.a.createElement("span",{className:"famo-text-12"},a("key_815")+" ("+a("key_807").toLowerCase()+")")),d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||ce,onClick:function(e){Q((function(e){ie(e.text)}),a)}},s.a.createElement("span",{className:"famo-text-12"},a("key_815")+" ("+a("key_681").toLowerCase()+")"))))))),K.length>0&&!I&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-grid"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},P?s.a.createElement(s.a.Fragment,null,K.some((function(e){return e.isNew}))&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:Y||ee||ce,onClick:function(e){return ae(!0),void fetch(O+"ERP/Pallets/Boxes"+y({shipmentCode:v.shipmentCode,palletID:w||-1}),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(K.filter((function(e){return e.isNew})).map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=6;break}return e.next=3,t.json().then((function(e){_(e.palletID)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:G(K.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isNew:!1})}))),e.next=8;break;case 6:x(t),alert(a("key_302"));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))})).finally((function(){ae(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},a("key_220"))),s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:Y||ee||ce,onClick:function(e){return ue()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(ce?"":"hide")}),s.a.createElement("span",{className:"famo-text-12 "+(ce?"hide":"")},a("key_200")))):s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:Y||ee||ce,onClick:function(e){return ue()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(ce?"":" hide")}),s.a.createElement("span",{className:"famo-text-12 "+(ce?"hide":"")},a("key_827"))))))),s.a.createElement(W,{contentType:H.palletBox,visible:le,setVisible:me,confirm:ie})):s.a.createElement(R.a,{to:"/Pallet"})}var ee=Object(R.h)((function(){return s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/Pallet",render:function(e){return s.a.createElement(Z,e)}}),s.a.createElement(R.b,{exact:!0,path:"/Pallet/Edit",render:function(e){return s.a.createElement($,e)}}),s.a.createElement(R.b,{path:"/Pallet/*",render:function(){return s.a.createElement(R.a,{to:"/Pallet"})}}))})),ae=t(33),te=t(32);function ne(e,a,t){fetch(O+"Platform/Android"+y({}),{method:"GET",credentials:"include"}).then(function(){var n=Object(r.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.ok||r.status!==p.a.OK){n.next=5;break}return n.next=3,r.json().then((function(t){D(e.Language.Code),a.setAndroidApp(t),a.setAuthUser(e)})).catch((function(e){j(e),alert(t("key_416"))}));case 3:n.next=7;break;case 5:x(r),alert(t("key_303"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){j(e),alert(t("key_416"))}))}function ce(e,a){re.autoSignIn().then(function(){var t=Object(r.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok||n.status!==p.a.OK){t.next=5;break}return t.next=3,n.json().then((function(t){ne(t,e,a)})).catch((function(e){j(e),alert(a("key_416"))}));case 3:t.next=7;break;case 5:x(n),alert(a("key_306"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){j(e),alert(a("key_416"))}))}var re=function e(){Object(g.a)(this,e)};re.signIn=function(){var e=Object(r.a)(c.a.mark((function e(a,t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(O+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:t}),credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),re.autoSignIn=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(O+"Authentication/AutoSignIn"+y({}),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)}))),re.signOut=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(O+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));var oe=t(27),se=t.n(oe),le=t(43),me=t(45),ie=t(23);le.a.use(me.a).use(ie.e).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:O+"JSON/i18n/{{lng}}.json"+y({}),crossDomain:!0}});var ue=function(e){Object(ae.a)(t,e);var a=Object(te.a)(t);function t(e){var n;return Object(g.a)(this,t),(n=a.call(this,e)).usernameRef=void 0,n.hideInputMsg=function(e){return"signin-error-input "+(e?"hide":"")},n.handleChangeInput=function(e){n.setState(Object(J.a)({},e.target.name,e.target.value))},n.handleUserInput=function(e){e.target.value||n.setState({hideUserMsg:"blur"!==e.type})},n.handlePwdInput=function(e){e.target.value||n.setState({hidePwdMsg:"blur"!==e.type})},n.handleSubmit=function(){var e=Object(r.a)(c.a.mark((function e(a){var t,r,o,s,l,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t=z(),r=Object(i.a)(t,2),o=r[1],n.state.username&&n.state.password){e.next=6;break}n.setState({hideUserMsg:!!n.state.username,hidePwdMsg:!!n.state.password}),e.next=24;break;case 6:return e.next=8,re.signIn(n.state.username,n.state.password);case 8:if(s=e.sent,l=n.props.t,n.setState({authError:!1,authHttpCode:-1}),!s.ok){e.next=20;break}return n.setState({authSuccess:!0}),e.t0=o,e.next=16,s.json();case 16:e.t1=e.sent,e.t0.setAuthUser.call(e.t0,e.t1),e.next=24;break;case 20:400!==(m=s.status)&&500!==m&&console.log(l("key_416")+" - "+m),n.usernameRef.current.focus(),n.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:m});case 24:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},n.usernameRef=s.a.createRef(),n}return Object(w.a)(t,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=se()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),a=se()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),t=se()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,r=n.location;return this.state.authSuccess?s.a.createElement(R.a,{to:r.state||{from:{pathname:"/"}}}):s.a.createElement("section",{className:"famo-grid signin"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"signin-body"},s.a.createElement("div",{className:"signin-famo-logo"},s.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),s.a.createElement("div",{className:"signin-form"},s.a.createElement("div",{className:"signin-app-name"},s.a.createElement("span",{className:"famo-text-2"},"PDA")),s.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),s.a.createElement(fe,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"password",id:"signin-password-input",className:a,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),s.a.createElement(fe,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),s.a.createElement("div",{className:t},this.state.authError&&400===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_306"))),s.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},s.a.createElement("span",{className:"famo-text-5"},c("key_238"))),s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},s.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-cell-bottom"},s.a.createElement("div",{className:"signin-footer text-center"},s.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),t}(s.a.Component),fe=function(e){Object(ae.a)(t,e);var a=Object(te.a)(t);function t(){return Object(g.a)(this,t),a.apply(this,arguments)}return Object(w.a)(t,[{key:"render",value:function(){var e=this.props,a=e.msgClass,t=e.msgText;return s.a.createElement("div",{className:a},s.a.createElement("span",{className:"famo-text-7"},t))}}]),t}(s.a.Component),de=(Object(q.a)()(ue),t(15));t(74);function pe(e){var a=e.t,t=Object(R.g)(),n=z(),l=Object(i.a)(n,2),m=l[0],u=l[1],f=Object(o.useState)(!1),d=Object(i.a)(f,2),b=d[0],E=d[1];return Object(o.useEffect)((function(){fetch(O+"Authentication/Session/User",{method:"GET",credentials:"include"}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok||t.status!==p.a.OK){e.next=5;break}return e.next=3,t.json().then((function(e){ne(e,u,a)})).catch((function(e){ce(u,a),j(e)}));case 3:e.next=7;break;case 5:ce(u,a),x(t);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){ce(u,a),j(e)}))}),[]),Object(o.useEffect)((function(){E("/"!==t.location.pathname)}),[t.location.pathname]),s.a.createElement("section",{className:"famo-body"},s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/",render:function(){return s.a.createElement(Y,null)}}),s.a.createElement(R.b,{path:"/Inventory",render:function(){return s.a.createElement(X,null)}}),s.a.createElement(R.b,{path:"/Pallet",render:function(){return s.a.createElement(ee,null)}}),s.a.createElement(R.b,{path:"/Expedition",render:function(){return s.a.createElement(G,null)}})),s.a.createElement(v,{hide:m.authUser&&!m.loadPage}),!m.androidApp&&b&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button pda-back-button "+(m.authUser&&!m.loadPage?"":"hide"),onClick:function(e){return t.goBack()}},s.a.createElement("span",{className:"fas fa-arrow-left"})))}var be=Object(q.a)()((function(e){return s.a.createElement(de.a,{basename:"/"},s.a.createElement(pe,e))}));function Ee(){return he.apply(this,arguments)}function he(){return(he=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",m.a.render(s.a.createElement(o.Suspense,{fallback:s.a.createElement(v,{hide:!0})},s.a.createElement(be,null)),document.getElementById("root"))}catch(a){alert("Oops!! Liga o servidor Node.js!")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cordova?document.addEventListener("deviceready",Ee,!1):Ee()}},[[47,1,2]]]);
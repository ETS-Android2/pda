(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{213:function(e,t,a){e.exports=a(434)},433:function(e,t,a){},434:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a.n(n),o=a(10),r=(a(215),a(224),a(0)),s=a.n(r),l=a(203),m=a.n(l),i=a(2),u=(a(212),a(83)),f=a(3),d=a(8),p=a.n(d),b=a(204),E=s.a.forwardRef((function(e,t){var a=e.visible,n=e.setVisible,c=e.visibleCallback,o=e.children,l=Object(b.a)().t,m=Object(r.useState)(a),u=Object(i.a)(m,2),f=u[0],d=u[1];return Object(r.useEffect)((function(){d(a)}),[a]),Object(r.useEffect)((function(){c&&c(f)}),[f]),s.a.createElement("section",{className:"w3-modal famo-modal "+(f?"w3-show":""),onClick:function(e){return n(!1)}},s.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},o),s.a.createElement("div",{className:"famo-buttons"},s.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:l("key_200"),onClick:function(e){return function(e){e.stopPropagation(),n(!1)}(e)}},s.a.createElement("span",{className:"fas fa-times"}))))})),h=a(102),v=a.n(h);var N=function(e){var t=e.text,a=Object(r.useState)(!1),n=Object(i.a)(a,2),c=n[0],o=n[1];return s.a.createElement("div",{className:"famo-title "+(c?"collapsed":"")},s.a.createElement("span",{className:"famo-text-13",onClick:function(e){o(!c)}},t))};function y(e){var t=e.hide;return s.a.createElement("div",{className:"pda-app-loader "+(t?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function k(e){var t=e.hide;return s.a.createElement("div",{className:"famo-loader-wrapper "+(t?"hide":"")},s.a.createElement("div",{className:"famo-loader"}))}function x(e){var t="?timestamp="+(new Date).getTime();for(var a in e){var n=e[a];if(Array.isArray(n))for(var c=0,o=n.length;c<o;c++)t+="&"+a+"="+(null===n[c]?"":encodeURIComponent(n[c]));else t+="&"+a+"="+(null===n?"":encodeURIComponent(n))}return t}function O(e,t){var a=document.createElement("script");a.async=!0,a.src=e,a.type="text/javascript",t.current.appendChild(a)}var j="file:"===window.location.protocol?"http://192.168.3.109:9070/":window.location.protocol+"//"+window.location.hostname+":9070/";function g(e){fetch(j+"Log/Http/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function w(e){fetch(j+"Log/Promise/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var C=a(42),_=a(54),S=a(45),P=a.n(S);function D(e){return e?e.toString().replace(new RegExp("\\"+P.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+P.a.localeData().delimiters.decimal,"g"),"."):e}function T(){return(T=Object(o.a)(c.a.mark((function e(t,a){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.current.selectionStart,o=a.current.value,110===t.keyCode&&(t.preventDefault(),a.current.value=o.substr(0,n)+P.a.localeData().delimiters.decimal+o.substr(n,o.length-1));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){switch(e){case"POR":P.a.locale("pt-pt");break;case"ENG":P.a.locale("en");break;case"ESP":P.a.locale("es-es");break;case"FRA":P.a.locale("fr")}}window.numeral=P.a;var A=s.a.forwardRef((function(e,t){var a=Object(b.a)().t,n=e.className,c=e.isDisabled,o=e.isNumber,l=e.name,m=e.value,u=e.autoFocus,d=e.noData,p=e.wrongFormat,E=e.invalidValue,h=e.invalidMessage,v=e.analyze,N=e.set,y=e.children,k=Object(r.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),x=Object(i.a)(k,2),O=x[0],j=x[1],g=s.a.Children.count(y)>0;return Object(r.useEffect)((function(){if(!c&&v){var e=m;N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?o&&e&&(e=D(e),isNaN(e)?N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!1,wrongFormat:!1,invalidValue:!0})}))):N((function(e){return Object(f.a)(Object(f.a)({},e),{},{noData:!0,wrongFormat:!1,invalidValue:!1})})),N((function(e){return Object(f.a)(Object(f.a)({},e),{},{localAnalyze:!0})}))}}),[v]),Object(r.useEffect)((function(){j({noData:d,wrongFormat:p,invalidValue:E})}),[d,p,E]),s.a.createElement(s.a.Fragment,null,g?s.a.createElement("select",{className:n+(O.noData?" famo-input-error":""),name:l,ref:t,disabled:c,onChange:function(e){return N((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:t.current.value})}))}},y):s.a.createElement("input",{type:"text",className:n+(O.noData?" famo-input-error":O.wrongFormat||O.invalidValue?" famo-input-warning":""),name:l,value:m,ref:t,autoFocus:u,disabled:c,onKeyDown:function(e){o&&function(e,t){T.apply(this,arguments)}(e,t)},onChange:function(e){return N((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:t.current.value})}))}}),!g&&s.a.createElement(s.a.Fragment,null,!c&&s.a.createElement("div",{className:"famo-input-message "+(O.wrongFormat?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},a("key_808"))),h&&!c&&s.a.createElement("div",{className:"famo-input-message "+(O.invalidValue?"":"hide")},s.a.createElement("span",{className:"famo-text-15"},h))))})),I=function(){function e(){Object(C.a)(this,e)}return Object(_.a)(e,null,[{key:"analyze",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!0})}))}))}},{key:"areAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.localAnalyze}))}},{key:"areValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(D(e.value)):e.value}},{key:"popUpAlerts",value:function(e,t){e.some((function(e){return e.noData}))&&V.noData(t),e.some((function(e){return e.wrongFormat}))&&V.wrongFormat(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),t),e.some((function(e){return e.invalidValue}))&&V.invalidValue(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),t)}},{key:"resetValidations",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{analyze:!1,localAnalyze:!1})}))}))}},{key:"resetValues",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,selfAnalyze:!1})}))}))}}]),e}(),V=function(){function e(){Object(C.a)(this,e)}return Object(_.a)(e,null,[{key:"invalidValue",value:function(e,t){for(var a=t("key_192"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}},{key:"noData",value:function(e){alert(e("key_197"))}},{key:"wrongFormat",value:function(e,t){for(var a=t("key_191"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}}]),e}(),B=A,R=a(18),L=function(){function e(){Object(C.a)(this,e)}return Object(_.a)(e,null,[{key:"clear",value:function(e){e?e.pallet||window.sessionStorage.removeItem("SS_PALLET"):window.sessionStorage.clear()}}]),e}(),U=a(210),z={setAndroidApp:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{androidApp:t}))},setAuthUser:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{authUser:t}))},setLoadPage:function(e,t){e.setState(Object(f.a)(Object(f.a)({},e.state),{},{loadPage:t}))}},M=Object(U.a)(s.a,{androidApp:!1,authUser:null,loadPage:!1},z);function K(e){var t=Object(b.a)().t,a=e.history,n=M(),l=Object(i.a)(n,2)[1],m=[t("key_87"),t("key_138"),"Box's"],u=Object(r.useState)([]),f=Object(i.a)(u,2),d=f[0],E=f[1];return Object(r.useEffect)((function(){l.setLoadPage(!0),fetch(j+"ERP/Shipments"+x({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){E(e)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:g(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){l.setLoadPage(!1)})),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:t("key_878")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-content-grid shipments"},s.a.createElement("div",{className:"famo-row famo-header-row"},m.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),d.map((function(e,n){return s.a.createElement("div",{key:n,className:"famo-row famo-body-row",onClick:function(t){return n=e.Code,void a.push("/Expedition/Edit?shipmentCode="+n);var n}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10 "+(e.Description?"":"famo-color-yellow")},e.Description?e.Description:t("key_237"))),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.PickedBoxes+"/"+e.TotalBoxes)))}))))))}function G(e){var t=Object(b.a)().t,a=e.location,n=e.history,l=M(),m=Object(i.a)(l,2),d=m[0],h=m[1],y=v.a.parse(a.search),O=y.shipmentCode,C=Object(r.useState)(),_=Object(i.a)(C,2),S=_[0],P=_[1],D=Object(r.useState)({ref:s.a.createRef(),label:"Box",className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),T=Object(i.a)(D,2),F=T[0],A=T[1],I=[t("key_179"),t("key_54"),"Box's"],V=Object(r.useState)([]),R=Object(i.a)(V,2),U=R[0],z=R[1],K=Object(r.useState)([]),G=Object(i.a)(K,2),J=G[0],q=G[1],H=Object(r.useState)(!1),Y=Object(i.a)(H,2),W=Y[0],Q=Y[1],X=Object(r.useState)(!1),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(r.useState)(!1),ae=Object(i.a)(te,2),ne=ae[0],ce=ae[1],oe=[t("key_87"),t("key_138"),"Box",""],re=Object(r.useState)([[]]),se=Object(i.a)(re,2),le=se[0],me=se[1];function ie(){A((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),F.ref.current.focus()}function ue(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.querySelector(".fas").classList.remove("hide"),e.querySelector('span[class*="famo-text-"]').classList.add("hide"),fetch(j+"ERP/Shipments/Products/Components"+x({orderCode:a,orderLine:n}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){ce(!0),me(e)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:g(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){ce(!0),e.querySelector(".fas").classList.add("hide"),e.querySelector('span[class*="famo-text-"]').classList.remove("hide")}))}function fe(){if(F.value.startsWith("PL")){var e=F.value.match(/PL.*?\//g);Q(!0),fetch(j+"ERP/Pallets/Boxes"+x({shipmentCode:y.shipmentCode,palletID:e?parseInt(e[0].replace("PL","").replace("/","")):-1}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){e.forEach((function(e){J.some((function(t){return t.Code!==e.Code}))&&q([e].concat(Object(u.a)(J)))}))})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:g(a),alert(a.status===p.a.NOT_FOUND?t("key_873"):t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){ie(),Q(!1)}))}else J&&J.some((function(e){return e.Code===F.value}))?alert(t("key_874")):(Q(!0),fetch(j+"ERP/Shipments/Boxes"+x({shipmentCode:y.shipmentCode,boxCode:F.value}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){q([e].concat(Object(u.a)(J)))})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=16;break;case 5:if(g(a),a.status!==p.a.NOT_FOUND){e.next=10;break}alert(t("key_872")),e.next=16;break;case 10:if(a.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,a.json().then((function(e){"box"===e.reason?alert(t("key_871")):"pallet"===e.reason&&alert(t("key_828"))})).catch((function(e){w(e),alert(t("key_416"))}));case 13:e.next=16;break;case 15:alert(t("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){ie(),Q(!1)})))}return Object(r.useEffect)((function(){A((function(e){return Object(f.a)(Object(f.a)({},e),{},{isDisabled:$})}))}),[$]),Object(r.useEffect)((function(){h.setLoadPage(!0);var e=fetch(j+"ERP/Shipments"+x({code:O}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){P(e)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=8;break;case 5:g(a),alert(a.status===p.a.NOT_FOUND?t("key_825"):t("key_303")),n.replace("/Expedition");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})),a=fetch(j+"ERP/Shipments/Products"+x({shipmentCode:O}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){z(e)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:g(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))}));Promise.all([e,a]).finally((function(){h.setLoadPage(!1)})),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"container famo-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-xl-8"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),fe()}},!d.androidApp&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},t("key_822"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10"},y.shipmentCode)))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},t("key_138"))),s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"famo-input"},s.a.createElement("span",{className:"famo-text-10 "+(S&&S.Description?"":"famo-color-yellow")},S&&S.Description?S.Description:t("key_237")))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},"Box")),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},F,{set:A})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:W||$,onClick:function(e){return ie()}},s.a.createElement("span",{className:"famo-text-12"},t("key_829"))),!d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:W||$,onClick:function(e){return fe()}},s.a.createElement("span",{className:"famo-text-12"},t("key_815"))))))))),!d.androidApp&&s.a.createElement("div",{className:"col-12 col-xl-4"},s.a.createElement("section",{id:"special-consults",className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!$}),s.a.createElement("div",{className:"famo-grid rating-panel "+($?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-center"},s.a.createElement("span",{className:"famo-text-23 famo-color-green"},U.reduce((function(e,t){return 1===t.Status?e+t.TotalBoxes:e}),0)),s.a.createElement("span",{className:"famo-text-23"},"/",U.reduce((function(e,t){return e+t.TotalBoxes}),0)))))))))),s.a.createElement("section",{className:"container famo-wrapper expedition-details"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:t("key_876")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!$}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+($?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},I.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)+" "+(t===I.length-1?"text-center":"")},s.a.createElement("span",{className:"famo-text-11"},e))}))),U.filter((function(e){return 0===e.Status})).map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button famo-loader-button text-left",onClick:function(t){return ue(t.currentTarget,e.OrderCode)}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(e.PendingBoxes>0?"famo-color-red":"")+" hide"}),s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.OrderCode))),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.ProductCode)),s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.ProductDescription))),s.a.createElement("div",{className:"famo-cell famo-col-3 text-center"},s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button famo-loader-button",onClick:function(t){return ue(t.currentTarget,e.OrderCode,e.OrderLine)}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(e.PendingBoxes>0?"famo-color-red":"")+" hide"}),s.a.createElement("span",{className:"famo-text-10 "+(e.PendingBoxes>0?"famo-color-red":"")},e.PendingBoxes,"/",e.TotalBoxes))))})))))),s.a.createElement("div",{className:"col-12 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:t("key_879")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!W&&!$}),s.a.createElement("div",{className:"famo-grid "+(W||$?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button famo-confirm-button button-save-boxes",disabled:W||$||0===J.length,onClick:function(e){return ee(!0),void fetch(j+"ERP/Shipments/Boxes"+x({shipmentCode:y.shipmentCode}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J.map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){z(e),q([])})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:g(a),alert(t("key_302"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){ie(),ee(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},t("key_220")))))),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-boxes "+(W||$?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},["Box's",""].map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e+(0===t?" ("+J.length+")":"")))}))),J.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return n=e.Code,void(window.confirm(t("key_880"))&&q(J.filter((function(e){return e.Code!==n}))));var n}},s.a.createElement("span",{className:"fas fa-trash-alt"}))))})))))),s.a.createElement("div",{className:"col-12 col-xl-5"},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:t("key_875")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!$}),s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-products "+($?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},I.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)+" "+(t===I.length-1?"text-center":"")},s.a.createElement("span",{className:"famo-text-11"},e))}))),U.filter((function(e){return 1===e.Status})).map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10"},e.ProductCode)),s.a.createElement("p",null,s.a.createElement("span",{className:"famo-text-10"},e.ProductDescription))),s.a.createElement("div",{className:"famo-cell famo-col-3 text-center"},s.a.createElement("span",{className:"famo-text-10"},e.TotalBoxes)))})))))))),s.a.createElement(E,{visible:ne,setVisible:ce},le.filter((function(e){return e.length>0})).map((function(e,a){var n=e[0].ProductCode,c=e[0].ProductDescription;return s.a.createElement("section",{key:a,className:"famo-wrapper"},s.a.createElement(N,{text:n+" - "+c}),s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-content-grid expedition-components"},s.a.createElement("div",{className:"famo-row famo-header-row"},oe.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),e.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.ComponentCode)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10 "+(e.ComponentDescription?"":"famo-color-yellow")},e.ComponentDescription?e.ComponentDescription:t("key_237"))),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.BoxCode)),s.a.createElement("div",{className:"famo-cell famo-col-4"},s.a.createElement("span",{className:"fas "+(e.BoxPrinted?"fa-check famo-color-green":"fa-times famo-color-red")})))})))))}))))}var J=Object(R.i)((function(){return s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/Expedition",render:function(e){return s.a.createElement(K,e)}}),s.a.createElement(R.b,{exact:!0,path:"/Expedition/Edit",render:function(e){return s.a.createElement(G,e)}}),s.a.createElement(R.b,{path:"/Expedition/*",render:function(){return s.a.createElement(R.a,{to:"/Expedition"})}}))})),q=a(66),H=a(435);var Y=Object(R.i)(Object(H.a)()((function(e){var t=e.t,a=Object(r.useState)({inventory:!1,pallet:!1,expedition:!1}),n=Object(i.a)(a,2),c=n[0],o=n[1],l=[{label:t("key_877"),key:"expedition",image:"btn-expedicao.png"},{label:t("key_826"),key:"pallet",image:"btn-palete.png"},{label:t("key_806"),key:"inventory",image:"btn-inventario.png"}];return Object(r.useEffect)((function(){L.clear()}),[]),c.expedition?s.a.createElement(R.a,{push:!0,to:"/Expedition"}):c.pallet?s.a.createElement(R.a,{push:!0,to:"/Pallet"}):c.inventory?s.a.createElement(R.a,{push:!0,to:"/Inventory"}):s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row",style:{justifyContent:"center"}},l.map((function(e,t){return s.a.createElement("div",{key:t,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},s.a.createElement("section",{className:"famo-wrapper",onClick:function(t){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(q.a)({},e.key,!0))}))}},s.a.createElement("div",{className:"famo-content"},s.a.createElement("div",{className:"famo-grid famo-menu-item"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-label text-center"},s.a.createElement("span",{className:"famo-text-19",title:e.label},e.label))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-menu-item-img text-center"},s.a.createElement("img",{src:j+"Images/"+e.image,alt:e.label})))))))}))))})));function W(e,t){function a(e){e.preventDefault(),document.removeEventListener("backbutton",a,!1)}document.addEventListener("backbutton",a,!1),window.cordova.plugins.barcodeScanner.scan((function(t){t.cancelled||(e(t),document.removeEventListener("backbutton",a,!1))}),(function(e){alert(t("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39,CODE_128",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}var Q=Object(R.i)(Object(H.a)()((function(e){var t=e.t,a=M(),n=Object(i.a)(a,2),l=n[0],m=n[1],u=Object(r.useState)({ref:s.a.createRef(),label:t("key_806"),className:"famo-input famo-text-10",name:"inventoryCode",value:"",isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),b=d[0],h=d[1],v=Object(r.useState)([]),y=Object(i.a)(v,2),C=y[0],_=y[1],S=Object(r.useState)(!1),P=Object(i.a)(S,2),D=P[0],T=P[1],F=Object(r.useState)(),A=Object(i.a)(F,2),V=A[0],R=A[1],U=Object(r.useState)({label:t("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!0}),z=Object(i.a)(U,2),K=z[0],G=z[1],J=Object(r.useState)({label:t("key_464"),className:"famo-input famo-text-10",name:"productVariantCode",value:"",isNumber:!1,isDisabled:!0}),q=Object(i.a)(J,2),H=q[0],Y=q[1],Q=Object(r.useState)({label:t("key_138"),className:"famo-input famo-text-10",name:"productDescription",value:"",isNumber:!1,isDisabled:!0}),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)({label:t("key_751"),className:"famo-input famo-text-10",name:"locationCode",value:"",isNumber:!1,isDisabled:!0}),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],ce=Object(r.useState)({ref:s.a.createRef(),label:t("key_347"),className:"famo-input famo-text-10",name:"quantity",value:"",isNumber:!0,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:t("key_13")}),oe=Object(i.a)(ce,2),re=oe[0],se=oe[1],le=[K,H,Z,ae,re],me=[G,Y,$,ne,se],ie=s.a.createRef(),ue=Object(r.useState)(!1),fe=Object(i.a)(ue,2),de=fe[0],pe=fe[1],be=Object(r.useState)({ref:s.a.createRef(),label:t("key_87"),className:"famo-input famo-text-10",name:"productCode",value:"",isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),Ee=Object(i.a)(be,2),he=Ee[0],ve=Ee[1],Ne=[he],ye=[ve];function ke(){I.resetValues(le,me),R(null)}function xe(e){var a=e.split("/"),n=a[0],r="";a.length>1&&(r=a[1]),ke(),T(!0),fetch(j+"ERP/Inventories/Products"+x({inventoryCode:b.value,productCode:n,productVariantCode:r}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){R(e),G((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductCode})})),Y((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductVariantCode})})),$((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.ProductDescription})})),ne((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.LocationCode})}))})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:g(a),alert(a.status===p.a.NOT_FOUND?t("key_809"):t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){T(!1)}))}function Oe(){I.analyze(Ne,ye)}return Object(r.useEffect)((function(){m.setLoadPage(!0),1===Object.keys(window.numeral.locales).length&&(O("http://www.famo-code.com/Scripts/numeral/locales/pt-pt.js?version=27",ie),O("http://www.famo-code.com/Scripts/numeral/locales/es-es.js?version=27",ie),O("http://www.famo-code.com/Scripts/numeral/locales/fr.js?version=27",ie)),fetch(j+"ERP/Inventories"+x({}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){_(e)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=7;break;case 5:g(a),alert(t("key_303"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){m.setLoadPage(!1)})),L.clear()}),[]),Object(r.useEffect)((function(){ke()}),[b]),Object(r.useEffect)((function(){I.areAnalyzed(le)&&(I.areValid(le)?(T(!0),fetch(j+"ERP/Inventories/Products"+x({documentCode:V.Code,productCode:V.ProductCode,productVariantCode:V.ProductVariantCode,locationCode:V.LocationCode,quantity:I.getValue(re)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(ke(),alert(t("key_805"))):(g(e),alert(t("key_302")))})).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){T(!1)}))):I.popUpAlerts(le,t),I.resetValidations(le,me))}),le),Object(r.useEffect)((function(){I.areAnalyzed(Ne)&&(I.areValid(Ne)&&(xe(he.value),pe(!1)),I.resetValidations(Ne,ye))}),Ne),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper",ref:ie},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},b.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},b,{isDisabled:D,set:h}),s.a.createElement("option",{key:""}),C.map((function(e,t){return s.a.createElement("option",{key:t,value:e.Code},e.Name)})))))),b.value&&s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:D,onClick:function(e){return pe(!0)}},s.a.createElement("span",{className:"famo-text-12"},t("key_807"))),l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:D,onClick:function(e){W((function(e){xe(e.text)}),t)}},s.a.createElement("span",{className:"famo-text-12"},t("key_681")))))))),(V||D)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:t("key_339")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!D}),s.a.createElement("form",{className:"famo-grid famo-form-grid "+(D?"hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},K.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,K))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},H.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,H))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},Z.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Z))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},ae.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,ae))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},re.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},re,{set:se}))))),s.a.createElement("div",{className:"famo-grid famo-buttons "+(D?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){I.analyze(le,me)}},s.a.createElement("span",{className:"famo-text-12"},t("key_810")))))))),s.a.createElement(E,{visible:de,setVisible:pe,visibleCallback:function(e){e?he.ref.current.focus():I.resetValues(Ne,ye)}},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){return Oe()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},he.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},he,{set:ve})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return Oe()}},s.a.createElement("span",{className:"famo-text-12"},t("key_701"))),s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return pe(!1)}},s.a.createElement("span",{className:"famo-text-12"},t("key_484"))))))))))})));function X(e){var t=Object(b.a)().t,a=e.history,n=M(),l=Object(i.a)(n,1)[0],m=window.sessionStorage.getItem("SS_PALLET"),u=Object(r.useState)({ref:s.a.createRef(),label:t("key_822"),className:"famo-input famo-text-10",name:"shipmentCode",value:m?JSON.parse(window.sessionStorage.getItem("SS_PALLET")).shipmentCode:"",autoFocus:!0,isNumber:!1,isDisabled:!1}),d=Object(i.a)(u,2),E=d[0],h=d[1],v=Object(r.useState)(),y=Object(i.a)(v,2),O=y[0],C=y[1],_=Object(r.useState)(!1),S=Object(i.a)(_,2),P=S[0],D=S[1],T=[t("key_279")],F=Object(r.useState)(null),A=Object(i.a)(F,2),I=A[0],V=A[1];function R(e){var a=!1;D(!0),fetch(j+"ERP/Pallets"+x({shipmentCode:e}),{method:"GET",credentials:"include"}).then(function(){var n=Object(o.a)(c.a.mark((function n(o){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o.ok||o.status!==p.a.OK){n.next=5;break}return n.next=3,o.json().then((function(t){a=!0,C(e),V(t)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:n.next=7;break;case 5:g(o),alert(o.status===p.a.NOT_FOUND?t("key_825"):t("key_303"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){D(!1),a||V(null)}))}function U(e){window.sessionStorage.setItem("SS_PALLET",JSON.stringify({shipmentCode:O})),a.push("/Pallet/Edit?shipmentCode="+O+(e?"&palletID="+e:""))}return Object(r.useEffect)((function(){m&&R(E.value),L.clear()}),[]),s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),R(E.value)}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},E.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},E,{set:h})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},l.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:P,onClick:function(e){W((function(e){h((function(t){return Object(f.a)(Object(f.a)({},t),{},{value:e.text})})),R(e.text)}),t)}},s.a.createElement("span",{className:"famo-text-12"},t("key_681"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:P,onClick:function(e){return h((function(e){return Object(f.a)(Object(f.a)({},e),{},{value:""})})),void E.ref.current.focus()}},s.a.createElement("span",{className:"famo-text-12"},t("key_829"))),s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:P,onClick:function(e){return R(E.value)}},s.a.createElement("span",{className:"famo-text-12"},t("key_323")))))))),(I||P)&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:t("key_826")}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!P}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallets "+(P?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},T.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),I&&I.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-row famo-body-row",onClick:function(t){return U(e.ID)}},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.ID)))}))),s.a.createElement("div",{className:"famo-grid famo-buttons "+(P?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){return U()}},s.a.createElement("span",{className:"famo-text-12"},t("key_817")))))))))}function Z(e){var t=Object(b.a)().t,a=e.location,n=e.history,l=M(),m=Object(i.a)(l,2),d=m[0],h=m[1],y=v.a.parse(a.search),O=Object(r.useState)(y.palletID),C=Object(i.a)(O,2),_=C[0],S=C[1],P=Object(r.useState)(!0),D=Object(i.a)(P,2),T=D[0],F=D[1],A=Object(r.useState)(!1),V=Object(i.a)(A,2),U=V[0],z=V[1],K=[t("key_87"),t("key_179"),""],G=Object(r.useState)([]),J=Object(i.a)(G,2),q=J[0],H=J[1],Y=Object(r.useState)(!1),Q=Object(i.a)(Y,2),X=Q[0],Z=Q[1],$=Object(r.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=Object(r.useState)(!1),ce=Object(i.a)(ne,2),oe=ce[0],re=ce[1],se=Object(r.useState)(!1),le=Object(i.a)(se,2),me=le[0],ie=le[1],ue=Object(r.useState)({ref:s.a.createRef(),label:"Box",className:"famo-input famo-text-10",name:"boxCode",value:"",autoFocus:!0,isNumber:!1,isDisabled:!1,analyze:!1,localAnalyze:!1,noData:!1}),fe=Object(i.a)(ue,2),de=fe[0],pe=fe[1],be=[de],Ee=[pe];function he(e){q.some((function(t){return t.Code===e}))?alert(t("key_814")):(Z(!0),fetch(j+"ERP/Shipments/Boxes"+x({shipmentCode:y.shipmentCode,boxCode:e}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){e.isNew=!0,H([].concat(Object(u.a)(q),[e]))})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=16;break;case 5:if(g(a),a.status!==p.a.NOT_FOUND){e.next=10;break}alert(t("key_872")),e.next=16;break;case 10:if(a.status!==p.a.FORBIDDEN){e.next=15;break}return e.next=13,a.json().then((function(e){"box"===e.forbidType?alert(t("key_871")):"pallet"===e.forbidType&&alert(t("key_828"))})).catch((function(e){w(e),alert(t("key_416"))}));case 13:e.next=16;break;case 15:alert(t("key_303"));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){Z(!1)})))}function ve(){T&&q.some((function(e){return e.isNew}))?alert(t("key_821")):(re(!0),fetch(j+"ERP/Pallets/"+(T?"Close":"Reopen")+x(T?{shipmentCode:y.shipmentCode,palletID:_||-1}:{palletID:_||-1}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q.map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===p.a.OK?(alert(t(T?"key_812":"key_813")),F(!T)):(g(e),alert(t("key_302")))})).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){re(!1)})))}function Ne(){I.analyze(be,Ee)}return Object(r.useEffect)((function(){y.palletID&&(h.setLoadPage(!0),fetch(j+"ERP/Pallets/Boxes"+x({shipmentCode:y.shipmentCode,palletID:y.palletID}),{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){z(e.some((function(e){return e.IsShipped}))),F(e.some((function(e){return e.IsPalletOpen}))),e.forEach((function(e){e.isNew=!1})),H(e)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:e.next=8;break;case 5:g(a),alert(a.status===p.a.NOT_FOUND?t("key_873"):t("key_303")),n.replace("/Pallet");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){h.setLoadPage(!1)}))),L.clear({pallet:!0})}),[]),Object(r.useEffect)((function(){I.areAnalyzed(be)&&(I.areValid(be)&&(he(de.value),I.resetValues(be,Ee),de.ref.current.focus()),I.resetValidations(be,Ee))}),be),y.shipmentCode?s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement(N,{text:"Box's"}),s.a.createElement("div",{className:"famo-content"},s.a.createElement(k,{hide:!te}),s.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes "+(te?"hide":"")},s.a.createElement("div",{className:"famo-row famo-header-row"},K.map((function(e,t){return s.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},s.a.createElement("span",{className:"famo-text-11"},e))}))),q.map((function(e,a){return s.a.createElement("div",{key:a,className:"famo-row famo-body-row"},s.a.createElement("div",{className:"famo-cell famo-col-1"},s.a.createElement("span",{className:"famo-text-10"},e.Code)),s.a.createElement("div",{className:"famo-cell famo-col-2"},s.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),s.a.createElement("div",{className:"famo-cell famo-col-3"},s.a.createElement("span",{className:"famo-text-10"},e.isNew&&s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(a){return n=e.Code,void(window.confirm(t("key_880"))&&H(q.filter((function(e){return e.Code!==n}))));var n}},s.a.createElement("span",{className:"fas fa-trash-alt"})))))}))),!U&&T&&s.a.createElement("div",{className:"famo-grid famo-buttons "+(te?"hide":"")},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||oe,onClick:function(e){return ie(!0)}},s.a.createElement("span",{className:"famo-text-12"},t("key_815")+" ("+t("key_807").toLowerCase()+")")),d.androidApp&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||oe,onClick:function(e){W((function(e){he(e.text)}),t)}},s.a.createElement("span",{className:"famo-text-12"},t("key_815")+" ("+t("key_681").toLowerCase()+")"))))))),q.length>0&&!U&&s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-grid"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},T?s.a.createElement(s.a.Fragment,null,q.some((function(e){return e.isNew}))&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:X||te||oe,onClick:function(e){return ae(!0),void fetch(j+"ERP/Pallets/Boxes"+x({shipmentCode:y.shipmentCode,palletID:_||-1}),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(q.filter((function(e){return e.isNew})).map((function(e){return e.Code}))),credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=6;break}return e.next=3,a.json().then((function(e){S(e.palletID)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:H(q.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isNew:!1})}))),e.next=8;break;case 6:g(a),alert(t("key_302"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))})).finally((function(){ae(!1)}))}},s.a.createElement("span",{className:"famo-text-12"},t("key_220"))),s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:X||te||oe,onClick:function(e){return ve()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(oe?"":"hide")}),s.a.createElement("span",{className:"famo-text-12 "+(oe?"hide":"")},t("key_200")))):s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:X||te||oe,onClick:function(e){return ve()}},s.a.createElement("span",{className:"fas fa-spinner fa-spin "+(oe?"":" hide")}),s.a.createElement("span",{className:"famo-text-12 "+(oe?"hide":"")},t("key_827"))))))),s.a.createElement(E,{visible:me,setVisible:ie,visibleCallback:function(e){e?de.ref.current.focus():I.resetValues(be,Ee)}},s.a.createElement("section",{className:"famo-wrapper"},s.a.createElement("div",{className:"famo-content"},s.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:function(e){return Ne()}},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-input-label"},s.a.createElement("span",{className:"famo-text-11"},de.label)),s.a.createElement("div",{className:"famo-cell"},s.a.createElement(B,Object.assign({},de,{set:pe})))),s.a.createElement("input",{type:"submit",className:"hide",value:""})),s.a.createElement("div",{className:"famo-grid famo-buttons"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell text-right"},s.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return Ne()}},s.a.createElement("span",{className:"famo-text-12"},t("key_701"))),s.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return ie(!1)}},s.a.createElement("span",{className:"famo-text-12"},t("key_484")))))))))):s.a.createElement(R.a,{to:"/Pallet"})}var $=Object(R.i)((function(){return s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/Pallet",render:function(e){return s.a.createElement(X,e)}}),s.a.createElement(R.b,{exact:!0,path:"/Pallet/Edit",render:function(e){return s.a.createElement(Z,e)}}),s.a.createElement(R.b,{path:"/Pallet/*",render:function(){return s.a.createElement(R.a,{to:"/Pallet"})}}))})),ee=a(138),te=a(137);function ae(e,t,a){fetch(j+"Platform/Android"+x({}),{method:"GET",credentials:"include"}).then(function(){var n=Object(o.a)(c.a.mark((function n(o){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o.ok||o.status!==p.a.OK){n.next=5;break}return n.next=3,o.json().then((function(a){F(e.Language.Code),t.setAndroidApp(a),t.setAuthUser(e)})).catch((function(e){w(e),alert(a("key_416"))}));case 3:n.next=7;break;case 5:g(o),alert(a("key_303"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){w(e),alert(a("key_416"))}))}function ne(e,t){ce.autoSignIn().then(function(){var a=Object(o.a)(c.a.mark((function a(n){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.ok||n.status!==p.a.OK){a.next=5;break}return a.next=3,n.json().then((function(a){ae(a,e,t)})).catch((function(e){w(e),alert(t("key_416"))}));case 3:a.next=7;break;case 5:g(n),alert(t("key_306"));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){w(e),alert(t("key_416"))}))}var ce=function e(){Object(C.a)(this,e)};ce.signIn=function(){var e=Object(o.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(j+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a}),credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce.autoSignIn=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(j+"Authentication/AutoSignIn"+x({}),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)}))),ce.signOut=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(j+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));var oe=a(103),re=a.n(oe),se=a(209),le=a(211),me=a(84);se.a.use(le.a).use(me.e).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:"http://192.168.3.109:9070/JSON/i18n/{{lng}}.json"+x({}),crossDomain:!0}});var ie=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).usernameRef=void 0,n.hideInputMsg=function(e){return"signin-error-input "+(e?"hide":"")},n.handleChangeInput=function(e){n.setState(Object(q.a)({},e.target.name,e.target.value))},n.handleUserInput=function(e){e.target.value||n.setState({hideUserMsg:"blur"!==e.type})},n.handlePwdInput=function(e){e.target.value||n.setState({hidePwdMsg:"blur"!==e.type})},n.handleSubmit=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,o,r,s,l,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=M(),o=Object(i.a)(a,2),r=o[1],n.state.username&&n.state.password){e.next=6;break}n.setState({hideUserMsg:!!n.state.username,hidePwdMsg:!!n.state.password}),e.next=24;break;case 6:return e.next=8,ce.signIn(n.state.username,n.state.password);case 8:if(s=e.sent,l=n.props.t,n.setState({authError:!1,authHttpCode:-1}),!s.ok){e.next=20;break}return n.setState({authSuccess:!0}),e.t0=r,e.next=16,s.json();case 16:e.t1=e.sent,e.t0.setAuthUser.call(e.t0,e.t1),e.next=24;break;case 20:400!==(m=s.status)&&500!==m&&console.log(l("key_416")+" - "+m),n.usernameRef.current.focus(),n.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:m});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},n.usernameRef=s.a.createRef(),n}return Object(_.a)(a,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=re()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),t=re()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),a=re()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,o=n.location;return this.state.authSuccess?s.a.createElement(R.a,{to:o.state||{from:{pathname:"/"}}}):s.a.createElement("section",{className:"famo-grid signin"},s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell"},s.a.createElement("div",{className:"signin-body"},s.a.createElement("div",{className:"signin-famo-logo"},s.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),s.a.createElement("div",{className:"signin-form"},s.a.createElement("div",{className:"signin-app-name"},s.a.createElement("span",{className:"famo-text-2"},"PDA")),s.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),s.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),s.a.createElement("div",{className:"signin-input-wrapper"},s.a.createElement("input",{type:"password",id:"signin-password-input",className:t,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),s.a.createElement(ue,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),s.a.createElement("div",{className:a},this.state.authError&&400===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&s.a.createElement("span",{className:"famo-text-7"},c("key_306"))),s.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},s.a.createElement("span",{className:"famo-text-5"},c("key_238"))),s.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},s.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),s.a.createElement("div",{className:"famo-row"},s.a.createElement("div",{className:"famo-cell famo-cell-bottom"},s.a.createElement("div",{className:"signin-footer text-center"},s.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),a}(s.a.Component),ue=function(e){Object(ee.a)(a,e);var t=Object(te.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props,t=e.msgClass,a=e.msgText;return s.a.createElement("div",{className:t},s.a.createElement("span",{className:"famo-text-7"},a))}}]),a}(s.a.Component),fe=(Object(H.a)()(ie),a(58));a(433);function de(e){var t=e.t,a=Object(R.g)(),n=Object(R.h)(),l=M(),m=Object(i.a)(l,2),u=m[0],f=m[1],d=Object(r.useState)(!1),b=Object(i.a)(d,2),E=b[0],h=b[1];return Object(r.useEffect)((function(){fetch(j+"Authentication/Session/User",{method:"GET",credentials:"include"}).then(function(){var e=Object(o.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.ok||a.status!==p.a.OK){e.next=5;break}return e.next=3,a.json().then((function(e){ae(e,f,t)})).catch((function(e){ne(f,t),w(e)}));case 3:e.next=7;break;case 5:ne(f,t),g(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){ne(f,t),w(e)}))}),[]),Object(r.useEffect)((function(){h("/"!==n.pathname)}),[n.pathname]),s.a.createElement("section",{className:"famo-body"},s.a.createElement(R.d,null,s.a.createElement(R.b,{exact:!0,path:"/",render:function(){return s.a.createElement(Y,null)}}),s.a.createElement(R.b,{path:"/Inventory",render:function(){return s.a.createElement(Q,null)}}),s.a.createElement(R.b,{path:"/Pallet",render:function(){return s.a.createElement($,null)}}),s.a.createElement(R.b,{path:"/Expedition",render:function(){return s.a.createElement(J,null)}})),s.a.createElement(y,{hide:u.authUser&&!u.loadPage}),!u.androidApp&&E&&s.a.createElement("button",{type:"button",className:"famo-button famo-normal-button pda-back-button "+(u.authUser&&!u.loadPage?"":"hide"),onClick:function(e){return a.goBack()}},s.a.createElement("span",{className:"fas fa-arrow-left"})))}var pe=Object(H.a)()((function(e){return s.a.createElement(fe.a,{basename:"/"},s.a.createElement(de,e))}));function be(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",m.a.render(s.a.createElement(r.Suspense,{fallback:s.a.createElement(y,{hide:!0})},s.a.createElement(pe,null)),document.getElementById("root"))}catch(t){alert("Ouch!! Please turn on Node.js server!")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cordova?document.addEventListener("deviceready",be,!1):be()}},[[213,1,2]]]);
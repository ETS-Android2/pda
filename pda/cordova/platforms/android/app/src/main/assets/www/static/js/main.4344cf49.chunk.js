(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{46:function(e,t,a){e.exports=a(77)},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a.n(n),r=a(0),o=a.n(r),l=a(35),s=a.n(l),i=(a(45),a(1)),m=a(2),u=a(17),f=a(4);var d=Object(u.g)(Object(f.c)()((function(e){var t=e.t,a=Object(r.useState)({inventory:!1,pallet:!1}),n=Object(i.a)(a,2),c=n[0],l=n[1];return c.inventory?o.a.createElement(u.a,{push:!0,to:"/Inventory"}):c.pallet?o.a.createElement(u.a,{push:!0,to:"/Pallet"}):o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-content"},o.a.createElement("div",{className:"famo-grid famo-content-grid"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-center"},o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){l((function(e){return Object(m.a)({},e,{inventory:!0})}))}},o.a.createElement("span",{className:"famo-text-5"},t("key_806"))))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-center"},o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){l((function(e){return Object(m.a)({},e,{pallet:!0})}))}},o.a.createElement("span",{className:"famo-text-5"},"Paletes")))))))}))),p=a(6),b=a.n(p),E=a(16),v=a(22),h=a(14),N=a.n(h);function g(e){return e?e.toString().replace(new RegExp("\\"+N.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+N.a.localeData().delimiters.decimal,"g"),"."):e}window.numeral=N.a;var y,O=function(){function e(){Object(E.a)(this,e)}return Object(v.a)(e,null,[{key:"analyze",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(m.a)({},e,{analyze:!0})}))}))}},{key:"areAllAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.analyzeForm}))}},{key:"areAllValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(g(e.value)):e.value}},{key:"popUpAlerts",value:function(e,t){e.some((function(e){return e.noData}))&&w.noDataAlert(t),e.some((function(e){return e.wrongFormat}))&&w.wrongFormatAlert(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),t),e.some((function(e){return e.invalidValue}))&&w.invalidValuesAlert(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),t)}},{key:"resetValues",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(m.a)({},e,{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,analyzeForm:!1})}))}))}},{key:"resetValidations",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(m.a)({},e,{analyze:!1,analyzeForm:!1})}))}))}}]),e}(),w=function(){function e(){Object(E.a)(this,e)}return Object(v.a)(e,null,[{key:"invalidValuesAlert",value:function(e,t){for(var a=t("key_192"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}},{key:"noDataAlert",value:function(e){alert(e("key_197"))}},{key:"wrongFormatAlert",value:function(e,t){for(var a=t("key_191"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}}]),e}(),j=function(e){var t=Object(f.b)().t,a=e.className,n=e.isDisabled,l=e.isNumber,s=e.name,u=e.value,d=e.noData,p=e.wrongFormat,b=e.invalidValue,E=e.invalidMessage,v=e.analyze,h=e.set,y=e.children,O=Object(r.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),w=Object(i.a)(O,2),j=w[0],k=w[1],x=o.a.Children.count(y)>0,C=o.a.createRef();return Object(r.useEffect)((function(){if(!n&&v){var e=u;h((function(e){return Object(m.a)({},e,{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?l&&e&&(e=g(e),isNaN(e)?h((function(e){return Object(m.a)({},e,{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&h((function(e){return Object(m.a)({},e,{noData:!1,wrongFormat:!1,invalidValue:!0})}))):h((function(e){return Object(m.a)({},e,{noData:!0,wrongFormat:!1,invalidValue:!1})})),h((function(e){return Object(m.a)({},e,{analyzeForm:!0})}))}}),[v]),Object(r.useEffect)((function(){k({noData:d,wrongFormat:p,invalidValue:b})}),[d,p,b]),o.a.createElement(o.a.Fragment,null,x?o.a.createElement("select",{className:a+(j.noData?" famo-input-error":""),name:s,ref:C,disabled:n,onChange:function(e){return h((function(e){return Object(m.a)({},e,{value:C.current.value})}))}},y):o.a.createElement("input",{type:"text",className:a+(j.noData?" famo-input-error":j.wrongFormat||j.invalidValue?" famo-input-warning":""),name:s,value:u,ref:C,disabled:n,onKeyDown:function(e){l&&function(e,t){var a,n;c.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:a=t.current.selectionStart,n=t.current.value,110===e.keyCode&&(e.preventDefault(),t.current.value=n.substr(0,a)+N.a.localeData().delimiters.decimal+n.substr(a,n.length-1));case 2:case"end":return c.stop()}}))}(e,C)},onChange:function(e){return h((function(e){return Object(m.a)({},e,{value:C.current.value})}))}}),!x&&o.a.createElement(o.a.Fragment,null,!n&&o.a.createElement("div",{className:"famo-input-message"+(j.wrongFormat?"":" hide")},o.a.createElement("span",{className:"famo-text-15"},t("key_808"))),E&&!n&&o.a.createElement("div",{className:"famo-input-message"+(j.invalidValue?"":" hide")},o.a.createElement("span",{className:"famo-text-15"},E))))};!function(e){e[e.inventoryProduct=1]="inventoryProduct",e[e.palletBox=2]="palletBox"}(y||(y={}));var k=Object(f.c)()((function(e){var t=e.contentType,a=e.visible,n=e.setVisible,c=e.confirm,l=e.t,s=Object(r.useState)(a),m=Object(i.a)(s,2),u=m[0],f=m[1],d=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:l("key_87"),name:"productCode",value:"",noData:!1,analyze:!1,analyzeForm:!1}),p=Object(i.a)(d,2),b=p[0],E=p[1],v=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:"Mapa de carga",name:"cargoMapCode",value:"",noData:!1,analyze:!1,analyzeForm:!1}),h=Object(i.a)(v,2),N=h[0],g=h[1],w=function(){switch(t){case y.inventoryProduct:return[b];case y.palletBox:return[N]}}(),k=function(){switch(t){case y.inventoryProduct:return[E];case y.palletBox:return[g]}}();function x(){switch(t){case y.inventoryProduct:case y.palletBox:O.analyze(w,k)}}function C(e){e.preventDefault(),x()}return Object(r.useEffect)((function(){f(a),a||O.resetValues(w,k)}),[a]),Object(r.useEffect)((function(){if(O.areAllAnalyzed(w)){if(O.areAllValid(w))switch(t){case y.inventoryProduct:case y.palletBox:c(w[0].value),n(!1)}O.resetValidations(w,k)}}),w),o.a.createElement("section",{className:"w3-modal famo-modal"+(u?" w3-show":""),onClick:function(e){return n(!1)}},o.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},function(){switch(t){case y.inventoryProduct:case y.palletBox:return o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-content"},o.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:C},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},w[0].label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,Object.assign({},w[0],{set:k[0]})))),o.a.createElement("input",{type:"submit",className:"hide",value:""})),o.a.createElement("div",{className:"famo-grid famo-buttons"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-right"},o.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return x()}},o.a.createElement("span",{className:"famo-text-12"},l("key_701"))),o.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return n(!1)}},o.a.createElement("span",{className:"famo-text-12"},l("key_484"))))))))}}()),o.a.createElement("div",{className:"famo-buttons"},o.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:l("key_200"),onClick:function(e){e.stopPropagation(),n(!1)}},o.a.createElement("span",{className:"fas fa-times"}))))}));var x=function(e){var t=e.text,a=Object(r.useState)(!1),n=Object(i.a)(a,2),c=n[0],l=n[1];return o.a.createElement("div",{className:"famo-title"+(c?" collapsed":"")},o.a.createElement("span",{className:"famo-text-13",onClick:function(e){l(!c)}},t))};function C(e){var t=e.hide;return o.a.createElement("div",{className:"pda-app-loader"+(t?" hide":"")},o.a.createElement("div",{className:"famo-loader"}))}function D(e){var t=e.hide;return o.a.createElement("div",{className:"famo-loader-wrapper"+(t?" hide":"")},o.a.createElement("div",{className:"famo-loader"}))}function S(e){var t="?timestamp="+(new Date).getTime();for(var a in e){var n=e[a];if(Array.isArray(n))for(var c=0,r=n.length;c<r;c++)t+="&"+a+"="+(null===n[c]?"":encodeURIComponent(n[c]));else t+="&"+a+"="+(null===n?"":encodeURIComponent(n))}return t}function P(e,t){var a=document.createElement("script");a.async=!0,a.src=e,a.type="text/javascript",t.current.appendChild(a)}var _="pda",A="http://cpu-244.famo.pt:3030/";function F(e){fetch(A+"Log/Http/Errors?appName="+_+"&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function V(e){fetch(A+"Log/Promise/Errors?appName="+_+"&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var T=a(41),I={setAndroidApp:function(e,t){e.setState(Object(m.a)({},e.state,{androidApp:t}))},setAuthUser:function(e,t){e.setState(Object(m.a)({},e.state,{authUser:t}))},setLoadPage:function(e,t){e.setState(Object(m.a)({},e.state,{loadPage:t}))}},M=Object(T.a)(o.a,{androidApp:!1,authUser:null,loadPage:!1},I);var U=Object(u.g)(Object(f.c)()((function(e){var t=e.t,a=M(),n=Object(i.a)(a,2),c=n[0],l=n[1],s=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:t("key_806"),name:"inventoryCode",value:""}),u=Object(i.a)(s,2),f=u[0],d=u[1],p=Object(r.useState)([]),E=Object(i.a)(p,2),v=E[0],h=E[1],N=Object(r.useState)(!1),g=Object(i.a)(N,2),w=g[0],C=g[1],_=Object(r.useState)(!1),T=Object(i.a)(_,2),I=T[0],U=T[1],z=Object(r.useState)(null),R=Object(i.a)(z,2),B=R[0],L=R[1],H=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_87"),name:"productCode",value:""}),G=Object(i.a)(H,2),K=G[0],q=G[1],J=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_464"),name:"productVariantCode",value:""}),Y=Object(i.a)(J,2),Q=Y[0],W=Y[1],X=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_138"),name:"productDescription",value:""}),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_751"),name:"locationCode",value:""}),ae=Object(i.a)(te,2),ne=ae[0],ce=ae[1],re=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!0,label:t("key_347"),name:"quantity",value:"",noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:t("key_13"),analyze:!1,analyzeForm:!1}),oe=Object(i.a)(re,2),le=oe[0],se=oe[1],ie=[K,Q,$,ne,le],me=[q,W,ee,ce,se],ue=o.a.createRef();function fe(e){var a=e.split("/"),n=a[0],c="";a.length>1&&(c=a[1]),U(!0),de(),fetch(A+"ERP/Inventories/Products"+S({inventoryCode:f.value,productCode:n,productVariantCode:c}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===b.a.OK?e.json().then((function(e){L(e),q((function(t){return Object(m.a)({},t,{value:e.ProductCode})})),W((function(t){return Object(m.a)({},t,{value:e.ProductVariantCode})})),ee((function(t){return Object(m.a)({},t,{value:e.ProductDescription})})),ce((function(t){return Object(m.a)({},t,{value:e.LocationCode})}))})).catch((function(e){V(e),alert(t("key_416"))})):(F(e),alert(t("key_809")))})).catch((function(e){V(e),alert(t("key_416"))})).finally((function(){U(!1)}))}function de(){L(null),O.resetValues(ie,me)}return Object(r.useEffect)((function(){l.setLoadPage(!0),P("http://www.famo-code.com/Scripts/numeral/locales/pt-pt.js?version=27",ue),P("http://www.famo-code.com/Scripts/numeral/locales/es-es.js?version=27",ue),P("http://www.famo-code.com/Scripts/numeral/locales/fr.js?version=27",ue)}),[]),Object(r.useEffect)((function(){c.authUser&&fetch(A+"ERP/Inventories?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===b.a.OK?e.json().then((function(e){h(e),l.setLoadPage(!1)})).catch((function(e){V(e),alert(t("key_416"))})):(F(e),alert(t("key_303")))})).catch((function(e){V(e),alert(t("key_416"))}))}),[c.authUser]),Object(r.useEffect)((function(){de()}),[f]),Object(r.useEffect)((function(){O.areAllAnalyzed(ie)&&(O.areAllValid(ie)?(U(!0),fetch(A+"ERP/Inventories/Products"+S({documentCode:B.Code,productCode:B.ProductCode,productVariantCode:B.ProductVariantCode,locationCode:B.LocationCode,quantity:O.getValue(le)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===b.a.OK?(de(),alert(t("key_805"))):(F(e),alert(t("key_302")))})).catch((function(e){V(e),alert(t("key_416"))})).finally((function(){U(!1)}))):O.popUpAlerts(ie,t),O.resetValidations(ie,me))}),ie),o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"famo-wrapper",ref:ue},o.a.createElement("div",{className:"famo-content"},o.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},f.label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,Object.assign({},f,{isDisabled:I,set:d}),o.a.createElement("option",{key:""}),v.map((function(e,t){return o.a.createElement("option",{key:t,value:e.Code},e.Name)})))))))),(B||I)&&o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement(x,{text:t("key_339")}),o.a.createElement("div",{className:"famo-content"},o.a.createElement(D,{hide:!I}),o.a.createElement("form",{className:"famo-grid famo-form-grid"+(I?" hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},K.label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,K))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},Q.label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,Q))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},$.label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,$))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},ne.label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,ne))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},le.label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,Object.assign({},le,{set:se}))))),o.a.createElement("div",{className:"famo-grid famo-buttons"+(I?" hide":"")},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-right"},o.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){O.analyze(ie,me)}},o.a.createElement("span",{className:"famo-text-12"},t("key_810")))))))),f&&o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-grid"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-right"},o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I,onClick:function(e){return C(!0)}},o.a.createElement("span",{className:"famo-text-12"},t("key_807"))),c.androidApp?o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I,onClick:function(e){window.cordova.plugins.barcodeScanner.scan((function(e){e.cancelled||fe(e.text)}),(function(e){alert(t("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}},o.a.createElement("span",{className:"famo-text-12"},t("key_681"))):null)))),o.a.createElement(k,{contentType:y.inventoryProduct,visible:w,setVisible:C,confirm:fe}))}))),z=a(42),R=a.n(z);function B(){var e=Object(f.b)().t,t=M(),a=Object(i.a)(t,1)[0],n=Object(r.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:"Mapa de carga",name:"cargoMapCode",value:""}),c=Object(i.a)(n,2),l=c[0],s=c[1],u=Object(r.useState)(!1),d=Object(i.a)(u,2),p=d[0],E=d[1],v=Object(r.useState)(null),h=Object(i.a)(v,2),N=h[0],g=h[1],y=[e("key_279")];function O(){!function(e,t){window.cordova.plugins.barcodeScanner.scan((function(t){t.cancelled||e(t)}),(function(e){alert(t("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}((function(e){s((function(t){return Object(m.a)({},t,{value:e.text})})),w()}),e)}function w(){E(!0),g(null),fetch(A+"ERP/Pallets"+S({cargoMapCode:l.value}),{method:"GET",credentials:"include"}).then((function(t){t.ok&&t.status===b.a.OK?t.json().then((function(e){g(e)})).catch((function(t){V(t),alert(e("key_416"))})):(F(t),alert("O c\xf3digo n\xe3o corresponde a um mapa de carga."))})).catch((function(t){V(t),alert(e("key_416"))})).finally((function(){E(!1)}))}return o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-content"},o.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),w()}},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},l.label)),o.a.createElement("div",{className:"famo-cell"},o.a.createElement(j,Object.assign({},l,{set:s})))),o.a.createElement("input",{type:"submit",className:"hide",value:""})),o.a.createElement("div",{className:"famo-grid famo-buttons"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-right"},o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:p,onClick:function(e){return w()}},o.a.createElement("span",{className:"famo-text-12"},e("key_323")))))))),(N||p)&&o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement(x,{text:"Paletes"}),o.a.createElement("div",{className:"famo-content"},o.a.createElement(D,{hide:!p}),o.a.createElement("div",{className:"famo-grid famo-content-grid"+(p?" hide":"")},o.a.createElement("div",{className:"famo-row famo-header-row"},y.map((function(e,t){return o.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},o.a.createElement("span",{className:"famo-text-11"},e))}))),N&&N.map((function(e,t){return o.a.createElement("div",{key:t,className:"famo-row famo-body-row","data-id":e.ID},o.a.createElement("div",{className:"famo-cell famo-col-1"},o.a.createElement("span",{className:"famo-text-10"},e.ID)))}))))),o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-grid"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-right"},a.androidApp?o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:p,onClick:function(e){return O()}},o.a.createElement("span",{className:"famo-text-12"},e("key_681"))):null)))))}function L(e){var t=Object(f.b)().t,a=e.location,n=R.a.parse(a.search),c=(n.palletID,Object(r.useState)(!1)),l=Object(i.a)(c,2),s=l[0],m=(l[1],Object(r.useState)(!1)),d=Object(i.a)(m,2),p=d[0],b=d[1],E=[t("key_87"),t("key_138"),t("key_185"),""];return n.cargoMapCode?o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement(x,{text:"Embalagens"}),o.a.createElement("div",{className:"famo-content"},o.a.createElement(D,{hide:!s}),o.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes"+(s?" hide":"")},o.a.createElement("div",{className:"famo-row famo-header-row"},E.map((function(e,t){return o.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},o.a.createElement("span",{className:"famo-text-11"},e))})))),o.a.createElement("div",{className:"famo-grid famo-buttons"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-right"},o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){return b(!0)}},o.a.createElement("span",{className:"famo-text-12"},"Adicionar embalagem (manual)")),o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button"},o.a.createElement("span",{className:"famo-text-12"},"Adicionar embalagem (leitor c\xf3d. barras)"))))))),o.a.createElement(k,{contentType:y.inventoryProduct,visible:p,setVisible:b,confirm:function(e){alert(e)}})):o.a.createElement(u.a,{to:"/Pallet"})}var H=Object(u.g)((function(){return o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/Pallet",render:function(){return o.a.createElement(B,null)}}),o.a.createElement(u.b,{exact:!0,path:"/Pallet/Edit",render:function(e){return o.a.createElement(L,e)}}),o.a.createElement(u.b,{path:"/Pallet/*",render:function(){return o.a.createElement(u.a,{to:"/Pallet"})}}))})),G=a(20),K=a(31),q=a(30),J=a(32);function Y(e,t,a){fetch(A+"Platform/Android?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(n){n.ok&&n.status===b.a.OK?n.json().then((function(a){!function(e){switch(e){case"POR":N.a.locale("pt-pt");break;case"ENG":N.a.locale("en");break;case"ESP":N.a.locale("es-es");break;case"FRA":N.a.locale("fr")}}(e.Language.Code),t.setAndroidApp(a),t.setAuthUser(e)})).catch((function(e){V(e),alert(a("key_416"))})):(F(n),alert(a("key_303")))})).catch((function(e){V(e),alert(a("key_416"))}))}function Q(e,t){W.autoSignIn().then((function(a){a.ok&&a.status===b.a.OK?a.json().then((function(a){Y(a,e,t)})).catch((function(e){V(e),alert(t("key_416"))})):(F(a),alert(t("key_306")))})).catch((function(e){V(e),alert(t("key_416"))}))}var W=function e(){Object(E.a)(this,e)};W.signIn=function(e,t){return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",fetch(A+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t}),credentials:"include"}));case 1:case"end":return a.stop()}}))},W.autoSignIn=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(A+"Authentication/AutoSignIn?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}))},W.signOut=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(A+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}))};var X=a(26),Z=a.n(X),$=a(44),ee=a(43);$.a.use(ee.a).use(f.a).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:"./JSON/i18n/{{lng}}.json?timestamp="+(new Date).getTime(),crossDomain:!0}});var te=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(K.a)(this,Object(q.a)(t).call(this,e))).usernameRef=void 0,a.hideInputMsg=function(e){return"signin-error-input"+(e?" hide":"")},a.handleChangeInput=function(e){a.setState(Object(G.a)({},e.target.name,e.target.value))},a.handleUserInput=function(e){e.target.value||a.setState({hideUserMsg:"blur"!==e.type})},a.handlePwdInput=function(e){e.target.value||a.setState({hidePwdMsg:"blur"!==e.type})},a.handleSubmit=function(e){var t,n,r,o,l,s;return c.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e.preventDefault(),t=M(),n=Object(i.a)(t,2),r=n[1],a.state.username&&a.state.password){m.next=6;break}a.setState({hideUserMsg:!!a.state.username,hidePwdMsg:!!a.state.password}),m.next=24;break;case 6:return m.next=8,c.a.awrap(W.signIn(a.state.username,a.state.password));case 8:if(o=m.sent,l=a.props.t,a.setState({authError:!1,authHttpCode:-1}),!o.ok){m.next=20;break}return a.setState({authSuccess:!0}),m.t0=r,m.next=16,c.a.awrap(o.json());case 16:m.t1=m.sent,m.t0.setAuthUser.call(m.t0,m.t1),m.next=24;break;case 20:400!==(s=o.status)&&500!==s&&console.log(l("key_416")+" - "+s),a.usernameRef.current.focus(),a.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:s});case 24:case"end":return m.stop()}}))},a.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},a.usernameRef=o.a.createRef(),a}return Object(J.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=Z()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),t=Z()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),a=Z()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,r=n.location;return this.state.authSuccess?o.a.createElement(u.a,{to:r.state||{from:{pathname:"/"}}}):o.a.createElement("section",{className:"famo-grid signin"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell"},o.a.createElement("div",{className:"signin-body"},o.a.createElement("div",{className:"signin-famo-logo"},o.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),o.a.createElement("div",{className:"signin-form"},o.a.createElement("div",{className:"signin-app-name"},o.a.createElement("span",{className:"famo-text-2"},"PDA")),o.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"signin-input-wrapper"},o.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),o.a.createElement(ae,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),o.a.createElement("div",{className:"signin-input-wrapper"},o.a.createElement("input",{type:"password",id:"signin-password-input",className:t,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),o.a.createElement(ae,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),o.a.createElement("div",{className:a},this.state.authError&&400===this.state.authHttpCode&&o.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&o.a.createElement("span",{className:"famo-text-7"},c("key_306"))),o.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},o.a.createElement("span",{className:"famo-text-5"},c("key_238"))),o.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},o.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-cell-bottom"},o.a.createElement("div",{className:"signin-footer text-center"},o.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),t}(o.a.Component),ae=function(e){function t(){return Object(E.a)(this,t),Object(K.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.msgClass,a=e.msgText;return o.a.createElement("div",{className:t},o.a.createElement("span",{className:"famo-text-7"},a))}}]),t}(o.a.Component),ne=(Object(f.c)()(te),a(18));a(76);function ce(e){var t=e.t,a=M(),n=Object(i.a)(a,2),c=n[0],l=n[1];return Object(r.useEffect)((function(){fetch(A+"Authentication/Session/User",{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===b.a.OK?e.json().then((function(e){Y(e,l,t)})).catch((function(e){Q(l,t),V(e)})):(Q(l,t),F(e))})).catch((function(e){Q(l,t),V(e)}))}),[]),o.a.createElement("section",{className:"famo-body"},o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/",render:function(){return o.a.createElement(d,null)}}),o.a.createElement(u.b,{path:"/Inventory",render:function(){return o.a.createElement(U,null)}}),o.a.createElement(u.b,{path:"/Pallet",render:function(){return o.a.createElement(H,null)}})),o.a.createElement(C,{hide:c.authUser&&!c.loadPage}))}var re=Object(f.c)()((function(e){return window.cordova?o.a.createElement(ne.b,null,o.a.createElement(ce,e)):o.a.createElement(ne.a,null,o.a.createElement(ce,e))}));function oe(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",s.a.render(o.a.createElement(r.Suspense,{fallback:o.a.createElement(C,{hide:!0})},o.a.createElement(re,null)),document.getElementById("root"))}catch(t){alert("Oops!! Liga o servidor Node.js!")}case 1:case"end":return e.stop()}}))}window.cordova?document.addEventListener("deviceready",oe,!1):oe()}},[[46,1,2]]]);
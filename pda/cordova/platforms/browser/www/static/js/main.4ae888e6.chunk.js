(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{42:function(e,t,a){e.exports=a(62)},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a.n(n),r=a(17),c=a(0),o=a.n(c),i=a(32),m=a.n(i),l=(a(33),a(2)),u=a(18),p=a(9),d=a(34);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={setAuthUser:function(e,t){e.setState(h({},e.state,{authUser:t}))},setLoadPage:function(e,t){e.setState(h({},e.state,{loadPage:t}))}},E=Object(d.a)(o.a,{authUser:null,loadPage:!0},b),g=a(11);var v=Object(u.g)(Object(g.b)()((function(){var e=E(),t=Object(l.a)(e,2)[1],a=Object(c.useState)(!1),n=Object(l.a)(a,2),s=n[0],r=n[1];return Object(c.useEffect)((function(){t.setLoadPage(!1)}),[]),s?o.a.createElement(u.a,{to:"/Inventory"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-content"},o.a.createElement("div",{className:"famo-grid"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-center"},o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){r(!0)}},o.a.createElement("span",{className:"famo-text-5"},"Invent\xe1rio"))))))))}))),O=a(21),N=a.n(O),w="http://cpu-244.famo.pt:3030/";function y(e){fetch(w+"Log/Errors?appName=pda&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}).then((function(){})).catch((function(){}))}var j=Object(u.g)(Object(g.b)()((function(e){var t=e.t,a=Object(c.useState)(),n=Object(l.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)([]),m=Object(l.a)(i,2),u=m[0],p=m[1],d=E(),f=Object(l.a)(d,2),h=f[0],b=f[1];function g(){window.cordova.plugins.barcodeScanner.scan((function(e){e.cancelled||fetch(w+"ERP/Products?productCode="+e.text+"&timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===N.a.OK?e.json().then((function(e){r(e)})).catch((function(e){alert(t("O c\xf3digo de barras n\xe3o corresponde a um produto."))})):alert(t("O c\xf3digo de barras n\xe3o corresponde a um produto."))})).catch((function(e){alert(t("key_416")),y(e)}))}),(function(e){alert(t("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}return Object(c.useEffect)((function(){h.authUser&&fetch(w+"ERP/Inventories?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===N.a.OK?e.json().then((function(e){p(e),b.setLoadPage(!1)})).catch((function(){alert(t("key_303"))})):alert(t("key_303"))})).catch((function(){alert(t("key_416"))}))}),[h.authUser]),o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-content"},o.a.createElement("form",{action:"javascript:void(0)",className:"famo-grid famo-form-grid",noValidate:!0},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},"Invent\xe1rio")),o.a.createElement("div",{className:"famo-cell"},o.a.createElement("select",{className:"famo-input famo-text-10",name:"inventoryCode",onChange:function(e){g()}},o.a.createElement("option",{key:""}),u.map((function(e){return o.a.createElement("option",{key:e.Code},e.Name)})))))))),s?o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-title"},o.a.createElement("span",{className:"famo-text-13"},t("key_339"))),o.a.createElement("div",{className:"famo-content"},o.a.createElement("form",{action:"javascript:void(0)",className:"famo-grid famo-form-grid",noValidate:!0},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},t("key_87"))),o.a.createElement("div",{className:"famo-cell"},o.a.createElement("input",{type:"text",className:"famo-input famo-text-10",name:"code",disabled:!0,value:s.Code}))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-input-label"},o.a.createElement("span",{className:"famo-text-11"},t("key_138"))),o.a.createElement("div",{className:"famo-cell"},o.a.createElement("input",{type:"text",className:"famo-input famo-text-10",name:"description",disabled:!0,value:s.Description})))))):null,o.a.createElement("section",{className:"famo-wrapper"},o.a.createElement("div",{className:"famo-grid"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell text-right"},o.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",onClick:function(e){g()}},o.a.createElement("span",{className:"famo-text-12"},t("key_681"))))))))}))),k=a(3),x=a(4),S=a(14),P=a(19),I=a(20);function C(e,t){_.autoSignIn().then((function(a){a.ok&&a.status===N.a.OK?a.json().then((function(t){e.setAuthUser(t)})).catch((function(){alert(t("key_306"))})):alert(t("key_306"))})).catch((function(){alert(t("key_416"))}))}var _=function e(){Object(k.a)(this,e)};_.signIn=function(){var e=Object(r.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(w+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a}),credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_.autoSignIn=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(w+"Authentication/AutoSignIn?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)}))),_.signOut=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(w+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}),e)})));var D=a(26),T=a.n(D),M=a(41),U=a(40);M.a.use(U.a).use(g.a).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{useSuspense:!1},backend:{loadPath:"./JSON/i18n/{{lng}}.json?timestamp="+(new Date).getTime(),crossDomain:!0}});var A=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(S.a)(this,Object(P.a)(t).call(this,e))).usernameInput=void 0,a.hideInputMsg=function(e){return"signin-error-input"+(e?" hide":"")},a.handleChangeInput=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleUserInput=function(e){e.target.value||a.setState({hideUserMsg:"blur"!==e.type})},a.handlePwdInput=function(e){e.target.value||a.setState({hidePwdMsg:"blur"!==e.type})},a.handleSubmit=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,r,c,o,i,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=E(),r=Object(l.a)(n,2),c=r[1],a.state.username&&a.state.password){e.next=6;break}a.setState({hideUserMsg:!!a.state.username,hidePwdMsg:!!a.state.password}),e.next=24;break;case 6:return e.next=8,_.signIn(a.state.username,a.state.password);case 8:if(o=e.sent,i=a.props.t,a.setState({authError:!1,authHttpCode:-1}),!o.ok){e.next=20;break}return a.setState({authSuccess:!0}),e.t0=c,e.next=16,o.json();case 16:e.t1=e.sent,e.t0.setAuthUser.call(e.t0,e.t1),e.next=24;break;case 20:400!==(m=o.status)&&500!==m&&console.log(i("key_416")+" - "+m),a.usernameInput.current.focus(),a.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:m});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},a.usernameInput=o.a.createRef(),a}return Object(I.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.usernameInput.current.focus()}},{key:"render",value:function(){var e=T()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),t=T()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),a=T()("signin-error-submit",{hide:!this.state.authError}),n=this.props,s=n.t,r=n.location;return this.state.authSuccess?o.a.createElement(u.a,{to:r.state||{from:{pathname:"/"}}}):o.a.createElement("section",{className:"famo-grid signin"},o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell"},o.a.createElement("div",{className:"signin-body"},o.a.createElement("div",{className:"signin-famo-logo"},o.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),o.a.createElement("div",{className:"signin-form"},o.a.createElement("div",{className:"signin-app-name"},o.a.createElement("span",{className:"famo-text-2"},"PDA")),o.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"signin-input-wrapper"},o.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:s("key_397"),ref:this.usernameInput,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),o.a.createElement(F,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:s("key_196")})),o.a.createElement("div",{className:"signin-input-wrapper"},o.a.createElement("input",{type:"password",id:"signin-password-input",className:t,placeholder:s("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),o.a.createElement(F,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:s("key_195")})),o.a.createElement("div",{className:a},this.state.authError&&400===this.state.authHttpCode&&o.a.createElement("span",{className:"famo-text-7"},s("key_398")),this.state.authError&&500===this.state.authHttpCode&&o.a.createElement("span",{className:"famo-text-7"},s("key_306"))),o.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},o.a.createElement("span",{className:"famo-text-5"},s("key_238"))),o.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},o.a.createElement("span",{className:"famo-text-27"},s("key_648")))))))),o.a.createElement("div",{className:"famo-row"},o.a.createElement("div",{className:"famo-cell famo-cell-bottom"},o.a.createElement("div",{className:"signin-footer text-center"},o.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),t}(o.a.Component),F=function(e){function t(){return Object(k.a)(this,t),Object(S.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.msgClass,a=e.msgText;return o.a.createElement("div",{className:t},o.a.createElement("span",{className:"famo-text-7"},a))}}]),t}(o.a.Component),L=(Object(g.b)()(A),a(22));a(61);function B(e){var t=e.t,a=E(),n=Object(l.a)(a,2),s=n[0],r=n[1];return Object(c.useEffect)((function(){fetch(w+"Authentication/Sesssion/User",{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===N.a.OK?e.json().then((function(e){r.setAuthUser(e)})).catch((function(){C(r,t)})):(C(r,t),y(e))})).catch((function(e){C(r,t),y(e)}))}),[]),o.a.createElement("section",{className:"famo-body"},o.a.createElement("div",{className:"pda-app-loader"+(s.authUser&&!s.loadPage?" hide":"")},o.a.createElement("div",{className:"famo-loader"})),o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/"},o.a.createElement(v,null)),o.a.createElement(u.b,{path:"/Inventory"},o.a.createElement(j,null))))}var H=Object(g.b)()((function(e){return window.cordova?o.a.createElement(L.b,null,o.a.createElement(B,e)):o.a.createElement(L.a,null,o.a.createElement(B,e))}));function G(){return J.apply(this,arguments)}function J(){return(J=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m.a.render(o.a.createElement(H,null),document.getElementById("root"))}catch(t){alert("Oops!! Liga o servidor Node.js!")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cordova?document.addEventListener("deviceready",G,!1):G()}},[[42,1,2]]]);
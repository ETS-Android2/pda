(this["webpackJsonppda-client"]=this["webpackJsonppda-client"]||[]).push([[0],{47:function(e,t,a){e.exports=a(78)},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a.n(n),o=a(0),l=a.n(o),r=a(35),s=a.n(r),i=(a(46),a(1)),m=a(16),u=a(2),f=a(19),d=a(13),p=a(18),b="SS_PALLET",E=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"clear",value:function(e){e?e.pallet||window.sessionStorage.removeItem(b):window.sessionStorage.clear()}}]),e}(),h=a(5);var v=Object(f.g)(Object(h.c)()((function(e){var t=e.t,a=Object(o.useState)({inventory:!1,pallet:!1}),n=Object(i.a)(a,2),c=n[0],r=n[1],s=[{label:t("key_806"),key:"inventory",image:"btn-inventario.png"},{label:"Paletes",key:"pallet",image:"btn-palete.png"}];return Object(o.useEffect)((function(){E.clear()}),[]),c.inventory?l.a.createElement(f.a,{push:!0,to:"/Inventory"}):c.pallet?l.a.createElement(f.a,{push:!0,to:"/Pallet"}):l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row",style:{justifyContent:"center"}},s.map((function(e,t){return l.a.createElement("div",{key:t,className:"col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"},l.a.createElement("section",{className:"famo-wrapper",onClick:function(t){return r((function(t){return Object(u.a)({},t,Object(m.a)({},e.key,!0))}))}},l.a.createElement("div",{className:"famo-content"},l.a.createElement("div",{className:"famo-grid famo-sidebar-main-item"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-sidebar-item-label text-center"},l.a.createElement("span",{className:"famo-text-19",title:e.label},e.label))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-sidebar-item-img text-center"},l.a.createElement("img",{src:"Content/Images/"+e.image,alt:e.label})))))))}))))}))),N=a(3),y=a.n(N),g=a(15),O=a.n(g);function j(e){return e?e.toString().replace(new RegExp("\\"+O.a.localeData().delimiters.thousands,"g"),"").replace(new RegExp("\\"+O.a.localeData().delimiters.decimal,"g"),"."):e}window.numeral=O.a;var k,w=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"analyze",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(u.a)({},e,{analyze:!0})}))}))}},{key:"areAllAnalyzed",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return!e.analyzeForm}))}},{key:"areAllValid",value:function(e){return!e.filter((function(e){return!e.isDisabled})).some((function(e){return e.noData||e.wrongFormat||e.invalidValue}))}},{key:"getValue",value:function(e){return e.isNumber?parseFloat(j(e.value)):e.value}},{key:"popUpAlerts",value:function(e,t){e.some((function(e){return e.noData}))&&x.noDataAlert(t),e.some((function(e){return e.wrongFormat}))&&x.wrongFormatAlert(e.filter((function(e){return e.wrongFormat})).map((function(e){return e.label})),t),e.some((function(e){return e.invalidValue}))&&x.invalidValuesAlert(e.filter((function(e){return e.invalidValue})).map((function(e){return e.label})),t)}},{key:"resetValues",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(u.a)({},e,{value:"",noData:!1,wrongFormat:!1,invalidValue:!1,analyze:!1,analyzeForm:!1})}))}))}},{key:"resetValidations",value:function(e,t){e.forEach((function(e,a){e.isDisabled||t[a]((function(e){return Object(u.a)({},e,{analyze:!1,analyzeForm:!1})}))}))}}]),e}(),x=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"invalidValuesAlert",value:function(e,t){for(var a=t("key_192"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}},{key:"noDataAlert",value:function(e){alert(e("key_197"))}},{key:"wrongFormatAlert",value:function(e,t){for(var a=t("key_191"),n=0,c=e.length;n<c;n++)a+=e[n],n<c-2?a+=", ":n===c-2&&(a+=" "+t("key_573")+" ");alert(a)}}]),e}(),C=function(e){var t=Object(h.b)().t,a=e.className,n=e.isDisabled,r=e.isNumber,s=e.name,m=e.value,f=e.noData,d=e.wrongFormat,p=e.invalidValue,b=e.invalidMessage,E=e.analyze,v=e.set,N=e.children,y=Object(o.useState)({noData:!1,wrongFormat:!1,invalidValue:!1}),g=Object(i.a)(y,2),k=g[0],w=g[1],x=l.a.Children.count(N)>0,C=l.a.createRef();return Object(o.useEffect)((function(){if(!n&&E){var e=m;v((function(e){return Object(u.a)({},e,{noData:!1,wrongFormat:!1,invalidValue:!1})})),e?r&&e&&(e=j(e),isNaN(e)?v((function(e){return Object(u.a)({},e,{noData:!1,wrongFormat:!0,invalidValue:!1})})):parseFloat(e)<=0&&v((function(e){return Object(u.a)({},e,{noData:!1,wrongFormat:!1,invalidValue:!0})}))):v((function(e){return Object(u.a)({},e,{noData:!0,wrongFormat:!1,invalidValue:!1})})),v((function(e){return Object(u.a)({},e,{analyzeForm:!0})}))}}),[E]),Object(o.useEffect)((function(){w({noData:f,wrongFormat:d,invalidValue:p})}),[f,d,p]),l.a.createElement(l.a.Fragment,null,x?l.a.createElement("select",{className:a+(k.noData?" famo-input-error":""),name:s,ref:C,disabled:n,onChange:function(e){return v((function(e){return Object(u.a)({},e,{value:C.current.value})}))}},N):l.a.createElement("input",{type:"text",className:a+(k.noData?" famo-input-error":k.wrongFormat||k.invalidValue?" famo-input-warning":""),name:s,value:m,ref:C,disabled:n,onKeyDown:function(e){r&&function(e,t){var a,n;c.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:a=t.current.selectionStart,n=t.current.value,110===e.keyCode&&(e.preventDefault(),t.current.value=n.substr(0,a)+O.a.localeData().delimiters.decimal+n.substr(a,n.length-1));case 2:case"end":return c.stop()}}))}(e,C)},onChange:function(e){return v((function(e){return Object(u.a)({},e,{value:C.current.value})}))}}),!x&&l.a.createElement(l.a.Fragment,null,!n&&l.a.createElement("div",{className:"famo-input-message"+(k.wrongFormat?"":" hide")},l.a.createElement("span",{className:"famo-text-15"},t("key_808"))),b&&!n&&l.a.createElement("div",{className:"famo-input-message"+(k.invalidValue?"":" hide")},l.a.createElement("span",{className:"famo-text-15"},b))))};!function(e){e[e.inventoryProduct=1]="inventoryProduct",e[e.palletBox=2]="palletBox"}(k||(k={}));var S=Object(h.c)()((function(e){var t=e.contentType,a=e.visible,n=e.setVisible,c=e.confirm,r=e.t,s=Object(o.useState)(a),m=Object(i.a)(s,2),u=m[0],f=m[1],d=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:r("key_87"),name:"productCode",value:"",noData:!1,analyze:!1,analyzeForm:!1}),p=Object(i.a)(d,2),b=p[0],E=p[1],h=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:"Embalagem",name:"boxCode",value:"",noData:!1,analyze:!1,analyzeForm:!1}),v=Object(i.a)(h,2),N=v[0],y=v[1],g=function(){switch(t){case k.inventoryProduct:return[b];case k.palletBox:return[N]}}(),O=function(){switch(t){case k.inventoryProduct:return[E];case k.palletBox:return[y]}}();function j(){switch(t){case k.inventoryProduct:case k.palletBox:w.analyze(g,O)}}function x(e){e.preventDefault(),j()}return Object(o.useEffect)((function(){f(a),a||w.resetValues(g,O)}),[a]),Object(o.useEffect)((function(){if(w.areAllAnalyzed(g)){if(w.areAllValid(g))switch(t){case k.inventoryProduct:case k.palletBox:c(g[0].value),n(!1)}w.resetValidations(g,O)}}),g),l.a.createElement("section",{className:"w3-modal famo-modal"+(u?" w3-show":""),onClick:function(e){return n(!1)}},l.a.createElement("div",{className:"w3-modal-content famo-modal-content",onClick:function(e){return e.stopPropagation()}},function(){switch(t){case k.inventoryProduct:case k.palletBox:return l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-content"},l.a.createElement("form",{className:"famo-grid famo-form-grid famo-submit-form",noValidate:!0,onSubmit:x},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},g[0].label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,Object.assign({},g[0],{set:O[0]})))),l.a.createElement("input",{type:"submit",className:"hide",value:""})),l.a.createElement("div",{className:"famo-grid famo-buttons"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){return j()}},l.a.createElement("span",{className:"famo-text-12"},r("key_701"))),l.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button",onClick:function(e){return n(!1)}},l.a.createElement("span",{className:"famo-text-12"},r("key_484"))))))))}}()),l.a.createElement("div",{className:"famo-buttons"},l.a.createElement("button",{type:"button",className:"famo-button famo-icon-button",title:r("key_200"),onClick:function(e){e.stopPropagation(),n(!1)}},l.a.createElement("span",{className:"fas fa-times"}))))}));var D=function(e){var t=e.text,a=Object(o.useState)(!1),n=Object(i.a)(a,2),c=n[0],r=n[1];return l.a.createElement("div",{className:"famo-title"+(c?" collapsed":"")},l.a.createElement("span",{className:"famo-text-13",onClick:function(e){r(!c)}},t))};function _(e,t){window.cordova.plugins.barcodeScanner.scan((function(t){t.cancelled||e(t)}),(function(e){alert(t("key_686"))}),{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!0,torchOn:!1,saveHistory:!1,prompt:"",resultDisplayDuration:0,formats:"CODE_39",orientation:"unset",disableAnimations:!0,disableSuccessBeep:!1,continuousMode:!1})}function P(e){var t=e.hide;return l.a.createElement("div",{className:"pda-app-loader"+(t?" hide":"")},l.a.createElement("div",{className:"famo-loader"}))}function A(e){var t=e.hide;return l.a.createElement("div",{className:"famo-loader-wrapper"+(t?" hide":"")},l.a.createElement("div",{className:"famo-loader"}))}function F(e){var t="?timestamp="+(new Date).getTime();for(var a in e){var n=e[a];if(Array.isArray(n))for(var c=0,o=n.length;c<o;c++)t+="&"+a+"="+(null===n[c]?"":encodeURIComponent(n[c]));else t+="&"+a+"="+(null===n?"":encodeURIComponent(n))}return t}var I="pda",T="http://cpu-244.famo.pt:3030/";function V(e){fetch(T+"Log/Http/Errors?appName="+I+"&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.status,statusText:e.statusText,url:e.url}),credentials:"include"}).then((function(){})).catch((function(){}))}function U(e){fetch(T+"Log/Promise/Errors?appName="+I+"&timestamp="+(new Date).getTime(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,request:e.request?{method:e.request.method,path:e.request.path}:null,response:e.response?{status:e.response.status}:null}),credentials:"include"}).then((function(){})).catch((function(){}))}var R=a(41),M={setAndroidApp:function(e,t){e.setState(Object(u.a)({},e.state,{androidApp:t}))},setAuthUser:function(e,t){e.setState(Object(u.a)({},e.state,{authUser:t}))},setLoadPage:function(e,t){e.setState(Object(u.a)({},e.state,{loadPage:t}))}},z=Object(R.a)(l.a,{androidApp:!1,authUser:null,loadPage:!1},M);var B=Object(f.g)(Object(h.c)()((function(e){var t=e.t,a=z(),n=Object(i.a)(a,2),c=n[0],r=n[1],s=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:t("key_806"),name:"inventoryCode",value:""}),m=Object(i.a)(s,2),f=m[0],d=m[1],p=Object(o.useState)([]),b=Object(i.a)(p,2),h=b[0],v=b[1],N=Object(o.useState)(!1),g=Object(i.a)(N,2),O=g[0],j=g[1],x=Object(o.useState)(!1),P=Object(i.a)(x,2),I=P[0],R=P[1],M=Object(o.useState)(null),B=Object(i.a)(M,2),L=B[0],K=B[1],G=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_87"),name:"productCode",value:""}),J=Object(i.a)(G,2),H=J[0],q=J[1],Y=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_464"),name:"productVariantCode",value:""}),Q=Object(i.a)(Y,2),W=Q[0],X=Q[1],Z=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_138"),name:"productDescription",value:""}),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!0,isNumber:!1,label:t("key_751"),name:"locationCode",value:""}),ne=Object(i.a)(ae,2),ce=ne[0],oe=ne[1],le=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!0,label:t("key_347"),name:"quantity",value:"",noData:!1,wrongFormat:!1,invalidValue:!1,invalidMessage:t("key_13"),analyze:!1,analyzeForm:!1}),re=Object(i.a)(le,2),se=re[0],ie=re[1],me=[H,W,ee,ce,se],ue=[q,X,te,oe,ie],fe=l.a.createRef();function de(e){var a=e.split("/"),n=a[0],c="";a.length>1&&(c=a[1]),R(!0),pe(),fetch(T+"ERP/Inventories/Products"+F({inventoryCode:f.value,productCode:n,productVariantCode:c}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?e.json().then((function(e){K(e),q((function(t){return Object(u.a)({},t,{value:e.ProductCode})})),X((function(t){return Object(u.a)({},t,{value:e.ProductVariantCode})})),te((function(t){return Object(u.a)({},t,{value:e.ProductDescription})})),oe((function(t){return Object(u.a)({},t,{value:e.LocationCode})}))})).catch((function(e){U(e),alert(t("key_416"))})):(V(e),alert(e.status===y.a.NOT_FOUND?t("key_809"):t("key_303")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){R(!1)}))}function pe(){K(null),w.resetValues(me,ue)}return Object(o.useEffect)((function(){c.authUser&&fetch(T+"ERP/Inventories?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?e.json().then((function(e){v(e)})).catch((function(e){U(e),alert(t("key_416"))})):(V(e),alert(t("key_303")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){r.setLoadPage(!1)}))}),[c.authUser]),Object(o.useEffect)((function(){r.setLoadPage(!0),E.clear()}),[]),Object(o.useEffect)((function(){pe()}),[f]),Object(o.useEffect)((function(){w.areAllAnalyzed(me)&&(w.areAllValid(me)?(R(!0),fetch(T+"ERP/Inventories/Products"+F({documentCode:L.Code,productCode:L.ProductCode,productVariantCode:L.ProductVariantCode,locationCode:L.LocationCode,quantity:w.getValue(se)}),{method:"PATCH",credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?(pe(),alert(t("key_805"))):(V(e),alert(t("key_302")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){R(!1)}))):w.popUpAlerts(me,t),w.resetValidations(me,ue))}),me),l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"famo-wrapper",ref:fe},l.a.createElement("div",{className:"famo-content"},l.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},f.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,Object.assign({},f,{isDisabled:I,set:d}),l.a.createElement("option",{key:""}),h.map((function(e,t){return l.a.createElement("option",{key:t,value:e.Code},e.Name)})))))))),(L||I)&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement(D,{text:t("key_339")}),l.a.createElement("div",{className:"famo-content"},l.a.createElement(A,{hide:!I}),l.a.createElement("form",{className:"famo-grid famo-form-grid"+(I?" hide":""),noValidate:!0,onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},H.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,H))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},W.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,W))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},ee.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,ee))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},ce.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,ce))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},se.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,Object.assign({},se,{set:ie}))))),l.a.createElement("div",{className:"famo-grid famo-buttons"+(I?" hide":"")},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button",onClick:function(e){w.analyze(me,ue)}},l.a.createElement("span",{className:"famo-text-12"},t("key_810")))))))),f&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-grid"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I,onClick:function(e){return j(!0)}},l.a.createElement("span",{className:"famo-text-12"},t("key_807"))),c.androidApp&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I,onClick:function(e){_((function(e){de(e.text)}),t)}},l.a.createElement("span",{className:"famo-text-12"},t("key_681"))))))),l.a.createElement(S,{contentType:k.inventoryProduct,visible:O,setVisible:j,confirm:de}))}))),L=a(45),K=a(42),G=a.n(K);function J(e){var t=Object(h.b)().t,a=e.history,n=z(),c=Object(i.a)(n,1)[0],r=window.sessionStorage.getItem(b),s=Object(o.useState)({className:"famo-input famo-text-10",isDisabled:!1,isNumber:!1,label:"Mapa de carga",name:"shipmentCode",value:r?JSON.parse(window.sessionStorage.getItem(b)).shipmentCode:""}),m=Object(i.a)(s,2),f=m[0],d=m[1],p=Object(o.useState)(!1),v=Object(i.a)(p,2),N=v[0],g=v[1],O=Object(o.useState)(null),j=Object(i.a)(O,2),k=j[0],w=j[1],x=[t("key_279")];function S(e){g(!0),w(null),fetch(T+"ERP/Pallets"+F({shipmentCode:e}),{method:"GET",credentials:"include"}).then((function(a){a.ok&&a.status===y.a.OK?a.json().then((function(t){d((function(t){return Object(u.a)({},t,{valueSubmit:e})})),w(t)})).catch((function(e){U(e),alert(t("key_416"))})):(V(a),alert(a.status===y.a.NOT_FOUND?"O c\xf3digo n\xe3o corresponde a um mapa de carga.":t("key_303")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){g(!1)}))}function P(e){window.sessionStorage.setItem(b,JSON.stringify({shipmentCode:f.valueSubmit})),a.push("/Pallet/Edit?shipmentCode="+f.valueSubmit+(e?"&palletID="+e:""))}return Object(o.useEffect)((function(){r&&S(f.value),E.clear()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-content"},l.a.createElement("form",{className:"famo-grid famo-form-grid",noValidate:!0,onSubmit:function(e){e.preventDefault(),S(f.value)}},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-input-label"},l.a.createElement("span",{className:"famo-text-11"},f.label)),l.a.createElement("div",{className:"famo-cell"},l.a.createElement(C,Object.assign({},f,{set:d})))),l.a.createElement("input",{type:"submit",className:"hide",value:""})),l.a.createElement("div",{className:"famo-grid famo-buttons"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},c.androidApp&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:N,onClick:function(e){_((function(e){d((function(t){return Object(u.a)({},t,{value:e.text})})),S(e.text)}),t)}},l.a.createElement("span",{className:"famo-text-12"},t("key_681"))),l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:N,onClick:function(e){return S(f.value)}},l.a.createElement("span",{className:"famo-text-12"},t("key_323")))))))),(k||N)&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement(D,{text:"Paletes"}),l.a.createElement("div",{className:"famo-content"},l.a.createElement(A,{hide:!N}),l.a.createElement("div",{className:"famo-grid famo-content-grid pallets"+(N?" hide":"")},l.a.createElement("div",{className:"famo-row famo-header-row"},x.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},l.a.createElement("span",{className:"famo-text-11"},e))}))),k&&k.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-row famo-body-row",onClick:function(t){return P(e.ID)}},l.a.createElement("div",{className:"famo-cell famo-col-1"},l.a.createElement("span",{className:"famo-text-10"},e.ID)))}))))),k&&l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-grid"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:N,onClick:function(e){return P()}},l.a.createElement("span",{className:"famo-text-12"},"Criar palete")))))))}function H(e){var t=Object(h.b)().t,a=e.location,n=e.history,c=z(),r=Object(i.a)(c,2),s=r[0],m=r[1],d=G.a.parse(a.search),p=[t("key_87"),t("key_179"),""],b=Object(o.useState)(!0),v=Object(i.a)(b,2),N=v[0],g=v[1],O=Object(o.useState)([]),j=Object(i.a)(O,2),w=j[0],x=j[1],C=Object(o.useState)(!1),P=Object(i.a)(C,2),I=P[0],R=P[1],M=Object(o.useState)(!1),B=Object(i.a)(M,2),K=B[0],J=B[1],H=Object(o.useState)(!1),q=Object(i.a)(H,2),Y=q[0],Q=q[1],W=Object(o.useState)(!1),X=Object(i.a)(W,2),Z=X[0],$=X[1],ee=d.palletID;function te(e){w.some((function(t){return t.Code===e}))?alert("A palete j\xe1 tem uma embalagem com este c\xf3digo."):(R(!0),fetch(T+"ERP/Shipments/Boxes"+F({shipmentCode:d.shipmentCode,boxCode:e}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?e.json().then((function(e){e.isNew=!0,x([].concat(Object(L.a)(w),[e]))})).catch((function(e){U(e),alert(t("key_416"))})):(V(e),e.status===y.a.NOT_FOUND?alert("O c\xf3digo da embalagem n\xe3o est\xe1 associado ao envio."):e.status===y.a.FORBIDDEN?alert("Esta embalagem est\xe1 associada a uma palete fechada."):alert(t("key_303")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){R(!1)})))}function ae(){N&&w.some((function(e){return e.isNew}))?alert("Existem embalagens n\xe3o associadas \xe0 palete."):(Q(!0),fetch(T+"ERP/Pallets/"+(N?"Close":"Reopen")+F({shipmentCode:d.shipmentCode,palletID:ee||""}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w.map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?(alert(N?"A palete foi fechada com sucesso.":"A palete foi reaberta com sucesso."),g(!N)):(V(e),alert(t("key_302")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){Q(!1)})))}return Object(o.useEffect)((function(){d.palletID&&(m.setLoadPage(!0),fetch(T+"ERP/Pallets/Boxes"+F({shipmentCode:d.shipmentCode,palletID:d.palletID}),{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?e.json().then((function(e){g(e.some((function(e){return e.IsPalletOpen}))),e.forEach((function(e){e.isNew=!1})),x(e)})).catch((function(e){U(e),alert(t("key_416"))})):(V(e),e.status===y.a.NOT_FOUND?n.replace("/Pallet"):alert(t("key_303")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){m.setLoadPage(!1)}))),E.clear({pallet:!0})}),[]),d.shipmentCode?l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement(D,{text:"Embalagens"}),l.a.createElement("div",{className:"famo-content"},l.a.createElement(A,{hide:!K}),l.a.createElement("div",{className:"famo-grid famo-content-grid pallet-boxes"+(K?" hide":"")},l.a.createElement("div",{className:"famo-row famo-header-row"},p.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-cell famo-col-"+(t+1)},l.a.createElement("span",{className:"famo-text-11"},e))}))),w.map((function(e,t){return l.a.createElement("div",{key:t,className:"famo-row famo-body-row"},l.a.createElement("div",{className:"famo-cell famo-col-1"},l.a.createElement("span",{className:"famo-text-10"},e.Code)),l.a.createElement("div",{className:"famo-cell famo-col-2"},l.a.createElement("span",{className:"famo-text-10"},e.OrderCode)),l.a.createElement("div",{className:"famo-cell famo-col-3"},l.a.createElement("span",{className:"famo-text-10"},e.isNew&&l.a.createElement("button",{type:"button",className:"famo-button famo-cancel-button button-delete-box",onClick:function(t){return a=e.Code,void x(w.filter((function(e){return e.Code!==a})));var a}},l.a.createElement("span",{className:"fas fa-trash-alt"})))))}))),N&&l.a.createElement("div",{className:"famo-grid famo-buttons"+(K?" hide":"")},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I||Y,onClick:function(e){return $(!0)}},l.a.createElement("span",{className:"famo-text-12"},"Adicionar (manual)")),s.androidApp&&l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I||Y,onClick:function(e){_((function(e){te(e.text)}),t)}},l.a.createElement("span",{className:"famo-text-12"},"Adicionar (leitor c\xf3d. barras)"))))))),l.a.createElement("section",{className:"famo-wrapper"},l.a.createElement("div",{className:"famo-grid"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell text-right"},N?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{type:"button",className:"famo-button famo-normal-button",disabled:I||K||Y,onClick:function(e){return J(!0),void fetch(T+"ERP/Pallets/Boxes"+F({shipmentCode:d.shipmentCode,palletID:ee||""}),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(w.filter((function(e){return e.isNew})).map((function(e){return e.Code}))),credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?(e.json().then((function(e){ee=e.palletID})).catch((function(e){U(e),alert(t("key_416"))})),x(w.map((function(e){return Object(u.a)({},e,{isNew:!1})})))):(V(e),alert(t("key_302")))})).catch((function(e){U(e),alert(t("key_416"))})).finally((function(){J(!1)}))}},l.a.createElement("span",{className:"famo-text-12"},t("key_220"))),l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:I||K||Y,onClick:function(e){return ae()}},l.a.createElement("span",{className:"fas fa-spinner fa-spin"+(Y?"":" hide")}),l.a.createElement("span",{className:"famo-text-12"+(Y?" hide":"")},t("key_200")))):l.a.createElement("button",{type:"button",className:"famo-button famo-confirm-button famo-loader-button",disabled:I||K||Y,onClick:function(e){return ae()}},l.a.createElement("span",{className:"fas fa-spinner fa-spin"+(Y?"":" hide")}),l.a.createElement("span",{className:"famo-text-12"+(Y?" hide":"")},"Reabrir")))))),l.a.createElement(S,{contentType:k.palletBox,visible:Z,setVisible:$,confirm:te})):l.a.createElement(f.a,{to:"/Pallet"})}var q=Object(f.g)((function(){return l.a.createElement(f.d,null,l.a.createElement(f.b,{exact:!0,path:"/Pallet",render:function(e){return l.a.createElement(J,e)}}),l.a.createElement(f.b,{exact:!0,path:"/Pallet/Edit",render:function(e){return l.a.createElement(H,e)}}),l.a.createElement(f.b,{path:"/Pallet/*",render:function(){return l.a.createElement(f.a,{to:"/Pallet"})}}))})),Y=a(31),Q=a(30),W=a(32);function X(e,t,a){fetch(T+"Platform/Android?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}).then((function(n){n.ok&&n.status===y.a.OK?n.json().then((function(a){!function(e){switch(e){case"POR":O.a.locale("pt-pt");break;case"ENG":O.a.locale("en");break;case"ESP":O.a.locale("es-es");break;case"FRA":O.a.locale("fr")}}(e.Language.Code),t.setAndroidApp(a),t.setAuthUser(e)})).catch((function(e){U(e),alert(a("key_416"))})):(V(n),alert(a("key_303")))})).catch((function(e){U(e),alert(a("key_416"))}))}function Z(e,t){$.autoSignIn().then((function(a){a.ok&&a.status===y.a.OK?a.json().then((function(a){X(a,e,t)})).catch((function(e){U(e),alert(t("key_416"))})):(V(a),alert(t("key_306")))})).catch((function(e){U(e),alert(t("key_416"))}))}var $=function e(){Object(d.a)(this,e)};$.signIn=function(e,t){return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",fetch(T+"Authentication/SignIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t}),credentials:"include"}));case 1:case"end":return a.stop()}}))},$.autoSignIn=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T+"Authentication/AutoSignIn?timestamp="+(new Date).getTime(),{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}))},$.signOut=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(T+"Authentication/SignOut",{method:"GET",credentials:"include"}));case 1:case"end":return e.stop()}}))};var ee=a(26),te=a.n(ee),ae=a(44),ne=a(43);ae.a.use(ne.a).use(h.a).init({lng:"pt",fallbackLng:"pt",whitelist:["pt","en","es","fr"],debug:!1,react:{},backend:{loadPath:"./JSON/i18n/{{lng}}.json?timestamp="+(new Date).getTime(),crossDomain:!0}});var ce=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(Y.a)(this,Object(Q.a)(t).call(this,e))).usernameRef=void 0,a.hideInputMsg=function(e){return"signin-error-input"+(e?" hide":"")},a.handleChangeInput=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value))},a.handleUserInput=function(e){e.target.value||a.setState({hideUserMsg:"blur"!==e.type})},a.handlePwdInput=function(e){e.target.value||a.setState({hidePwdMsg:"blur"!==e.type})},a.handleSubmit=function(e){var t,n,o,l,r,s;return c.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e.preventDefault(),t=z(),n=Object(i.a)(t,2),o=n[1],a.state.username&&a.state.password){m.next=6;break}a.setState({hideUserMsg:!!a.state.username,hidePwdMsg:!!a.state.password}),m.next=24;break;case 6:return m.next=8,c.a.awrap($.signIn(a.state.username,a.state.password));case 8:if(l=m.sent,r=a.props.t,a.setState({authError:!1,authHttpCode:-1}),!l.ok){m.next=20;break}return a.setState({authSuccess:!0}),m.t0=o,m.next=16,c.a.awrap(l.json());case 16:m.t1=m.sent,m.t0.setAuthUser.call(m.t0,m.t1),m.next=24;break;case 20:400!==(s=l.status)&&500!==s&&console.log(r("key_416")+" - "+s),a.usernameRef.current.focus(),a.setState({password:"",hidePwdMsg:!0,authError:!0,authHttpCode:s});case 24:case"end":return m.stop()}}))},a.state={username:"",password:"",hideUserMsg:!0,hidePwdMsg:!0,authSuccess:!1,authError:!1,authHttpCode:-1},a.usernameRef=l.a.createRef(),a}return Object(W.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.usernameRef.current.focus()}},{key:"render",value:function(){var e=te()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hideUserMsg}),t=te()("famo-input signin-form-input famo-text-3",{"famo-input-error":!this.state.hidePwdMsg}),a=te()("signin-error-submit",{hide:!this.state.authError}),n=this.props,c=n.t,o=n.location;return this.state.authSuccess?l.a.createElement(f.a,{to:o.state||{from:{pathname:"/"}}}):l.a.createElement("section",{className:"famo-grid signin"},l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell"},l.a.createElement("div",{className:"signin-body"},l.a.createElement("div",{className:"signin-famo-logo"},l.a.createElement("img",{src:"http://www.famo-code.com/Content/Images/logo-famo-black-normal.png",alt:"FAMO"})),l.a.createElement("div",{className:"signin-form"},l.a.createElement("div",{className:"signin-app-name"},l.a.createElement("span",{className:"famo-text-2"},"PDA")),l.a.createElement("form",{id:"signin-form",method:"POST",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"signin-input-wrapper"},l.a.createElement("input",{type:"text",id:"signin-username-input",className:e,placeholder:c("key_397"),ref:this.usernameRef,name:"username",value:this.state.username,autoComplete:"off",onChange:this.handleChangeInput,onFocus:this.handleUserInput,onBlur:this.handleUserInput}),l.a.createElement(oe,{msgClass:this.hideInputMsg(this.state.hideUserMsg),msgText:c("key_196")})),l.a.createElement("div",{className:"signin-input-wrapper"},l.a.createElement("input",{type:"password",id:"signin-password-input",className:t,placeholder:c("key_314"),name:"password",value:this.state.password,onChange:this.handleChangeInput,onFocus:this.handlePwdInput,onBlur:this.handlePwdInput}),l.a.createElement(oe,{msgClass:this.hideInputMsg(this.state.hidePwdMsg),msgText:c("key_195")})),l.a.createElement("div",{className:a},this.state.authError&&400===this.state.authHttpCode&&l.a.createElement("span",{className:"famo-text-7"},c("key_398")),this.state.authError&&500===this.state.authHttpCode&&l.a.createElement("span",{className:"famo-text-7"},c("key_306"))),l.a.createElement("button",{className:"famo-button famo-confirm-button signin-button-submit",type:"submit"},l.a.createElement("span",{className:"famo-text-5"},c("key_238"))),l.a.createElement("button",{type:"button",className:"famo-button famo-transparent-button signup-button"},l.a.createElement("span",{className:"famo-text-27"},c("key_648")))))))),l.a.createElement("div",{className:"famo-row"},l.a.createElement("div",{className:"famo-cell famo-cell-bottom"},l.a.createElement("div",{className:"signin-footer text-center"},l.a.createElement("span",{className:"famo-text-1"},(new Date).getFullYear()," \xa9 FAMO - ","PDA")))))}}]),t}(l.a.Component),oe=function(e){function t(){return Object(d.a)(this,t),Object(Y.a)(this,Object(Q.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.msgClass,a=e.msgText;return l.a.createElement("div",{className:t},l.a.createElement("span",{className:"famo-text-7"},a))}}]),t}(l.a.Component),le=(Object(h.c)()(ce),a(20));a(77);function re(e){var t=e.t,a=z(),n=Object(i.a)(a,2),c=n[0],r=n[1];return Object(o.useEffect)((function(){fetch(T+"Authentication/Session/User",{method:"GET",credentials:"include"}).then((function(e){e.ok&&e.status===y.a.OK?e.json().then((function(e){X(e,r,t)})).catch((function(e){Z(r,t),U(e)})):(Z(r,t),V(e))})).catch((function(e){Z(r,t),U(e)}))}),[]),l.a.createElement("section",{className:"famo-body"},l.a.createElement(f.d,null,l.a.createElement(f.b,{exact:!0,path:"/",render:function(){return l.a.createElement(v,null)}}),l.a.createElement(f.b,{path:"/Inventory",render:function(){return l.a.createElement(B,null)}}),l.a.createElement(f.b,{path:"/Pallet",render:function(){return l.a.createElement(q,null)}})),l.a.createElement(P,{hide:c.authUser&&!c.loadPage}))}var se=Object(h.c)()((function(e){return window.cordova?l.a.createElement(le.b,null,l.a.createElement(re,e)):l.a.createElement(le.a,null,l.a.createElement(re,e))}));function ie(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{document.getElementById("pda-footer").innerText=(new Date).getFullYear()+" \xa9 FAMO - PDA",s.a.render(l.a.createElement(o.Suspense,{fallback:l.a.createElement(P,{hide:!0})},l.a.createElement(se,null)),document.getElementById("root"))}catch(t){alert("Oops!! Liga o servidor Node.js!")}case 1:case"end":return e.stop()}}))}window.cordova?document.addEventListener("deviceready",ie,!1):ie()}},[[47,1,2]]]);
{"version":3,"file":"app.js","sourceRoot":"","sources":["../src/app.ts"],"names":[],"mappings":";;;;;AAAA,kFAA0D;AAC1D,8DAAqC;AACrC,8DAAsC;AACtC,kEAAyC;AACzC,gDAAwB;AACxB,4DAAoC;AACpC,sDAA8B;AAC9B,oDAA4B;AAC5B,4DAAoC;AACpC,sEAA8C;AAC9C,kDAA0B;AAC1B,sEAAsC;AACtC,iDAA6B;AAC7B,yDAA+D;AAC/D,mDAAkD;AAGlD,MAAM,UAAU,GAAG,uBAAY,CAAC,yBAAO,CAAC,EACpC,WAAW,GAAG,eAAK,CAAC,YAAY,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;AAGxD,MAAM,GAAG,GAAG,iBAAO,EAAE,CAAC;AAGtB,GAAG,CAAC,GAAG,CAAC,qBAAU,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;AACpD,GAAG,CAAC,GAAG,CAAC,qBAAU,CAAC,IAAI,EAAE,CAAC,CAAC;AAG3B,GAAG,CAAC,GAAG,CAAC,qBAAW,EAAE,CAAC,CAAC;AAGvB,GAAG,CAAC,GAAG,CAAC,gBAAM,EAAE,CAAC,CAAC;AAGlB,GAAG,CAAC,GAAG,CAAC,cAAI,CAAC;IACT,MAAM,EAAE,IAAI;IACZ,WAAW,EAAE,IAAI;CACpB,CAAC,CAAC,CAAC;AAGJ,GAAG,CAAC,GAAG,CAAC,yBAAO,CAAC;IACZ,KAAK,EAAE,IAAI,UAAU,CAAC;QAClB,MAAM,EAAE,WAAW;QACnB,GAAG,EAAE,wBAAQ,GAAG,IAAI;KACvB,CAAC;IACF,MAAM,EAAE,qBAAqB;IAC7B,MAAM,EAAE;QACJ,MAAM,EAAE,wBAAQ;QAChB,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,KAAK;KAChB;IACD,KAAK,EAAE,CAAC,GAAQ,EAAE,EAAE;QAChB,OAAO,YAAM,EAAE,CAAC;IACpB,CAAC;IACD,IAAI,EAAE,4BAAY;IAClB,iBAAiB,EAAE,IAAI;IACvB,MAAM,EAAE,IAAI;CACf,CAAC,CAAC,CAAC;AAGJ,GAAG,CAAC,GAAG,CAAC,yBAAY,CAAC,CAAC;AAGtB,GAAG,CAAC,GAAG,CAAC,iBAAiB,EAAE,wBAAc,CAAC,CAAC;AAC3C,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,aAAG,CAAC,CAAC;AACrB,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,aAAG,CAAC,CAAC;AACrB,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,kBAAQ,CAAC,CAAC;AAG/B,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;AAGlC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;IAClB,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AACnC,CAAC,CAAC,CAAC","sourcesContent":["import authentication from './controllers/authentication';\r\nimport bodyParser from 'body-parser';\r\nimport compression from 'compression';\r\nimport connectRedis from 'connect-redis';\r\nimport cors from 'cors';\r\nimport erp from './controllers/erp';\r\nimport express from 'express';\r\nimport helmet from 'helmet';\r\nimport log from './controllers/log';\r\nimport platform from './controllers/platform';\r\nimport redis from 'redis';\r\nimport session from 'express-session';\r\nimport uuidv4 from 'uuid/v4';\r\nimport { MONTH_MS, SESSION_NAME } from './utils/variablesRepo';\r\nimport { trackRequest } from './utils/middleware';\r\n\r\n// redis - session\r\nconst redisStore = connectRedis(session),\r\n    redisClient = redis.createClient(3035, \"localhost\");\r\n\r\n// express\r\nconst app = express();\r\n\r\n// bodyParser\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json());\r\n\r\n// compression\r\napp.use(compression());\r\n\r\n// helmet\r\napp.use(helmet());\r\n\r\n// cors\r\napp.use(cors({\r\n    origin: true,\r\n    credentials: true\r\n}));\r\n\r\n// session\r\napp.use(session({\r\n    store: new redisStore({\r\n        client: redisClient,\r\n        ttl: MONTH_MS / 1000\r\n    }),\r\n    secret: 'famo_pda_session_sk',\r\n    cookie: {\r\n        maxAge: MONTH_MS,\r\n        httpOnly: true,\r\n        secure: false\r\n    },\r\n    genid: (req: any) => { // eslint-disable-line @typescript-eslint/no-unused-vars\r\n        return uuidv4();\r\n    },\r\n    name: SESSION_NAME,\r\n    saveUninitialized: true,\r\n    resave: true\r\n}));\r\n\r\n// access\r\napp.use(trackRequest);\r\n\r\n// routes\r\napp.use('/Authentication', authentication);\r\napp.use('/ERP', erp);\r\napp.use('/Log', log);\r\napp.use('/Platform', platform);\r\n\r\n// static\r\napp.use(express.static('public'));\r\n\r\n// start server\r\napp.listen(3030, () => {\r\n    console.log('Start server...');\r\n});"]}